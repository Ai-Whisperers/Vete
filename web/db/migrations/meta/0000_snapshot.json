{
  "id": "00000000-0000-0000-0000-000000000000",
  "prevId": "",
  "version": "7",
  "dialect": "postgresql",
  "tables": {
    "public.tenants": {
      "name": "tenants",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "legal_name": {
          "name": "legal_name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "phone": {
          "name": "phone",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "whatsapp": {
          "name": "whatsapp",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "email": {
          "name": "email",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "address": {
          "name": "address",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "city": {
          "name": "city",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "country": {
          "name": "country",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "default": "'Paraguay'"
        },
        "ruc": {
          "name": "ruc",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "logo_url": {
          "name": "logo_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "website_url": {
          "name": "website_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "settings": {
          "name": "settings",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "business_hours": {
          "name": "business_hours",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "features_enabled": {
          "name": "features_enabled",
          "type": "text[]",
          "primaryKey": false,
          "notNull": false,
          "default": "'{\"RAY['core'::tex\"}'"
        },
        "plan": {
          "name": "plan",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "default": "'free'"
        },
        "plan_expires_at": {
          "name": "plan_expires_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_tenants_active": {
          "name": "idx_tenants_active",
          "columns": [
            {
              "expression": "is_active",
              "asc": true,
              "nulls": "last",
              "opclass": "bool_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "where": "(is_active = true)",
          "with": {}
        },
        "idx_tenants_name": {
          "name": "idx_tenants_name",
          "columns": [
            {
              "expression": "name",
              "asc": true,
              "nulls": "last",
              "opclass": "gin_trgm_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "gin",
          "with": {}
        },
        "idx_tenants_plan": {
          "name": "idx_tenants_plan",
          "columns": [
            {
              "expression": "plan",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "where": "(is_active = true)",
          "with": {}
        },
        "idx_tenants_settings_gin": {
          "name": "idx_tenants_settings_gin",
          "columns": [
            {
              "expression": "settings",
              "asc": true,
              "nulls": "last",
              "opclass": "jsonb_path_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "gin",
          "where": "((settings IS NOT NULL) AND (settings <> '{}'::jsonb))",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {
        "tenants_id_format": {
          "name": "tenants_id_format",
          "value": "id ~ '^[a-z][a-z0-9_-]*$'::text"
        },
        "tenants_id_length": {
          "name": "tenants_id_length",
          "value": "(char_length(id) >= 2) AND (char_length(id) <= 50)"
        },
        "tenants_name_length": {
          "name": "tenants_name_length",
          "value": "(char_length(name) >= 2) AND (char_length(name) <= 100)"
        },
        "tenants_plan_check": {
          "name": "tenants_plan_check",
          "value": "plan = ANY (ARRAY['free'::text, 'starter'::text, 'professional'::text, 'enterprise'::text])"
        },
        "tenants_settings_is_object": {
          "name": "tenants_settings_is_object",
          "value": "(settings IS NULL) OR (jsonb_typeof(settings) = 'object'::text)"
        }
      },
      "policies": {
        "Authenticated users view own tenant": {
          "name": "Authenticated users view own tenant",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "((is_active = true) AND ((EXISTS ( SELECT 1\n   FROM profiles\n  WHERE ((profiles.id = auth.uid()) AND (profiles.tenant_id = tenants.id)))) OR true))"
        },
        "Service role full access": {
          "name": "Service role full access",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "service_role"
          ]
        }
      },
      "isRLSEnabled": true
    },
    "public.profiles": {
      "name": "profiles",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true
        },
        "tenant_id": {
          "name": "tenant_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "full_name": {
          "name": "full_name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "email": {
          "name": "email",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "phone": {
          "name": "phone",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "secondary_phone": {
          "name": "secondary_phone",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "avatar_url": {
          "name": "avatar_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "role": {
          "name": "role",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'owner'"
        },
        "client_code": {
          "name": "client_code",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "address": {
          "name": "address",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "city": {
          "name": "city",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "document_type": {
          "name": "document_type",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "document_number": {
          "name": "document_number",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "preferred_contact": {
          "name": "preferred_contact",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "default": "'phone'"
        },
        "notes": {
          "name": "notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "signature_url": {
          "name": "signature_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "license_number": {
          "name": "license_number",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "specializations": {
          "name": "specializations",
          "type": "text[]",
          "primaryKey": false,
          "notNull": false
        },
        "bio": {
          "name": "bio",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "deleted_at": {
          "name": "deleted_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "deleted_by": {
          "name": "deleted_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_profiles_client_list": {
          "name": "idx_profiles_client_list",
          "columns": [
            {
              "expression": "tenant_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            },
            {
              "expression": "full_name",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            },
            {
              "expression": "email",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            },
            {
              "expression": "phone",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            },
            {
              "expression": "client_code",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            },
            {
              "expression": "avatar_url",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "where": "((role = 'owner'::text) AND (deleted_at IS NULL))",
          "with": {}
        },
        "idx_profiles_deleted": {
          "name": "idx_profiles_deleted",
          "columns": [
            {
              "expression": "deleted_at",
              "asc": true,
              "nulls": "last",
              "opclass": "timestamptz_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "where": "(deleted_at IS NULL)",
          "with": {}
        },
        "idx_profiles_email": {
          "name": "idx_profiles_email",
          "columns": [
            {
              "expression": "email",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_profiles_email_lower": {
          "name": "idx_profiles_email_lower",
          "columns": [
            {
              "expression": "lower(email)",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": true
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_profiles_name_search": {
          "name": "idx_profiles_name_search",
          "columns": [
            {
              "expression": "full_name",
              "asc": true,
              "nulls": "last",
              "opclass": "gin_trgm_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "gin",
          "with": {}
        },
        "idx_profiles_role": {
          "name": "idx_profiles_role",
          "columns": [
            {
              "expression": "role",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_profiles_specializations_gin": {
          "name": "idx_profiles_specializations_gin",
          "columns": [
            {
              "expression": "specializations",
              "asc": true,
              "nulls": "last",
              "opclass": "array_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "gin",
          "where": "(specializations IS NOT NULL)",
          "with": {}
        },
        "idx_profiles_staff_list": {
          "name": "idx_profiles_staff_list",
          "columns": [
            {
              "expression": "tenant_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            },
            {
              "expression": "role",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            },
            {
              "expression": "full_name",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            },
            {
              "expression": "email",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            },
            {
              "expression": "phone",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            },
            {
              "expression": "avatar_url",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            },
            {
              "expression": "license_number",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "where": "((role = ANY (ARRAY['vet'::text, 'admin'::text])) AND (deleted_at IS NULL))",
          "with": {}
        },
        "idx_profiles_staff_lookup": {
          "name": "idx_profiles_staff_lookup",
          "columns": [
            {
              "expression": "id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            },
            {
              "expression": "tenant_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            },
            {
              "expression": "role",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "where": "((role = ANY (ARRAY['vet'::text, 'admin'::text])) AND (deleted_at IS NULL))",
          "with": {}
        },
        "idx_profiles_tenant": {
          "name": "idx_profiles_tenant",
          "columns": [
            {
              "expression": "tenant_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_profiles_tenant_role": {
          "name": "idx_profiles_tenant_role",
          "columns": [
            {
              "expression": "tenant_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            },
            {
              "expression": "role",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_profiles_unique_email_per_tenant": {
          "name": "idx_profiles_unique_email_per_tenant",
          "columns": [
            {
              "expression": "tenant_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": true
            },
            {
              "expression": "lower(email)",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": true
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "where": "((tenant_id IS NOT NULL) AND (email IS NOT NULL) AND (deleted_at IS NULL))",
          "with": {}
        },
        "idx_unique_client_code": {
          "name": "idx_unique_client_code",
          "columns": [
            {
              "expression": "tenant_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            },
            {
              "expression": "client_code",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "where": "((client_code IS NOT NULL) AND (deleted_at IS NULL))",
          "with": {}
        }
      },
      "foreignKeys": {
        "profiles_deleted_by_fkey": {
          "name": "profiles_deleted_by_fkey",
          "tableFrom": "profiles",
          "tableTo": "profiles",
          "schemaTo": "public",
          "columnsFrom": [
            "deleted_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "profiles_tenant_id_fkey": {
          "name": "profiles_tenant_id_fkey",
          "tableFrom": "profiles",
          "tableTo": "tenants",
          "schemaTo": "public",
          "columnsFrom": [
            "tenant_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {
        "profiles_email_format": {
          "name": "profiles_email_format",
          "value": "(email IS NULL) OR (email ~* '^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\\.[A-Za-z]{2,}$'::text)"
        },
        "profiles_name_length": {
          "name": "profiles_name_length",
          "value": "(full_name IS NULL) OR (char_length(full_name) >= 2)"
        },
        "profiles_phone_length": {
          "name": "profiles_phone_length",
          "value": "(phone IS NULL) OR (char_length(phone) >= 6)"
        },
        "profiles_preferred_contact_check": {
          "name": "profiles_preferred_contact_check",
          "value": "preferred_contact = ANY (ARRAY['phone'::text, 'email'::text, 'whatsapp'::text, 'sms'::text])"
        },
        "profiles_role_check": {
          "name": "profiles_role_check",
          "value": "role = ANY (ARRAY['owner'::text, 'vet'::text, 'admin'::text])"
        },
        "profiles_staff_requires_info": {
          "name": "profiles_staff_requires_info",
          "value": "(role = 'owner'::text) OR ((full_name IS NOT NULL) AND (email IS NOT NULL))"
        }
      },
      "policies": {
        "Service role full access": {
          "name": "Service role full access",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "service_role"
          ],
          "withCheck": "true",
          "using": "true"
        },
        "Staff update tenant profiles": {
          "name": "Staff update tenant profiles",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ]
        },
        "Staff view tenant profiles": {
          "name": "Staff view tenant profiles",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ]
        },
        "Users insert own profile": {
          "name": "Users insert own profile",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ]
        },
        "Users update own profile": {
          "name": "Users update own profile",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ]
        },
        "Users view own profile": {
          "name": "Users view own profile",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ]
        }
      },
      "isRLSEnabled": true
    },
    "public.demo_accounts": {
      "name": "demo_accounts",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "email": {
          "name": "email",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "tenant_id": {
          "name": "tenant_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "role": {
          "name": "role",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'owner'"
        },
        "full_name": {
          "name": "full_name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_demo_accounts_email": {
          "name": "idx_demo_accounts_email",
          "columns": [
            {
              "expression": "email",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "where": "(is_active = true)",
          "with": {}
        }
      },
      "foreignKeys": {
        "demo_accounts_tenant_id_fkey": {
          "name": "demo_accounts_tenant_id_fkey",
          "tableFrom": "demo_accounts",
          "tableTo": "tenants",
          "schemaTo": "public",
          "columnsFrom": [
            "tenant_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "demo_accounts_email_key": {
          "columns": [
            "email"
          ],
          "nullsNotDistinct": false,
          "name": "demo_accounts_email_key"
        }
      },
      "checkConstraints": {
        "demo_accounts_role_check": {
          "name": "demo_accounts_role_check",
          "value": "role = ANY (ARRAY['owner'::text, 'vet'::text, 'admin'::text])"
        }
      },
      "policies": {
        "Service role manage demo accounts": {
          "name": "Service role manage demo accounts",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "service_role"
          ],
          "using": "true"
        }
      },
      "isRLSEnabled": true
    },
    "public.clinic_invites": {
      "name": "clinic_invites",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "tenant_id": {
          "name": "tenant_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "email": {
          "name": "email",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "role": {
          "name": "role",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'owner'"
        },
        "invited_by": {
          "name": "invited_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "message": {
          "name": "message",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'pending'"
        },
        "expires_at": {
          "name": "expires_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "(now() + '7 days'::interval)"
        },
        "accepted_at": {
          "name": "accepted_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "accepted_by": {
          "name": "accepted_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_clinic_invites_accepted_by": {
          "name": "idx_clinic_invites_accepted_by",
          "columns": [
            {
              "expression": "accepted_by",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_clinic_invites_email": {
          "name": "idx_clinic_invites_email",
          "columns": [
            {
              "expression": "email",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_clinic_invites_invited_by": {
          "name": "idx_clinic_invites_invited_by",
          "columns": [
            {
              "expression": "invited_by",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_clinic_invites_pending": {
          "name": "idx_clinic_invites_pending",
          "columns": [
            {
              "expression": "email",
              "asc": true,
              "nulls": "last",
              "opclass": "timestamptz_ops",
              "isExpression": false
            },
            {
              "expression": "status",
              "asc": true,
              "nulls": "last",
              "opclass": "timestamptz_ops",
              "isExpression": false
            },
            {
              "expression": "expires_at",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "where": "(status = 'pending'::text)",
          "with": {}
        },
        "idx_clinic_invites_tenant": {
          "name": "idx_clinic_invites_tenant",
          "columns": [
            {
              "expression": "tenant_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_clinic_invites_tenant_pending": {
          "name": "idx_clinic_invites_tenant_pending",
          "columns": [
            {
              "expression": "tenant_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            },
            {
              "expression": "status",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            },
            {
              "expression": "email",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            },
            {
              "expression": "role",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            },
            {
              "expression": "expires_at",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            },
            {
              "expression": "invited_by",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "where": "(status = 'pending'::text)",
          "with": {}
        }
      },
      "foreignKeys": {
        "clinic_invites_accepted_by_fkey": {
          "name": "clinic_invites_accepted_by_fkey",
          "tableFrom": "clinic_invites",
          "tableTo": "profiles",
          "schemaTo": "public",
          "columnsFrom": [
            "accepted_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "clinic_invites_invited_by_fkey": {
          "name": "clinic_invites_invited_by_fkey",
          "tableFrom": "clinic_invites",
          "tableTo": "profiles",
          "schemaTo": "public",
          "columnsFrom": [
            "invited_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "clinic_invites_tenant_id_fkey": {
          "name": "clinic_invites_tenant_id_fkey",
          "tableFrom": "clinic_invites",
          "tableTo": "tenants",
          "schemaTo": "public",
          "columnsFrom": [
            "tenant_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {
        "clinic_invites_email_format": {
          "name": "clinic_invites_email_format",
          "value": "email ~* '^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\\.[A-Za-z]{2,}$'::text"
        },
        "clinic_invites_message_length": {
          "name": "clinic_invites_message_length",
          "value": "(message IS NULL) OR (char_length(message) <= 500)"
        },
        "clinic_invites_role_check": {
          "name": "clinic_invites_role_check",
          "value": "role = ANY (ARRAY['owner'::text, 'vet'::text, 'admin'::text])"
        },
        "clinic_invites_status_check": {
          "name": "clinic_invites_status_check",
          "value": "status = ANY (ARRAY['pending'::text, 'accepted'::text, 'expired'::text, 'cancelled'::text])"
        }
      },
      "policies": {
        "Service role full access": {
          "name": "Service role full access",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "service_role"
          ],
          "using": "true"
        },
        "Staff manage invites": {
          "name": "Staff manage invites",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "authenticated"
          ]
        }
      },
      "isRLSEnabled": true
    },
    "public.clinic_patient_access": {
      "name": "clinic_patient_access",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "clinic_id": {
          "name": "clinic_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "pet_id": {
          "name": "pet_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "access_level": {
          "name": "access_level",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "default": "'write'"
        },
        "granted_at": {
          "name": "granted_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "clinic_patient_access_clinic_id_pet_id_key": {
          "columns": [
            "clinic_id",
            "pet_id"
          ],
          "nullsNotDistinct": false,
          "name": "clinic_patient_access_clinic_id_pet_id_key"
        }
      },
      "checkConstraints": {
        "clinic_patient_access_access_level_check": {
          "name": "clinic_patient_access_access_level_check",
          "value": "access_level = ANY (ARRAY['read'::text, 'write'::text])"
        }
      },
      "policies": {},
      "isRLSEnabled": true
    },
    "public.clinic_product_assignments": {
      "name": "clinic_product_assignments",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "tenant_id": {
          "name": "tenant_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "catalog_product_id": {
          "name": "catalog_product_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "sale_price": {
          "name": "sale_price",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": true
        },
        "min_stock_level": {
          "name": "min_stock_level",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": false,
          "default": "'0'"
        },
        "location": {
          "name": "location",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "requires_prescription": {
          "name": "requires_prescription",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "margin_percentage": {
          "name": "margin_percentage",
          "type": "numeric(5, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_clinic_product_assignments_active": {
          "name": "idx_clinic_product_assignments_active",
          "columns": [
            {
              "expression": "tenant_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "where": "(is_active = true)",
          "with": {}
        },
        "idx_clinic_product_assignments_catalog": {
          "name": "idx_clinic_product_assignments_catalog",
          "columns": [
            {
              "expression": "catalog_product_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_clinic_product_assignments_product": {
          "name": "idx_clinic_product_assignments_product",
          "columns": [
            {
              "expression": "catalog_product_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_clinic_product_assignments_tenant": {
          "name": "idx_clinic_product_assignments_tenant",
          "columns": [
            {
              "expression": "tenant_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "clinic_product_assignments_tenant_id_catalog_product_id_key": {
          "columns": [
            "tenant_id",
            "catalog_product_id"
          ],
          "nullsNotDistinct": false,
          "name": "clinic_product_assignments_tenant_id_catalog_product_id_key"
        }
      },
      "checkConstraints": {},
      "policies": {
        "Clinic staff manage assignments": {
          "name": "Clinic staff manage assignments",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "authenticated"
          ],
          "withCheck": "(EXISTS ( SELECT 1\n   FROM profiles p\n  WHERE ((p.id = auth.uid()) AND (p.tenant_id = clinic_product_assignments.tenant_id) AND (p.role = ANY (ARRAY['vet'::text, 'admin'::text])) AND (p.deleted_at IS NULL))))",
          "using": "(EXISTS ( SELECT 1\n   FROM profiles p\n  WHERE ((p.id = auth.uid()) AND (p.tenant_id = clinic_product_assignments.tenant_id) AND (p.role = ANY (ARRAY['vet'::text, 'admin'::text])) AND (p.deleted_at IS NULL))))"
        },
        "Service role full access assignments": {
          "name": "Service role full access assignments",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "service_role"
          ]
        },
        "Service role full access product assignments": {
          "name": "Service role full access product assignments",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "service_role"
          ]
        }
      },
      "isRLSEnabled": false
    },
    "public.pets": {
      "name": "pets",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "owner_id": {
          "name": "owner_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "tenant_id": {
          "name": "tenant_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "species": {
          "name": "species",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "breed": {
          "name": "breed",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "color": {
          "name": "color",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "sex": {
          "name": "sex",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "birth_date": {
          "name": "birth_date",
          "type": "date",
          "primaryKey": false,
          "notNull": false
        },
        "birth_date_estimated": {
          "name": "birth_date_estimated",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "is_neutered": {
          "name": "is_neutered",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "neutered_date": {
          "name": "neutered_date",
          "type": "date",
          "primaryKey": false,
          "notNull": false
        },
        "weight_kg": {
          "name": "weight_kg",
          "type": "numeric(6, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "weight_updated_at": {
          "name": "weight_updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "microchip_number": {
          "name": "microchip_number",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "microchip_date": {
          "name": "microchip_date",
          "type": "date",
          "primaryKey": false,
          "notNull": false
        },
        "registration_number": {
          "name": "registration_number",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "photo_url": {
          "name": "photo_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "photos": {
          "name": "photos",
          "type": "text[]",
          "primaryKey": false,
          "notNull": false,
          "default": "'{\"RAY\"}'"
        },
        "is_deceased": {
          "name": "is_deceased",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "deceased_date": {
          "name": "deceased_date",
          "type": "date",
          "primaryKey": false,
          "notNull": false
        },
        "deceased_reason": {
          "name": "deceased_reason",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "blood_type": {
          "name": "blood_type",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "allergies": {
          "name": "allergies",
          "type": "text[]",
          "primaryKey": false,
          "notNull": false,
          "default": "'{\"RAY\"}'"
        },
        "chronic_conditions": {
          "name": "chronic_conditions",
          "type": "text[]",
          "primaryKey": false,
          "notNull": false,
          "default": "'{\"RAY\"}'"
        },
        "notes": {
          "name": "notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": true
        },
        "deleted_at": {
          "name": "deleted_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "deleted_by": {
          "name": "deleted_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "diet_category": {
          "name": "diet_category",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "diet_notes": {
          "name": "diet_notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "temperament": {
          "name": "temperament",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_pets_active": {
          "name": "idx_pets_active",
          "columns": [
            {
              "expression": "tenant_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "where": "((deleted_at IS NULL) AND (is_deceased = false))",
          "with": {}
        },
        "idx_pets_allergies_gin": {
          "name": "idx_pets_allergies_gin",
          "columns": [
            {
              "expression": "allergies",
              "asc": true,
              "nulls": "last",
              "opclass": "array_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "gin",
          "where": "((allergies IS NOT NULL) AND (allergies <> '{}'::text[]))",
          "with": {}
        },
        "idx_pets_conditions_gin": {
          "name": "idx_pets_conditions_gin",
          "columns": [
            {
              "expression": "chronic_conditions",
              "asc": true,
              "nulls": "last",
              "opclass": "array_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "gin",
          "where": "((chronic_conditions IS NOT NULL) AND (chronic_conditions <> '{}'::text[]))",
          "with": {}
        },
        "idx_pets_name_search": {
          "name": "idx_pets_name_search",
          "columns": [
            {
              "expression": "name",
              "asc": true,
              "nulls": "last",
              "opclass": "gin_trgm_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "gin",
          "with": {}
        },
        "idx_pets_owner": {
          "name": "idx_pets_owner",
          "columns": [
            {
              "expression": "owner_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_pets_owner_list": {
          "name": "idx_pets_owner_list",
          "columns": [
            {
              "expression": "owner_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            },
            {
              "expression": "name",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            },
            {
              "expression": "species",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            },
            {
              "expression": "breed",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            },
            {
              "expression": "photo_url",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            },
            {
              "expression": "birth_date",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            },
            {
              "expression": "is_deceased",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            },
            {
              "expression": "tenant_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "where": "(deleted_at IS NULL)",
          "with": {}
        },
        "idx_pets_owner_rls": {
          "name": "idx_pets_owner_rls",
          "columns": [
            {
              "expression": "id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            },
            {
              "expression": "owner_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "where": "(deleted_at IS NULL)",
          "with": {}
        },
        "idx_pets_species": {
          "name": "idx_pets_species",
          "columns": [
            {
              "expression": "tenant_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            },
            {
              "expression": "species",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "where": "(deleted_at IS NULL)",
          "with": {}
        },
        "idx_pets_tenant": {
          "name": "idx_pets_tenant",
          "columns": [
            {
              "expression": "tenant_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_pets_tenant_list": {
          "name": "idx_pets_tenant_list",
          "columns": [
            {
              "expression": "tenant_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            },
            {
              "expression": "name",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            },
            {
              "expression": "owner_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            },
            {
              "expression": "species",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            },
            {
              "expression": "breed",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            },
            {
              "expression": "photo_url",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            },
            {
              "expression": "is_deceased",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            },
            {
              "expression": "is_active",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "where": "(deleted_at IS NULL)",
          "with": {}
        },
        "idx_pets_tenant_owner": {
          "name": "idx_pets_tenant_owner",
          "columns": [
            {
              "expression": "tenant_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            },
            {
              "expression": "owner_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_unique_microchip": {
          "name": "idx_unique_microchip",
          "columns": [
            {
              "expression": "microchip_number",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "where": "((microchip_number IS NOT NULL) AND (deleted_at IS NULL))",
          "with": {}
        }
      },
      "foreignKeys": {
        "pets_deleted_by_fkey": {
          "name": "pets_deleted_by_fkey",
          "tableFrom": "pets",
          "tableTo": "profiles",
          "schemaTo": "public",
          "columnsFrom": [
            "deleted_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "pets_owner_id_fkey": {
          "name": "pets_owner_id_fkey",
          "tableFrom": "pets",
          "tableTo": "profiles",
          "schemaTo": "public",
          "columnsFrom": [
            "owner_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "restrict",
          "onUpdate": "no action"
        },
        "pets_tenant_id_fkey": {
          "name": "pets_tenant_id_fkey",
          "tableFrom": "pets",
          "tableTo": "tenants",
          "schemaTo": "public",
          "columnsFrom": [
            "tenant_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {
        "pets_allergies_limit": {
          "name": "pets_allergies_limit",
          "value": "(allergies IS NULL) OR (array_length(allergies, 1) IS NULL) OR (array_length(allergies, 1) <= 50)"
        },
        "pets_birth_not_future": {
          "name": "pets_birth_not_future",
          "value": "(birth_date IS NULL) OR (birth_date <= CURRENT_DATE)"
        },
        "pets_conditions_limit": {
          "name": "pets_conditions_limit",
          "value": "(chronic_conditions IS NULL) OR (array_length(chronic_conditions, 1) IS NULL) OR (array_length(chronic_conditions, 1) <= 50)"
        },
        "pets_deceased_consistency": {
          "name": "pets_deceased_consistency",
          "value": "((is_deceased = false) AND (deceased_date IS NULL)) OR (is_deceased = true)"
        },
        "pets_name_length": {
          "name": "pets_name_length",
          "value": "(char_length(name) >= 1) AND (char_length(name) <= 100)"
        },
        "pets_neutered_consistency": {
          "name": "pets_neutered_consistency",
          "value": "((is_neutered = false) AND (neutered_date IS NULL)) OR (is_neutered = true)"
        },
        "pets_sex_check": {
          "name": "pets_sex_check",
          "value": "sex = ANY (ARRAY['male'::text, 'female'::text, 'unknown'::text])"
        },
        "pets_species_check": {
          "name": "pets_species_check",
          "value": "species = ANY (ARRAY['dog'::text, 'cat'::text, 'bird'::text, 'rabbit'::text, 'hamster'::text, 'fish'::text, 'reptile'::text, 'other'::text])"
        },
        "pets_weight_positive": {
          "name": "pets_weight_positive",
          "value": "(weight_kg IS NULL) OR (weight_kg > (0)::numeric)"
        }
      },
      "policies": {
        "Owners manage own pets": {
          "name": "Owners manage own pets",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "authenticated"
          ],
          "withCheck": "(owner_id = auth.uid())",
          "using": "((owner_id = auth.uid()) AND (deleted_at IS NULL))"
        },
        "Service role full access": {
          "name": "Service role full access",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "service_role"
          ]
        },
        "Staff manage tenant pets": {
          "name": "Staff manage tenant pets",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "authenticated"
          ]
        }
      },
      "isRLSEnabled": true
    },
    "public.qr_tags": {
      "name": "qr_tags",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "tenant_id": {
          "name": "tenant_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "pet_id": {
          "name": "pet_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "code": {
          "name": "code",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "batch_number": {
          "name": "batch_number",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "batch_id": {
          "name": "batch_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "is_registered": {
          "name": "is_registered",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": true
        },
        "assigned_at": {
          "name": "assigned_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "assigned_by": {
          "name": "assigned_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_qr_tags_code": {
          "name": "idx_qr_tags_code",
          "columns": [
            {
              "expression": "code",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_qr_tags_pet": {
          "name": "idx_qr_tags_pet",
          "columns": [
            {
              "expression": "pet_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "where": "(pet_id IS NOT NULL)",
          "with": {}
        },
        "idx_qr_tags_tenant": {
          "name": "idx_qr_tags_tenant",
          "columns": [
            {
              "expression": "tenant_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "where": "(tenant_id IS NOT NULL)",
          "with": {}
        },
        "idx_qr_tags_unassigned": {
          "name": "idx_qr_tags_unassigned",
          "columns": [
            {
              "expression": "tenant_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "where": "((pet_id IS NULL) AND (is_active = true))",
          "with": {}
        }
      },
      "foreignKeys": {
        "qr_tags_assigned_by_fkey": {
          "name": "qr_tags_assigned_by_fkey",
          "tableFrom": "qr_tags",
          "tableTo": "profiles",
          "schemaTo": "public",
          "columnsFrom": [
            "assigned_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "qr_tags_pet_id_fkey": {
          "name": "qr_tags_pet_id_fkey",
          "tableFrom": "qr_tags",
          "tableTo": "pets",
          "schemaTo": "public",
          "columnsFrom": [
            "pet_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "qr_tags_tenant_id_fkey": {
          "name": "qr_tags_tenant_id_fkey",
          "tableFrom": "qr_tags",
          "tableTo": "tenants",
          "schemaTo": "public",
          "columnsFrom": [
            "tenant_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "qr_tags_code_key": {
          "columns": [
            "code"
          ],
          "nullsNotDistinct": false,
          "name": "qr_tags_code_key"
        }
      },
      "checkConstraints": {
        "qr_tags_code_format": {
          "name": "qr_tags_code_format",
          "value": "char_length(code) >= 6"
        }
      },
      "policies": {
        "Public lookup tags": {
          "name": "Public lookup tags",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "public"
          ],
          "using": "((is_active = true) AND (is_registered = true))"
        },
        "Service role full access tags": {
          "name": "Service role full access tags",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "service_role"
          ]
        },
        "Staff manage tags": {
          "name": "Staff manage tags",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "authenticated"
          ]
        }
      },
      "isRLSEnabled": true
    },
    "public.voice_notes": {
      "name": "voice_notes",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "pet_id": {
          "name": "pet_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "note_text": {
          "name": "note_text",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "audio_url": {
          "name": "audio_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {},
      "policies": {},
      "isRLSEnabled": true
    },
    "public.dicom_images": {
      "name": "dicom_images",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "pet_id": {
          "name": "pet_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "image_oid": {
          "name": "image_oid",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "modality": {
          "name": "modality",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "body_part": {
          "name": "body_part",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "taken_at": {
          "name": "taken_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {},
      "policies": {},
      "isRLSEnabled": true
    },
    "public.lost_pets": {
      "name": "lost_pets",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "pet_id": {
          "name": "pet_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "tenant_id": {
          "name": "tenant_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'lost'"
        },
        "last_seen_location": {
          "name": "last_seen_location",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "last_seen_lat": {
          "name": "last_seen_lat",
          "type": "numeric(10, 7)",
          "primaryKey": false,
          "notNull": false
        },
        "last_seen_lng": {
          "name": "last_seen_lng",
          "type": "numeric(10, 7)",
          "primaryKey": false,
          "notNull": false
        },
        "last_seen_at": {
          "name": "last_seen_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "reported_by": {
          "name": "reported_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "contact_phone": {
          "name": "contact_phone",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "contact_email": {
          "name": "contact_email",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "found_at": {
          "name": "found_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "found_location": {
          "name": "found_location",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "found_by": {
          "name": "found_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "notes": {
          "name": "notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_lost_pets_location": {
          "name": "idx_lost_pets_location",
          "columns": [
            {
              "expression": "last_seen_lat",
              "asc": true,
              "nulls": "last",
              "opclass": "numeric_ops",
              "isExpression": false
            },
            {
              "expression": "last_seen_lng",
              "asc": true,
              "nulls": "last",
              "opclass": "numeric_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "where": "((status = 'lost'::text) AND (last_seen_lat IS NOT NULL))",
          "with": {}
        },
        "idx_lost_pets_pet": {
          "name": "idx_lost_pets_pet",
          "columns": [
            {
              "expression": "pet_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_lost_pets_status": {
          "name": "idx_lost_pets_status",
          "columns": [
            {
              "expression": "status",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "where": "(status = 'lost'::text)",
          "with": {}
        },
        "idx_lost_pets_tenant": {
          "name": "idx_lost_pets_tenant",
          "columns": [
            {
              "expression": "tenant_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "lost_pets_found_by_fkey": {
          "name": "lost_pets_found_by_fkey",
          "tableFrom": "lost_pets",
          "tableTo": "profiles",
          "schemaTo": "public",
          "columnsFrom": [
            "found_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "lost_pets_pet_id_fkey": {
          "name": "lost_pets_pet_id_fkey",
          "tableFrom": "lost_pets",
          "tableTo": "pets",
          "schemaTo": "public",
          "columnsFrom": [
            "pet_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "lost_pets_reported_by_fkey": {
          "name": "lost_pets_reported_by_fkey",
          "tableFrom": "lost_pets",
          "tableTo": "profiles",
          "schemaTo": "public",
          "columnsFrom": [
            "reported_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "lost_pets_tenant_id_fkey": {
          "name": "lost_pets_tenant_id_fkey",
          "tableFrom": "lost_pets",
          "tableTo": "tenants",
          "schemaTo": "public",
          "columnsFrom": [
            "tenant_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {
        "lost_pets_status_check": {
          "name": "lost_pets_status_check",
          "value": "status = ANY (ARRAY['lost'::text, 'found'::text, 'reunited'::text])"
        }
      },
      "policies": {
        "Owners manage own lost pets": {
          "name": "Owners manage own lost pets",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "authenticated"
          ],
          "using": "is_owner_of_pet(pet_id)"
        },
        "Public view lost pets": {
          "name": "Public view lost pets",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "public"
          ]
        },
        "Service role full access lost pets": {
          "name": "Service role full access lost pets",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "service_role"
          ]
        },
        "Staff manage lost pets": {
          "name": "Staff manage lost pets",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "authenticated"
          ]
        }
      },
      "isRLSEnabled": true
    },
    "public.vaccine_templates": {
      "name": "vaccine_templates",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "tenant_id": {
          "name": "tenant_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "species": {
          "name": "species",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "min_age_weeks": {
          "name": "min_age_weeks",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "recommended_age_weeks": {
          "name": "recommended_age_weeks",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "booster_interval_days": {
          "name": "booster_interval_days",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "is_required": {
          "name": "is_required",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "display_order": {
          "name": "display_order",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 100
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": true
        },
        "deleted_at": {
          "name": "deleted_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "deleted_by": {
          "name": "deleted_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_vaccine_templates_active": {
          "name": "idx_vaccine_templates_active",
          "columns": [
            {
              "expression": "id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "where": "(deleted_at IS NULL)",
          "with": {}
        },
        "idx_vaccine_templates_global": {
          "name": "idx_vaccine_templates_global",
          "columns": [
            {
              "expression": "display_order",
              "asc": true,
              "nulls": "last",
              "opclass": "int4_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "where": "((tenant_id IS NULL) AND (is_active = true) AND (deleted_at IS NULL))",
          "with": {}
        },
        "idx_vaccine_templates_species": {
          "name": "idx_vaccine_templates_species",
          "columns": [
            {
              "expression": "species",
              "asc": true,
              "nulls": "last",
              "opclass": "array_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "gin",
          "with": {}
        },
        "idx_vaccine_templates_tenant": {
          "name": "idx_vaccine_templates_tenant",
          "columns": [
            {
              "expression": "tenant_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {
        "vaccine_templates_interval_positive": {
          "name": "vaccine_templates_interval_positive",
          "value": "(booster_interval_days IS NULL) OR (booster_interval_days > 0)"
        },
        "vaccine_templates_name_length": {
          "name": "vaccine_templates_name_length",
          "value": "(char_length(name) >= 2) AND (char_length(name) <= 100)"
        }
      },
      "policies": {
        "Public read global templates": {
          "name": "Public read global templates",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "public"
          ],
          "using": "((tenant_id IS NULL) AND (is_active = true) AND (deleted_at IS NULL))"
        },
        "Service role full access templates": {
          "name": "Service role full access templates",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "service_role"
          ]
        },
        "Staff manage tenant templates": {
          "name": "Staff manage tenant templates",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "authenticated"
          ]
        },
        "Staff read tenant templates": {
          "name": "Staff read tenant templates",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ]
        }
      },
      "isRLSEnabled": true
    },
    "public.vaccines": {
      "name": "vaccines",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "pet_id": {
          "name": "pet_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "administered_by_clinic": {
          "name": "administered_by_clinic",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "template_id": {
          "name": "template_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "administered_by": {
          "name": "administered_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "batch_number": {
          "name": "batch_number",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "manufacturer": {
          "name": "manufacturer",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "route": {
          "name": "route",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "dosage": {
          "name": "dosage",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "lot_expiry": {
          "name": "lot_expiry",
          "type": "date",
          "primaryKey": false,
          "notNull": false
        },
        "administered_date": {
          "name": "administered_date",
          "type": "date",
          "primaryKey": false,
          "notNull": true
        },
        "next_due_date": {
          "name": "next_due_date",
          "type": "date",
          "primaryKey": false,
          "notNull": false
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'completed'"
        },
        "vet_signature": {
          "name": "vet_signature",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "certificate_url": {
          "name": "certificate_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "adverse_reactions": {
          "name": "adverse_reactions",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "photos": {
          "name": "photos",
          "type": "text[]",
          "primaryKey": false,
          "notNull": false,
          "default": "'{\"RAY\"}'"
        },
        "notes": {
          "name": "notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "deleted_at": {
          "name": "deleted_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "deleted_by": {
          "name": "deleted_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_vaccines_administered_by": {
          "name": "idx_vaccines_administered_by",
          "columns": [
            {
              "expression": "administered_by",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_vaccines_administered_by_clinic": {
          "name": "idx_vaccines_administered_by_clinic",
          "columns": [
            {
              "expression": "administered_by_clinic",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_vaccines_pet": {
          "name": "idx_vaccines_pet",
          "columns": [
            {
              "expression": "pet_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_vaccines_pet_history": {
          "name": "idx_vaccines_pet_history",
          "columns": [
            {
              "expression": "pet_id",
              "asc": true,
              "nulls": "last",
              "opclass": "date_ops",
              "isExpression": false
            },
            {
              "expression": "administered_date",
              "asc": false,
              "nulls": "first",
              "opclass": "uuid_ops",
              "isExpression": false
            },
            {
              "expression": "name",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            },
            {
              "expression": "status",
              "asc": true,
              "nulls": "last",
              "opclass": "date_ops",
              "isExpression": false
            },
            {
              "expression": "next_due_date",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            },
            {
              "expression": "administered_by",
              "asc": true,
              "nulls": "last",
              "opclass": "date_ops",
              "isExpression": false
            },
            {
              "expression": "batch_number",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "where": "(deleted_at IS NULL)",
          "with": {}
        },
        "idx_vaccines_template": {
          "name": "idx_vaccines_template",
          "columns": [
            {
              "expression": "template_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "vaccines_administered_by_clinic_fkey": {
          "name": "vaccines_administered_by_clinic_fkey",
          "tableFrom": "vaccines",
          "tableTo": "tenants",
          "schemaTo": "public",
          "columnsFrom": [
            "administered_by_clinic"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "vaccines_administered_by_fkey": {
          "name": "vaccines_administered_by_fkey",
          "tableFrom": "vaccines",
          "tableTo": "profiles",
          "schemaTo": "public",
          "columnsFrom": [
            "administered_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "vaccines_deleted_by_fkey": {
          "name": "vaccines_deleted_by_fkey",
          "tableFrom": "vaccines",
          "tableTo": "profiles",
          "schemaTo": "public",
          "columnsFrom": [
            "deleted_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "vaccines_pet_id_fkey": {
          "name": "vaccines_pet_id_fkey",
          "tableFrom": "vaccines",
          "tableTo": "pets",
          "schemaTo": "public",
          "columnsFrom": [
            "pet_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "vaccines_template_id_fkey": {
          "name": "vaccines_template_id_fkey",
          "tableFrom": "vaccines",
          "tableTo": "vaccine_templates",
          "schemaTo": "public",
          "columnsFrom": [
            "template_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {
        "vaccines_date_order": {
          "name": "vaccines_date_order",
          "value": "(next_due_date IS NULL) OR (next_due_date > administered_date)"
        },
        "vaccines_name_length": {
          "name": "vaccines_name_length",
          "value": "(char_length(name) >= 2) AND (char_length(name) <= 100)"
        },
        "vaccines_route_check": {
          "name": "vaccines_route_check",
          "value": "route = ANY (ARRAY['oral'::text, 'PO'::text, 'IV'::text, 'IM'::text, 'SC'::text, 'SQ'::text, 'topical'::text, 'inhaled'::text, 'rectal'::text, 'ophthalmic'::text, 'otic'::text])"
        },
        "vaccines_status_check": {
          "name": "vaccines_status_check",
          "value": "status = ANY (ARRAY['scheduled'::text, 'completed'::text, 'missed'::text, 'cancelled'::text])"
        }
      },
      "policies": {
        "Owners view pet vaccines": {
          "name": "Owners view pet vaccines",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "(is_owner_of_pet(pet_id) AND (deleted_at IS NULL))"
        },
        "Service role full access vaccines": {
          "name": "Service role full access vaccines",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "service_role"
          ]
        }
      },
      "isRLSEnabled": true
    },
    "public.vaccine_reactions": {
      "name": "vaccine_reactions",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "pet_id": {
          "name": "pet_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "vaccine_id": {
          "name": "vaccine_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "vaccine_name": {
          "name": "vaccine_name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "vaccine_brand": {
          "name": "vaccine_brand",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "reaction_date": {
          "name": "reaction_date",
          "type": "date",
          "primaryKey": false,
          "notNull": true,
          "default": "CURRENT_DATE"
        },
        "onset_hours": {
          "name": "onset_hours",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "severity": {
          "name": "severity",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'low'"
        },
        "reaction_type": {
          "name": "reaction_type",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "symptoms": {
          "name": "symptoms",
          "type": "text[]",
          "primaryKey": false,
          "notNull": false
        },
        "treatment": {
          "name": "treatment",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "outcome": {
          "name": "outcome",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "hospitalization_required": {
          "name": "hospitalization_required",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "recovery_days": {
          "name": "recovery_days",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "notes": {
          "name": "notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "reported_by": {
          "name": "reported_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_vaccine_reactions_pet": {
          "name": "idx_vaccine_reactions_pet",
          "columns": [
            {
              "expression": "pet_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_vaccine_reactions_severity": {
          "name": "idx_vaccine_reactions_severity",
          "columns": [
            {
              "expression": "severity",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "where": "(severity = ANY (ARRAY['high'::text, 'critical'::text]))",
          "with": {}
        },
        "idx_vaccine_reactions_vaccine": {
          "name": "idx_vaccine_reactions_vaccine",
          "columns": [
            {
              "expression": "vaccine_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "vaccine_reactions_pet_id_fkey": {
          "name": "vaccine_reactions_pet_id_fkey",
          "tableFrom": "vaccine_reactions",
          "tableTo": "pets",
          "schemaTo": "public",
          "columnsFrom": [
            "pet_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "vaccine_reactions_reported_by_fkey": {
          "name": "vaccine_reactions_reported_by_fkey",
          "tableFrom": "vaccine_reactions",
          "tableTo": "profiles",
          "schemaTo": "public",
          "columnsFrom": [
            "reported_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "vaccine_reactions_vaccine_id_fkey": {
          "name": "vaccine_reactions_vaccine_id_fkey",
          "tableFrom": "vaccine_reactions",
          "tableTo": "vaccines",
          "schemaTo": "public",
          "columnsFrom": [
            "vaccine_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {
        "vaccine_reactions_reaction_type_check": {
          "name": "vaccine_reactions_reaction_type_check",
          "value": "reaction_type = ANY (ARRAY['local'::text, 'systemic'::text, 'allergic'::text, 'anaphylactic'::text, 'other'::text])"
        },
        "vaccine_reactions_severity_check": {
          "name": "vaccine_reactions_severity_check",
          "value": "severity = ANY (ARRAY['low'::text, 'medium'::text, 'high'::text, 'critical'::text])"
        }
      },
      "policies": {
        "Owners view pet reactions": {
          "name": "Owners view pet reactions",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "is_owner_of_pet(pet_id)"
        },
        "Service role full access reactions": {
          "name": "Service role full access reactions",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "service_role"
          ]
        }
      },
      "isRLSEnabled": true
    },
    "public.document_sequences": {
      "name": "document_sequences",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "tenant_id": {
          "name": "tenant_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "document_type": {
          "name": "document_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "year": {
          "name": "year",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "current_sequence": {
          "name": "current_sequence",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "prefix": {
          "name": "prefix",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_document_sequences_lookup": {
          "name": "idx_document_sequences_lookup",
          "columns": [
            {
              "expression": "tenant_id",
              "asc": true,
              "nulls": "last",
              "opclass": "int4_ops",
              "isExpression": false
            },
            {
              "expression": "document_type",
              "asc": true,
              "nulls": "last",
              "opclass": "int4_ops",
              "isExpression": false
            },
            {
              "expression": "year",
              "asc": true,
              "nulls": "last",
              "opclass": "int4_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "document_sequences_tenant_id_document_type_year_key": {
          "columns": [
            "tenant_id",
            "document_type",
            "year"
          ],
          "nullsNotDistinct": false,
          "name": "document_sequences_tenant_id_document_type_year_key"
        }
      },
      "checkConstraints": {},
      "policies": {
        "Admin manage sequences": {
          "name": "Admin manage sequences",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "authenticated"
          ],
          "using": "(EXISTS ( SELECT 1\n   FROM profiles p\n  WHERE ((p.id = auth.uid()) AND (p.tenant_id = document_sequences.tenant_id) AND (p.role = 'admin'::text) AND (p.deleted_at IS NULL))))"
        },
        "Service role full access sequences": {
          "name": "Service role full access sequences",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "service_role"
          ]
        }
      },
      "isRLSEnabled": true
    },
    "public.insurance_preauth": {
      "name": "insurance_preauth",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "tenant_id": {
          "name": "tenant_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "policy_id": {
          "name": "policy_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "pet_id": {
          "name": "pet_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "request_number": {
          "name": "request_number",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "procedure_description": {
          "name": "procedure_description",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "estimated_cost": {
          "name": "estimated_cost",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'pending'"
        },
        "approved_amount": {
          "name": "approved_amount",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "valid_until": {
          "name": "valid_until",
          "type": "date",
          "primaryKey": false,
          "notNull": false
        },
        "authorization_code": {
          "name": "authorization_code",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "denial_reason": {
          "name": "denial_reason",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "submitted_at": {
          "name": "submitted_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "responded_at": {
          "name": "responded_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "submitted_by": {
          "name": "submitted_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "notes": {
          "name": "notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_insurance_preauth_policy": {
          "name": "idx_insurance_preauth_policy",
          "columns": [
            {
              "expression": "policy_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_insurance_preauth_status": {
          "name": "idx_insurance_preauth_status",
          "columns": [
            {
              "expression": "status",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_insurance_preauth_tenant": {
          "name": "idx_insurance_preauth_tenant",
          "columns": [
            {
              "expression": "tenant_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {
        "insurance_preauth_status_check": {
          "name": "insurance_preauth_status_check",
          "value": "status = ANY (ARRAY['pending'::text, 'submitted'::text, 'approved'::text, 'denied'::text, 'expired'::text])"
        }
      },
      "policies": {
        "Service role full access preauth": {
          "name": "Service role full access preauth",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "service_role"
          ],
          "using": "true"
        },
        "Staff manage preauth": {
          "name": "Staff manage preauth",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "authenticated"
          ]
        }
      },
      "isRLSEnabled": true
    },
    "public.products": {
      "name": "products",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "tenant_id": {
          "name": "tenant_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "category": {
          "name": "category",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "price": {
          "name": "price",
          "type": "numeric(10, 2)",
          "primaryKey": false,
          "notNull": true,
          "default": "'0'"
        },
        "stock": {
          "name": "stock",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "image_url": {
          "name": "image_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {},
      "policies": {},
      "isRLSEnabled": true
    },
    "public.vaccine_protocols": {
      "name": "vaccine_protocols",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "vaccine_name": {
          "name": "vaccine_name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "vaccine_code": {
          "name": "vaccine_code",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "species": {
          "name": "species",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "type": {
          "name": "type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "diseases_prevented": {
          "name": "diseases_prevented",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "first_dose_weeks": {
          "name": "first_dose_weeks",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "booster_intervals_months": {
          "name": "booster_intervals_months",
          "type": "integer[]",
          "primaryKey": false,
          "notNull": false
        },
        "duration_years": {
          "name": "duration_years",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "manufacturer": {
          "name": "manufacturer",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "notes": {
          "name": "notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "deleted_at": {
          "name": "deleted_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "deleted_by": {
          "name": "deleted_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "vaccine_protocols_vaccine_code_key": {
          "columns": [
            "vaccine_code"
          ],
          "nullsNotDistinct": false,
          "name": "vaccine_protocols_vaccine_code_key"
        }
      },
      "checkConstraints": {
        "vaccine_protocols_species_check": {
          "name": "vaccine_protocols_species_check",
          "value": "species = ANY (ARRAY['dog'::text, 'cat'::text, 'all'::text])"
        },
        "vaccine_protocols_type_check": {
          "name": "vaccine_protocols_type_check",
          "value": "type = ANY (ARRAY['core'::text, 'non-core'::text, 'lifestyle'::text])"
        }
      },
      "policies": {},
      "isRLSEnabled": false
    },
    "public.pet_qr_codes": {
      "name": "pet_qr_codes",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "pet_id": {
          "name": "pet_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "qr_code_url": {
          "name": "qr_code_url",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "qr_data": {
          "name": "qr_data",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {},
      "policies": {},
      "isRLSEnabled": true
    },
    "public.clinic_pets": {
      "name": "clinic_pets",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "pet_id": {
          "name": "pet_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "tenant_id": {
          "name": "tenant_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "first_visit_date": {
          "name": "first_visit_date",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "last_visit_date": {
          "name": "last_visit_date",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "visit_count": {
          "name": "visit_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": true
        },
        "notes": {
          "name": "notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_by": {
          "name": "created_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_clinic_pets_active": {
          "name": "idx_clinic_pets_active",
          "columns": [
            {
              "expression": "tenant_id",
              "asc": true,
              "nulls": "last",
              "opclass": "bool_ops",
              "isExpression": false
            },
            {
              "expression": "is_active",
              "asc": true,
              "nulls": "last",
              "opclass": "bool_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "where": "(is_active = true)",
          "with": {}
        },
        "idx_clinic_pets_pet": {
          "name": "idx_clinic_pets_pet",
          "columns": [
            {
              "expression": "pet_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_clinic_pets_tenant": {
          "name": "idx_clinic_pets_tenant",
          "columns": [
            {
              "expression": "tenant_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "clinic_pets_pet_id_tenant_id_key": {
          "columns": [
            "pet_id",
            "tenant_id"
          ],
          "nullsNotDistinct": false,
          "name": "clinic_pets_pet_id_tenant_id_key"
        }
      },
      "checkConstraints": {},
      "policies": {
        "Clinic staff manage clinic_pets": {
          "name": "Clinic staff manage clinic_pets",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "authenticated"
          ],
          "withCheck": "(EXISTS ( SELECT 1\n   FROM profiles p\n  WHERE ((p.id = auth.uid()) AND (p.tenant_id = clinic_pets.tenant_id) AND (p.role = ANY (ARRAY['vet'::text, 'admin'::text])) AND (p.deleted_at IS NULL))))",
          "using": "(EXISTS ( SELECT 1\n   FROM profiles p\n  WHERE ((p.id = auth.uid()) AND (p.tenant_id = clinic_pets.tenant_id) AND (p.role = ANY (ARRAY['vet'::text, 'admin'::text])) AND (p.deleted_at IS NULL))))"
        },
        "Owners view their pets clinic relationships": {
          "name": "Owners view their pets clinic relationships",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ]
        },
        "Service role full access clinic_pets": {
          "name": "Service role full access clinic_pets",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "service_role"
          ]
        }
      },
      "isRLSEnabled": true
    },
    "public.diagnosis_codes": {
      "name": "diagnosis_codes",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "code": {
          "name": "code",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "term": {
          "name": "term",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "standard": {
          "name": "standard",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "default": "'custom'"
        },
        "category": {
          "name": "category",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "species": {
          "name": "species",
          "type": "text[]",
          "primaryKey": false,
          "notNull": false,
          "default": "'{\"RAY['all'::tex\"}'"
        },
        "severity": {
          "name": "severity",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "deleted_at": {
          "name": "deleted_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "deleted_by": {
          "name": "deleted_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_diagnosis_codes_active": {
          "name": "idx_diagnosis_codes_active",
          "columns": [
            {
              "expression": "id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "where": "(deleted_at IS NULL)",
          "with": {}
        },
        "idx_diagnosis_codes_category": {
          "name": "idx_diagnosis_codes_category",
          "columns": [
            {
              "expression": "category",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_diagnosis_codes_code": {
          "name": "idx_diagnosis_codes_code",
          "columns": [
            {
              "expression": "code",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_diagnosis_codes_species": {
          "name": "idx_diagnosis_codes_species",
          "columns": [
            {
              "expression": "species",
              "asc": true,
              "nulls": "last",
              "opclass": "array_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "gin",
          "with": {}
        },
        "idx_diagnosis_codes_standard": {
          "name": "idx_diagnosis_codes_standard",
          "columns": [
            {
              "expression": "standard",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_diagnosis_codes_term_search": {
          "name": "idx_diagnosis_codes_term_search",
          "columns": [
            {
              "expression": "term",
              "asc": true,
              "nulls": "last",
              "opclass": "gin_trgm_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "gin",
          "with": {}
        }
      },
      "foreignKeys": {
        "diagnosis_codes_deleted_by_fkey": {
          "name": "diagnosis_codes_deleted_by_fkey",
          "tableFrom": "diagnosis_codes",
          "tableTo": "profiles",
          "schemaTo": "public",
          "columnsFrom": [
            "deleted_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "diagnosis_codes_code_key": {
          "columns": [
            "code"
          ],
          "nullsNotDistinct": false,
          "name": "diagnosis_codes_code_key"
        }
      },
      "checkConstraints": {
        "diagnosis_codes_code_length": {
          "name": "diagnosis_codes_code_length",
          "value": "char_length(code) >= 2"
        },
        "diagnosis_codes_severity_check": {
          "name": "diagnosis_codes_severity_check",
          "value": "severity = ANY (ARRAY['mild'::text, 'moderate'::text, 'severe'::text, 'critical'::text])"
        },
        "diagnosis_codes_standard_check": {
          "name": "diagnosis_codes_standard_check",
          "value": "standard = ANY (ARRAY['venom'::text, 'snomed'::text, 'custom'::text])"
        },
        "diagnosis_codes_term_length": {
          "name": "diagnosis_codes_term_length",
          "value": "char_length(term) >= 2"
        }
      },
      "policies": {
        "Public read diagnosis codes": {
          "name": "Public read diagnosis codes",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "public"
          ],
          "using": "(deleted_at IS NULL)"
        },
        "Service role manage diagnosis codes": {
          "name": "Service role manage diagnosis codes",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "service_role"
          ]
        }
      },
      "isRLSEnabled": true
    },
    "public.drug_dosages": {
      "name": "drug_dosages",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "generic_name": {
          "name": "generic_name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "species": {
          "name": "species",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "default": "'all'"
        },
        "category": {
          "name": "category",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "min_dose_mg_kg": {
          "name": "min_dose_mg_kg",
          "type": "numeric(10, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "max_dose_mg_kg": {
          "name": "max_dose_mg_kg",
          "type": "numeric(10, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "concentration_mg_ml": {
          "name": "concentration_mg_ml",
          "type": "numeric(10, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "route": {
          "name": "route",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "frequency": {
          "name": "frequency",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "max_daily_dose_mg_kg": {
          "name": "max_daily_dose_mg_kg",
          "type": "numeric(10, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "contraindications": {
          "name": "contraindications",
          "type": "text[]",
          "primaryKey": false,
          "notNull": false
        },
        "side_effects": {
          "name": "side_effects",
          "type": "text[]",
          "primaryKey": false,
          "notNull": false
        },
        "notes": {
          "name": "notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "requires_prescription": {
          "name": "requires_prescription",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": true
        },
        "deleted_at": {
          "name": "deleted_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "deleted_by": {
          "name": "deleted_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_drug_dosages_active": {
          "name": "idx_drug_dosages_active",
          "columns": [
            {
              "expression": "id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "where": "(deleted_at IS NULL)",
          "with": {}
        },
        "idx_drug_dosages_name": {
          "name": "idx_drug_dosages_name",
          "columns": [
            {
              "expression": "name",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_drug_dosages_name_search": {
          "name": "idx_drug_dosages_name_search",
          "columns": [
            {
              "expression": "name",
              "asc": true,
              "nulls": "last",
              "opclass": "gin_trgm_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "gin",
          "with": {}
        },
        "idx_drug_dosages_route": {
          "name": "idx_drug_dosages_route",
          "columns": [
            {
              "expression": "route",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_drug_dosages_species": {
          "name": "idx_drug_dosages_species",
          "columns": [
            {
              "expression": "species",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "drug_dosages_deleted_by_fkey": {
          "name": "drug_dosages_deleted_by_fkey",
          "tableFrom": "drug_dosages",
          "tableTo": "profiles",
          "schemaTo": "public",
          "columnsFrom": [
            "deleted_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "drug_dosages_name_species_key": {
          "columns": [
            "name",
            "species"
          ],
          "nullsNotDistinct": false,
          "name": "drug_dosages_name_species_key"
        }
      },
      "checkConstraints": {
        "drug_dosages_category_check": {
          "name": "drug_dosages_category_check",
          "value": "category = ANY (ARRAY['antibiotic'::text, 'analgesic'::text, 'nsaid'::text, 'corticosteroid'::text, 'antiemetic'::text, 'cardiac'::text, 'antifungal'::text, 'antiparasitic'::text, 'sedative'::text, 'steroid'::text, 'heartworm'::text, 'vaccine'::text, 'other'::text])"
        },
        "drug_dosages_concentration_mg_ml_check": {
          "name": "drug_dosages_concentration_mg_ml_check",
          "value": "(concentration_mg_ml IS NULL) OR (concentration_mg_ml > (0)::numeric)"
        },
        "drug_dosages_dose_order": {
          "name": "drug_dosages_dose_order",
          "value": "(min_dose_mg_kg IS NULL) OR (max_dose_mg_kg IS NULL) OR (max_dose_mg_kg >= min_dose_mg_kg)"
        },
        "drug_dosages_max_daily_dose_mg_kg_check": {
          "name": "drug_dosages_max_daily_dose_mg_kg_check",
          "value": "(max_daily_dose_mg_kg IS NULL) OR (max_daily_dose_mg_kg >= (0)::numeric)"
        },
        "drug_dosages_max_dose_mg_kg_check": {
          "name": "drug_dosages_max_dose_mg_kg_check",
          "value": "(max_dose_mg_kg IS NULL) OR (max_dose_mg_kg >= (0)::numeric)"
        },
        "drug_dosages_min_dose_mg_kg_check": {
          "name": "drug_dosages_min_dose_mg_kg_check",
          "value": "(min_dose_mg_kg IS NULL) OR (min_dose_mg_kg >= (0)::numeric)"
        },
        "drug_dosages_name_length": {
          "name": "drug_dosages_name_length",
          "value": "char_length(name) >= 2"
        },
        "drug_dosages_route_check": {
          "name": "drug_dosages_route_check",
          "value": "(route IS NULL) OR (route = ANY (ARRAY['oral'::text, 'PO'::text, 'IV'::text, 'IM'::text, 'SC'::text, 'SQ'::text, 'topical'::text, 'inhaled'::text, 'rectal'::text, 'ophthalmic'::text, 'otic'::text]))"
        },
        "drug_dosages_species_check": {
          "name": "drug_dosages_species_check",
          "value": "species = ANY (ARRAY['dog'::text, 'cat'::text, 'bird'::text, 'rabbit'::text, 'all'::text])"
        }
      },
      "policies": {
        "Public read drug dosages": {
          "name": "Public read drug dosages",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "public"
          ],
          "using": "(deleted_at IS NULL)"
        },
        "Service role manage drug dosages": {
          "name": "Service role manage drug dosages",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "service_role"
          ]
        }
      },
      "isRLSEnabled": true
    },
    "public.growth_standards": {
      "name": "growth_standards",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "species": {
          "name": "species",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'dog'"
        },
        "breed": {
          "name": "breed",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "breed_category": {
          "name": "breed_category",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "gender": {
          "name": "gender",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "age_weeks": {
          "name": "age_weeks",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "weight_kg": {
          "name": "weight_kg",
          "type": "numeric(10, 2)",
          "primaryKey": false,
          "notNull": true
        },
        "percentile": {
          "name": "percentile",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "default": "'P50'"
        },
        "deleted_at": {
          "name": "deleted_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "deleted_by": {
          "name": "deleted_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_growth_standards_active": {
          "name": "idx_growth_standards_active",
          "columns": [
            {
              "expression": "id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "where": "(deleted_at IS NULL)",
          "with": {}
        },
        "idx_growth_standards_breed": {
          "name": "idx_growth_standards_breed",
          "columns": [
            {
              "expression": "breed",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_growth_standards_lookup": {
          "name": "idx_growth_standards_lookup",
          "columns": [
            {
              "expression": "species",
              "asc": true,
              "nulls": "last",
              "opclass": "int4_ops",
              "isExpression": false
            },
            {
              "expression": "breed",
              "asc": true,
              "nulls": "last",
              "opclass": "int4_ops",
              "isExpression": false
            },
            {
              "expression": "gender",
              "asc": true,
              "nulls": "last",
              "opclass": "int4_ops",
              "isExpression": false
            },
            {
              "expression": "age_weeks",
              "asc": true,
              "nulls": "last",
              "opclass": "int4_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_growth_standards_species": {
          "name": "idx_growth_standards_species",
          "columns": [
            {
              "expression": "species",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "growth_standards_deleted_by_fkey": {
          "name": "growth_standards_deleted_by_fkey",
          "tableFrom": "growth_standards",
          "tableTo": "profiles",
          "schemaTo": "public",
          "columnsFrom": [
            "deleted_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "growth_standards_species_breed_gender_age_weeks_percentile_key": {
          "columns": [
            "species",
            "breed",
            "gender",
            "age_weeks",
            "percentile"
          ],
          "nullsNotDistinct": false,
          "name": "growth_standards_species_breed_gender_age_weeks_percentile_key"
        }
      },
      "checkConstraints": {
        "growth_standards_age_weeks_check": {
          "name": "growth_standards_age_weeks_check",
          "value": "age_weeks >= 0"
        },
        "growth_standards_gender_check": {
          "name": "growth_standards_gender_check",
          "value": "gender = ANY (ARRAY['male'::text, 'female'::text])"
        },
        "growth_standards_percentile_check": {
          "name": "growth_standards_percentile_check",
          "value": "percentile = ANY (ARRAY['P3'::text, 'P10'::text, 'P25'::text, 'P50'::text, 'P75'::text, 'P90'::text, 'P97'::text])"
        },
        "growth_standards_species_check": {
          "name": "growth_standards_species_check",
          "value": "species = ANY (ARRAY['dog'::text, 'cat'::text])"
        },
        "growth_standards_weight_kg_check": {
          "name": "growth_standards_weight_kg_check",
          "value": "weight_kg > (0)::numeric"
        }
      },
      "policies": {
        "Public read growth standards": {
          "name": "Public read growth standards",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "public"
          ],
          "using": "(deleted_at IS NULL)"
        },
        "Service role manage growth standards": {
          "name": "Service role manage growth standards",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "service_role"
          ]
        }
      },
      "isRLSEnabled": true
    },
    "public.reproductive_cycles": {
      "name": "reproductive_cycles",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "pet_id": {
          "name": "pet_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "tenant_id": {
          "name": "tenant_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "cycle_type": {
          "name": "cycle_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'heat'"
        },
        "cycle_start": {
          "name": "cycle_start",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true
        },
        "cycle_end": {
          "name": "cycle_end",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "mating_date": {
          "name": "mating_date",
          "type": "date",
          "primaryKey": false,
          "notNull": false
        },
        "expected_due_date": {
          "name": "expected_due_date",
          "type": "date",
          "primaryKey": false,
          "notNull": false
        },
        "actual_birth_date": {
          "name": "actual_birth_date",
          "type": "date",
          "primaryKey": false,
          "notNull": false
        },
        "litter_size": {
          "name": "litter_size",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "notes": {
          "name": "notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "recorded_by": {
          "name": "recorded_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "deleted_at": {
          "name": "deleted_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "deleted_by": {
          "name": "deleted_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_reproductive_cycles_dates": {
          "name": "idx_reproductive_cycles_dates",
          "columns": [
            {
              "expression": "cycle_start",
              "asc": true,
              "nulls": "last",
              "opclass": "timestamptz_ops",
              "isExpression": false
            },
            {
              "expression": "cycle_end",
              "asc": true,
              "nulls": "last",
              "opclass": "timestamptz_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_reproductive_cycles_pet": {
          "name": "idx_reproductive_cycles_pet",
          "columns": [
            {
              "expression": "pet_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_reproductive_cycles_recorded_by": {
          "name": "idx_reproductive_cycles_recorded_by",
          "columns": [
            {
              "expression": "recorded_by",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_reproductive_cycles_tenant": {
          "name": "idx_reproductive_cycles_tenant",
          "columns": [
            {
              "expression": "tenant_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_reproductive_cycles_type": {
          "name": "idx_reproductive_cycles_type",
          "columns": [
            {
              "expression": "cycle_type",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "reproductive_cycles_deleted_by_fkey": {
          "name": "reproductive_cycles_deleted_by_fkey",
          "tableFrom": "reproductive_cycles",
          "tableTo": "profiles",
          "schemaTo": "public",
          "columnsFrom": [
            "deleted_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "reproductive_cycles_pet_id_fkey": {
          "name": "reproductive_cycles_pet_id_fkey",
          "tableFrom": "reproductive_cycles",
          "tableTo": "pets",
          "schemaTo": "public",
          "columnsFrom": [
            "pet_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "reproductive_cycles_recorded_by_fkey": {
          "name": "reproductive_cycles_recorded_by_fkey",
          "tableFrom": "reproductive_cycles",
          "tableTo": "profiles",
          "schemaTo": "public",
          "columnsFrom": [
            "recorded_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "reproductive_cycles_tenant_id_fkey": {
          "name": "reproductive_cycles_tenant_id_fkey",
          "tableFrom": "reproductive_cycles",
          "tableTo": "tenants",
          "schemaTo": "public",
          "columnsFrom": [
            "tenant_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {
        "reproductive_cycles_cycle_type_check": {
          "name": "reproductive_cycles_cycle_type_check",
          "value": "cycle_type = ANY (ARRAY['heat'::text, 'pregnancy'::text, 'lactation'::text, 'anestrus'::text])"
        },
        "reproductive_cycles_dates": {
          "name": "reproductive_cycles_dates",
          "value": "(cycle_end IS NULL) OR (cycle_end >= cycle_start)"
        },
        "reproductive_cycles_litter_size_check": {
          "name": "reproductive_cycles_litter_size_check",
          "value": "(litter_size IS NULL) OR (litter_size >= 0)"
        }
      },
      "policies": {
        "Owners view pet cycles": {
          "name": "Owners view pet cycles",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "(is_owner_of_pet(pet_id) AND (deleted_at IS NULL))"
        },
        "Service role full access cycles": {
          "name": "Service role full access cycles",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "service_role"
          ]
        },
        "Staff manage reproductive cycles": {
          "name": "Staff manage reproductive cycles",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "authenticated"
          ]
        }
      },
      "isRLSEnabled": true
    },
    "public.euthanasia_assessments": {
      "name": "euthanasia_assessments",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "pet_id": {
          "name": "pet_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "tenant_id": {
          "name": "tenant_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "hurt_score": {
          "name": "hurt_score",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "hunger_score": {
          "name": "hunger_score",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "hydration_score": {
          "name": "hydration_score",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "hygiene_score": {
          "name": "hygiene_score",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "happiness_score": {
          "name": "happiness_score",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "mobility_score": {
          "name": "mobility_score",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "more_good_days_score": {
          "name": "more_good_days_score",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "total_score": {
          "name": "total_score",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "notes": {
          "name": "notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "recommendations": {
          "name": "recommendations",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "assessed_by": {
          "name": "assessed_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "assessed_at": {
          "name": "assessed_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "deleted_at": {
          "name": "deleted_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "deleted_by": {
          "name": "deleted_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_euthanasia_assessments_assessed_by": {
          "name": "idx_euthanasia_assessments_assessed_by",
          "columns": [
            {
              "expression": "assessed_by",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_euthanasia_assessments_date": {
          "name": "idx_euthanasia_assessments_date",
          "columns": [
            {
              "expression": "assessed_at",
              "asc": false,
              "nulls": "first",
              "opclass": "timestamptz_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_euthanasia_assessments_pet": {
          "name": "idx_euthanasia_assessments_pet",
          "columns": [
            {
              "expression": "pet_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_euthanasia_assessments_tenant": {
          "name": "idx_euthanasia_assessments_tenant",
          "columns": [
            {
              "expression": "tenant_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "euthanasia_assessments_assessed_by_fkey": {
          "name": "euthanasia_assessments_assessed_by_fkey",
          "tableFrom": "euthanasia_assessments",
          "tableTo": "profiles",
          "schemaTo": "public",
          "columnsFrom": [
            "assessed_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "euthanasia_assessments_deleted_by_fkey": {
          "name": "euthanasia_assessments_deleted_by_fkey",
          "tableFrom": "euthanasia_assessments",
          "tableTo": "profiles",
          "schemaTo": "public",
          "columnsFrom": [
            "deleted_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "euthanasia_assessments_pet_id_fkey": {
          "name": "euthanasia_assessments_pet_id_fkey",
          "tableFrom": "euthanasia_assessments",
          "tableTo": "pets",
          "schemaTo": "public",
          "columnsFrom": [
            "pet_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "euthanasia_assessments_tenant_id_fkey": {
          "name": "euthanasia_assessments_tenant_id_fkey",
          "tableFrom": "euthanasia_assessments",
          "tableTo": "tenants",
          "schemaTo": "public",
          "columnsFrom": [
            "tenant_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {
        "euthanasia_assessments_happiness_score_check": {
          "name": "euthanasia_assessments_happiness_score_check",
          "value": "(happiness_score >= 0) AND (happiness_score <= 10)"
        },
        "euthanasia_assessments_hunger_score_check": {
          "name": "euthanasia_assessments_hunger_score_check",
          "value": "(hunger_score >= 0) AND (hunger_score <= 10)"
        },
        "euthanasia_assessments_hurt_score_check": {
          "name": "euthanasia_assessments_hurt_score_check",
          "value": "(hurt_score >= 0) AND (hurt_score <= 10)"
        },
        "euthanasia_assessments_hydration_score_check": {
          "name": "euthanasia_assessments_hydration_score_check",
          "value": "(hydration_score >= 0) AND (hydration_score <= 10)"
        },
        "euthanasia_assessments_hygiene_score_check": {
          "name": "euthanasia_assessments_hygiene_score_check",
          "value": "(hygiene_score >= 0) AND (hygiene_score <= 10)"
        },
        "euthanasia_assessments_mobility_score_check": {
          "name": "euthanasia_assessments_mobility_score_check",
          "value": "(mobility_score >= 0) AND (mobility_score <= 10)"
        },
        "euthanasia_assessments_more_good_days_score_check": {
          "name": "euthanasia_assessments_more_good_days_score_check",
          "value": "(more_good_days_score >= 0) AND (more_good_days_score <= 10)"
        },
        "euthanasia_assessments_total_score_check": {
          "name": "euthanasia_assessments_total_score_check",
          "value": "(total_score >= 0) AND (total_score <= 70)"
        }
      },
      "policies": {
        "Owners view pet assessments": {
          "name": "Owners view pet assessments",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "(is_owner_of_pet(pet_id) AND (deleted_at IS NULL))"
        },
        "Service role full access assessments": {
          "name": "Service role full access assessments",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "service_role"
          ]
        },
        "Staff manage assessments": {
          "name": "Staff manage assessments",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "authenticated"
          ]
        }
      },
      "isRLSEnabled": true
    },
    "public.consent_templates": {
      "name": "consent_templates",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "tenant_id": {
          "name": "tenant_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "code": {
          "name": "code",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "category": {
          "name": "category",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "title": {
          "name": "title",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "content_html": {
          "name": "content_html",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "requires_witness": {
          "name": "requires_witness",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "validity_days": {
          "name": "validity_days",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "version": {
          "name": "version",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "default": "'1.0'"
        },
        "created_by": {
          "name": "created_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "updated_by": {
          "name": "updated_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "deleted_at": {
          "name": "deleted_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "deleted_by": {
          "name": "deleted_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_consent_templates_category": {
          "name": "idx_consent_templates_category",
          "columns": [
            {
              "expression": "category",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_consent_templates_code": {
          "name": "idx_consent_templates_code",
          "columns": [
            {
              "expression": "code",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_consent_templates_tenant": {
          "name": "idx_consent_templates_tenant",
          "columns": [
            {
              "expression": "tenant_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "consent_templates_created_by_fkey": {
          "name": "consent_templates_created_by_fkey",
          "tableFrom": "consent_templates",
          "tableTo": "profiles",
          "schemaTo": "public",
          "columnsFrom": [
            "created_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "consent_templates_deleted_by_fkey": {
          "name": "consent_templates_deleted_by_fkey",
          "tableFrom": "consent_templates",
          "tableTo": "profiles",
          "schemaTo": "public",
          "columnsFrom": [
            "deleted_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "consent_templates_tenant_id_fkey": {
          "name": "consent_templates_tenant_id_fkey",
          "tableFrom": "consent_templates",
          "tableTo": "tenants",
          "schemaTo": "public",
          "columnsFrom": [
            "tenant_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "consent_templates_updated_by_fkey": {
          "name": "consent_templates_updated_by_fkey",
          "tableFrom": "consent_templates",
          "tableTo": "profiles",
          "schemaTo": "public",
          "columnsFrom": [
            "updated_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "consent_templates_tenant_code": {
          "columns": [
            "tenant_id",
            "code"
          ],
          "nullsNotDistinct": false,
          "name": "consent_templates_tenant_code"
        },
        "consent_templates_global_code": {
          "columns": [
            "code"
          ],
          "nullsNotDistinct": false,
          "name": "consent_templates_global_code"
        }
      },
      "checkConstraints": {
        "consent_templates_category_check": {
          "name": "consent_templates_category_check",
          "value": "category = ANY (ARRAY['surgical'::text, 'anesthetic'::text, 'diagnostic'::text, 'therapeutic'::text, 'vaccination'::text, 'euthanasia'::text, 'general'::text])"
        },
        "consent_templates_code_length": {
          "name": "consent_templates_code_length",
          "value": "(char_length(code) >= 2) AND (char_length(code) <= 50)"
        },
        "consent_templates_name_length": {
          "name": "consent_templates_name_length",
          "value": "(char_length(name) >= 2) AND (char_length(name) <= 200)"
        },
        "consent_templates_version_format": {
          "name": "consent_templates_version_format",
          "value": "version ~ '^\\d+\\.\\d+$'::text"
        }
      },
      "policies": {
        "Clinic templates managed by staff": {
          "name": "Clinic templates managed by staff",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "authenticated"
          ],
          "using": "((tenant_id IS NOT NULL) AND is_staff_of(tenant_id) AND (deleted_at IS NULL))"
        },
        "Global templates viewable by all": {
          "name": "Global templates viewable by all",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ]
        },
        "Service role full access consent_templates": {
          "name": "Service role full access consent_templates",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "service_role"
          ]
        }
      },
      "isRLSEnabled": false
    },
    "public.invoice_sequences": {
      "name": "invoice_sequences",
      "schema": "",
      "columns": {
        "tenant_id": {
          "name": "tenant_id",
          "type": "text",
          "primaryKey": true,
          "notNull": true
        },
        "prefix": {
          "name": "prefix",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "default": "'INV'"
        },
        "current_number": {
          "name": "current_number",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {},
      "policies": {},
      "isRLSEnabled": false
    },
    "public.medical_records": {
      "name": "medical_records",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "pet_id": {
          "name": "pet_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "tenant_id": {
          "name": "tenant_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "vet_id": {
          "name": "vet_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "record_type": {
          "name": "record_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "visit_date": {
          "name": "visit_date",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "chief_complaint": {
          "name": "chief_complaint",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "history": {
          "name": "history",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "physical_exam": {
          "name": "physical_exam",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "weight_kg": {
          "name": "weight_kg",
          "type": "numeric(6, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "temperature_celsius": {
          "name": "temperature_celsius",
          "type": "numeric(4, 1)",
          "primaryKey": false,
          "notNull": false
        },
        "heart_rate_bpm": {
          "name": "heart_rate_bpm",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "respiratory_rate_rpm": {
          "name": "respiratory_rate_rpm",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "blood_pressure": {
          "name": "blood_pressure",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "body_condition_score": {
          "name": "body_condition_score",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "diagnosis_code": {
          "name": "diagnosis_code",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "diagnosis_text": {
          "name": "diagnosis_text",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "assessment": {
          "name": "assessment",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "clinical_notes": {
          "name": "clinical_notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "treatment_plan": {
          "name": "treatment_plan",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "medications_prescribed": {
          "name": "medications_prescribed",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "followup_date": {
          "name": "followup_date",
          "type": "date",
          "primaryKey": false,
          "notNull": false
        },
        "follow_up_notes": {
          "name": "follow_up_notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "is_emergency": {
          "name": "is_emergency",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "requires_followup": {
          "name": "requires_followup",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "notes": {
          "name": "notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "attachments": {
          "name": "attachments",
          "type": "text[]",
          "primaryKey": false,
          "notNull": false,
          "default": "'{\"RAY\"}'"
        },
        "deleted_at": {
          "name": "deleted_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "deleted_by": {
          "name": "deleted_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_medical_records_active": {
          "name": "idx_medical_records_active",
          "columns": [
            {
              "expression": "tenant_id",
              "asc": true,
              "nulls": "last",
              "opclass": "timestamptz_ops",
              "isExpression": false
            },
            {
              "expression": "deleted_at",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "where": "(deleted_at IS NULL)",
          "with": {}
        },
        "idx_medical_records_date": {
          "name": "idx_medical_records_date",
          "columns": [
            {
              "expression": "visit_date",
              "asc": false,
              "nulls": "first",
              "opclass": "timestamptz_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_medical_records_diagnosis": {
          "name": "idx_medical_records_diagnosis",
          "columns": [
            {
              "expression": "diagnosis_code",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_medical_records_pet": {
          "name": "idx_medical_records_pet",
          "columns": [
            {
              "expression": "pet_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_medical_records_pet_history": {
          "name": "idx_medical_records_pet_history",
          "columns": [
            {
              "expression": "pet_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            },
            {
              "expression": "visit_date",
              "asc": false,
              "nulls": "first",
              "opclass": "timestamptz_ops",
              "isExpression": false
            },
            {
              "expression": "record_type",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            },
            {
              "expression": "diagnosis_text",
              "asc": true,
              "nulls": "last",
              "opclass": "timestamptz_ops",
              "isExpression": false
            },
            {
              "expression": "vet_id",
              "asc": true,
              "nulls": "last",
              "opclass": "timestamptz_ops",
              "isExpression": false
            },
            {
              "expression": "weight_kg",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "where": "(deleted_at IS NULL)",
          "with": {}
        },
        "idx_medical_records_tenant": {
          "name": "idx_medical_records_tenant",
          "columns": [
            {
              "expression": "tenant_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_medical_records_type": {
          "name": "idx_medical_records_type",
          "columns": [
            {
              "expression": "record_type",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_medical_records_vet": {
          "name": "idx_medical_records_vet",
          "columns": [
            {
              "expression": "vet_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "medical_records_deleted_by_fkey": {
          "name": "medical_records_deleted_by_fkey",
          "tableFrom": "medical_records",
          "tableTo": "profiles",
          "schemaTo": "public",
          "columnsFrom": [
            "deleted_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "medical_records_pet_id_fkey": {
          "name": "medical_records_pet_id_fkey",
          "tableFrom": "medical_records",
          "tableTo": "pets",
          "schemaTo": "public",
          "columnsFrom": [
            "pet_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "medical_records_tenant_id_fkey": {
          "name": "medical_records_tenant_id_fkey",
          "tableFrom": "medical_records",
          "tableTo": "tenants",
          "schemaTo": "public",
          "columnsFrom": [
            "tenant_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "medical_records_vet_id_fkey": {
          "name": "medical_records_vet_id_fkey",
          "tableFrom": "medical_records",
          "tableTo": "profiles",
          "schemaTo": "public",
          "columnsFrom": [
            "vet_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {
        "medical_records_body_condition_score_check": {
          "name": "medical_records_body_condition_score_check",
          "value": "(body_condition_score IS NULL) OR ((body_condition_score >= 1) AND (body_condition_score <= 9))"
        },
        "medical_records_heart_rate_bpm_check": {
          "name": "medical_records_heart_rate_bpm_check",
          "value": "(heart_rate_bpm IS NULL) OR ((heart_rate_bpm >= 20) AND (heart_rate_bpm <= 400))"
        },
        "medical_records_record_type_check": {
          "name": "medical_records_record_type_check",
          "value": "record_type = ANY (ARRAY['consultation'::text, 'surgery'::text, 'emergency'::text, 'vaccination'::text, 'checkup'::text, 'dental'::text, 'grooming'::text, 'lab_result'::text, 'imaging'::text, 'follow_up'::text, 'other'::text])"
        },
        "medical_records_respiratory_rate_rpm_check": {
          "name": "medical_records_respiratory_rate_rpm_check",
          "value": "(respiratory_rate_rpm IS NULL) OR ((respiratory_rate_rpm >= 5) AND (respiratory_rate_rpm <= 150))"
        },
        "medical_records_temperature_celsius_check": {
          "name": "medical_records_temperature_celsius_check",
          "value": "(temperature_celsius IS NULL) OR ((temperature_celsius >= (30)::numeric) AND (temperature_celsius <= (45)::numeric))"
        },
        "medical_records_visit_not_future": {
          "name": "medical_records_visit_not_future",
          "value": "visit_date <= (now() + '1 day'::interval)"
        },
        "medical_records_weight_kg_check": {
          "name": "medical_records_weight_kg_check",
          "value": "(weight_kg IS NULL) OR (weight_kg > (0)::numeric)"
        }
      },
      "policies": {
        "Owners view pet records": {
          "name": "Owners view pet records",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "(is_owner_of_pet(pet_id) AND (deleted_at IS NULL))"
        },
        "Service role full access records": {
          "name": "Service role full access records",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "service_role"
          ]
        },
        "Staff manage medical records": {
          "name": "Staff manage medical records",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "authenticated"
          ]
        }
      },
      "isRLSEnabled": true
    },
    "public.prescriptions": {
      "name": "prescriptions",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "pet_id": {
          "name": "pet_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "tenant_id": {
          "name": "tenant_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "vet_id": {
          "name": "vet_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "medical_record_id": {
          "name": "medical_record_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "prescription_number": {
          "name": "prescription_number",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "prescribed_date": {
          "name": "prescribed_date",
          "type": "date",
          "primaryKey": false,
          "notNull": true,
          "default": "CURRENT_DATE"
        },
        "valid_until": {
          "name": "valid_until",
          "type": "date",
          "primaryKey": false,
          "notNull": false
        },
        "medications": {
          "name": "medications",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true,
          "default": "'[]'::jsonb"
        },
        "signature_url": {
          "name": "signature_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "signed_at": {
          "name": "signed_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "default": "'active'"
        },
        "pdf_url": {
          "name": "pdf_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "notes": {
          "name": "notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "pharmacist_notes": {
          "name": "pharmacist_notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "dispensing_notes": {
          "name": "dispensing_notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "dispensed_at": {
          "name": "dispensed_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "dispensed_by": {
          "name": "dispensed_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "deleted_at": {
          "name": "deleted_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "deleted_by": {
          "name": "deleted_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_prescriptions_date": {
          "name": "idx_prescriptions_date",
          "columns": [
            {
              "expression": "prescribed_date",
              "asc": false,
              "nulls": "first",
              "opclass": "date_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_prescriptions_dispensed_by": {
          "name": "idx_prescriptions_dispensed_by",
          "columns": [
            {
              "expression": "dispensed_by",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_prescriptions_medical_record": {
          "name": "idx_prescriptions_medical_record",
          "columns": [
            {
              "expression": "medical_record_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_prescriptions_medications_gin": {
          "name": "idx_prescriptions_medications_gin",
          "columns": [
            {
              "expression": "medications",
              "asc": true,
              "nulls": "last",
              "opclass": "jsonb_path_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "gin",
          "where": "(deleted_at IS NULL)",
          "with": {}
        },
        "idx_prescriptions_number": {
          "name": "idx_prescriptions_number",
          "columns": [
            {
              "expression": "prescription_number",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_prescriptions_pet": {
          "name": "idx_prescriptions_pet",
          "columns": [
            {
              "expression": "pet_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_prescriptions_pet_active": {
          "name": "idx_prescriptions_pet_active",
          "columns": [
            {
              "expression": "pet_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            },
            {
              "expression": "prescribed_date",
              "asc": false,
              "nulls": "first",
              "opclass": "date_ops",
              "isExpression": false
            },
            {
              "expression": "prescription_number",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            },
            {
              "expression": "status",
              "asc": true,
              "nulls": "last",
              "opclass": "date_ops",
              "isExpression": false
            },
            {
              "expression": "valid_until",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            },
            {
              "expression": "vet_id",
              "asc": true,
              "nulls": "last",
              "opclass": "date_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "where": "((deleted_at IS NULL) AND (status = ANY (ARRAY['active'::text, 'dispensed'::text])))",
          "with": {}
        },
        "idx_prescriptions_status": {
          "name": "idx_prescriptions_status",
          "columns": [
            {
              "expression": "status",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "where": "(deleted_at IS NULL)",
          "with": {}
        },
        "idx_prescriptions_tenant": {
          "name": "idx_prescriptions_tenant",
          "columns": [
            {
              "expression": "tenant_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_prescriptions_vet": {
          "name": "idx_prescriptions_vet",
          "columns": [
            {
              "expression": "vet_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "prescriptions_deleted_by_fkey": {
          "name": "prescriptions_deleted_by_fkey",
          "tableFrom": "prescriptions",
          "tableTo": "profiles",
          "schemaTo": "public",
          "columnsFrom": [
            "deleted_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "prescriptions_dispensed_by_fkey": {
          "name": "prescriptions_dispensed_by_fkey",
          "tableFrom": "prescriptions",
          "tableTo": "profiles",
          "schemaTo": "public",
          "columnsFrom": [
            "dispensed_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "prescriptions_medical_record_id_fkey": {
          "name": "prescriptions_medical_record_id_fkey",
          "tableFrom": "prescriptions",
          "tableTo": "medical_records",
          "schemaTo": "public",
          "columnsFrom": [
            "medical_record_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "prescriptions_pet_id_fkey": {
          "name": "prescriptions_pet_id_fkey",
          "tableFrom": "prescriptions",
          "tableTo": "pets",
          "schemaTo": "public",
          "columnsFrom": [
            "pet_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "prescriptions_tenant_id_fkey": {
          "name": "prescriptions_tenant_id_fkey",
          "tableFrom": "prescriptions",
          "tableTo": "tenants",
          "schemaTo": "public",
          "columnsFrom": [
            "tenant_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "prescriptions_vet_id_fkey": {
          "name": "prescriptions_vet_id_fkey",
          "tableFrom": "prescriptions",
          "tableTo": "profiles",
          "schemaTo": "public",
          "columnsFrom": [
            "vet_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "restrict",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "prescriptions_tenant_id_prescription_number_key": {
          "columns": [
            "tenant_id",
            "prescription_number"
          ],
          "nullsNotDistinct": false,
          "name": "prescriptions_tenant_id_prescription_number_key"
        }
      },
      "checkConstraints": {
        "prescriptions_medications_is_array": {
          "name": "prescriptions_medications_is_array",
          "value": "jsonb_typeof(medications) = 'array'::text"
        },
        "prescriptions_status_check": {
          "name": "prescriptions_status_check",
          "value": "status = ANY (ARRAY['draft'::text, 'active'::text, 'dispensed'::text, 'expired'::text, 'cancelled'::text])"
        },
        "prescriptions_valid_until_after_prescribed": {
          "name": "prescriptions_valid_until_after_prescribed",
          "value": "(valid_until IS NULL) OR (valid_until >= prescribed_date)"
        }
      },
      "policies": {
        "Owners view pet prescriptions": {
          "name": "Owners view pet prescriptions",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "(is_owner_of_pet(pet_id) AND (deleted_at IS NULL))"
        },
        "Service role full access prescriptions": {
          "name": "Service role full access prescriptions",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "service_role"
          ]
        },
        "Staff manage prescriptions": {
          "name": "Staff manage prescriptions",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "authenticated"
          ]
        }
      },
      "isRLSEnabled": true
    },
    "public.notification_channels": {
      "name": "notification_channels",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "tenant_id": {
          "name": "tenant_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "channel_type": {
          "name": "channel_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "config": {
          "name": "config",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": true
        },
        "is_default": {
          "name": "is_default",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "notification_channels_tenant_id_channel_type_key": {
          "columns": [
            "tenant_id",
            "channel_type"
          ],
          "nullsNotDistinct": false,
          "name": "notification_channels_tenant_id_channel_type_key"
        }
      },
      "checkConstraints": {
        "notification_channels_channel_type_check": {
          "name": "notification_channels_channel_type_check",
          "value": "channel_type = ANY (ARRAY['email'::text, 'sms'::text, 'whatsapp'::text, 'push'::text, 'in_app'::text])"
        }
      },
      "policies": {},
      "isRLSEnabled": true
    },
    "public.notification_templates": {
      "name": "notification_templates",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "tenant_id": {
          "name": "tenant_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "type": {
          "name": "type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "channel_type": {
          "name": "channel_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "subject": {
          "name": "subject",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "body": {
          "name": "body",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "notification_templates_tenant_id_type_channel_type_key": {
          "columns": [
            "tenant_id",
            "type",
            "channel_type"
          ],
          "nullsNotDistinct": false,
          "name": "notification_templates_tenant_id_type_channel_type_key"
        }
      },
      "checkConstraints": {
        "notification_templates_channel_type_check": {
          "name": "notification_templates_channel_type_check",
          "value": "channel_type = ANY (ARRAY['email'::text, 'sms'::text, 'whatsapp'::text, 'push'::text, 'in_app'::text])"
        },
        "notification_templates_type_check": {
          "name": "notification_templates_type_check",
          "value": "type = ANY (ARRAY['vaccine_reminder'::text, 'vaccine_overdue'::text, 'appointment_reminder'::text, 'appointment_confirmation'::text, 'appointment_cancelled'::text, 'invoice_sent'::text, 'payment_received'::text, 'payment_overdue'::text, 'birthday'::text, 'follow_up'::text, 'lab_results_ready'::text, 'hospitalization_update'::text, 'custom'::text])"
        }
      },
      "policies": {},
      "isRLSEnabled": true
    },
    "public.notification_preferences": {
      "name": "notification_preferences",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "client_id": {
          "name": "client_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "vaccine_reminders": {
          "name": "vaccine_reminders",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": true
        },
        "appointment_reminders": {
          "name": "appointment_reminders",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": true
        },
        "payment_reminders": {
          "name": "payment_reminders",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": true
        },
        "promotional": {
          "name": "promotional",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "birthday_greetings": {
          "name": "birthday_greetings",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": true
        },
        "preferred_channels": {
          "name": "preferred_channels",
          "type": "text[]",
          "primaryKey": false,
          "notNull": false,
          "default": "'{\"RAY['sms'::text\",\"'email'::tex\"}'"
        },
        "preferred_phone": {
          "name": "preferred_phone",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "preferred_email": {
          "name": "preferred_email",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "reminder_days_before": {
          "name": "reminder_days_before",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 3
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "notification_preferences_client_id_key": {
          "columns": [
            "client_id"
          ],
          "nullsNotDistinct": false,
          "name": "notification_preferences_client_id_key"
        }
      },
      "checkConstraints": {},
      "policies": {
        "Users manage own preferences": {
          "name": "Users manage own preferences",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "public"
          ],
          "using": "(client_id = auth.uid())"
        }
      },
      "isRLSEnabled": true
    },
    "public.notification_log": {
      "name": "notification_log",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "tenant_id": {
          "name": "tenant_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "queue_id": {
          "name": "queue_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "reminder_id": {
          "name": "reminder_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "client_id": {
          "name": "client_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "channel_type": {
          "name": "channel_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "destination": {
          "name": "destination",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "subject": {
          "name": "subject",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "body": {
          "name": "body",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "error_message": {
          "name": "error_message",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "sent_at": {
          "name": "sent_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "delivered_at": {
          "name": "delivered_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {},
      "policies": {},
      "isRLSEnabled": true
    },
    "public.reminder_rules": {
      "name": "reminder_rules",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "tenant_id": {
          "name": "tenant_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "type": {
          "name": "type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "days_offset": {
          "name": "days_offset",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "time_of_day": {
          "name": "time_of_day",
          "type": "time",
          "primaryKey": false,
          "notNull": false,
          "default": "'09:00:00'"
        },
        "channels": {
          "name": "channels",
          "type": "text[]",
          "primaryKey": false,
          "notNull": false,
          "default": "'{\"RAY['sms'::tex\"}'"
        },
        "conditions": {
          "name": "conditions",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {
        "reminder_rules_type_check": {
          "name": "reminder_rules_type_check",
          "value": "type = ANY (ARRAY['vaccine_due'::text, 'vaccine_overdue'::text, 'appointment_before'::text, 'birthday'::text, 'follow_up_after_visit'::text, 'wellness_checkup'::text])"
        }
      },
      "policies": {},
      "isRLSEnabled": true
    },
    "public.services": {
      "name": "services",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "tenant_id": {
          "name": "tenant_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "category": {
          "name": "category",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "base_price": {
          "name": "base_price",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": true
        },
        "currency": {
          "name": "currency",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'PYG'"
        },
        "tax_rate": {
          "name": "tax_rate",
          "type": "numeric(5, 2)",
          "primaryKey": false,
          "notNull": false,
          "default": "'10.00'"
        },
        "duration_minutes": {
          "name": "duration_minutes",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 30
        },
        "buffer_minutes": {
          "name": "buffer_minutes",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "max_daily_bookings": {
          "name": "max_daily_bookings",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "requires_appointment": {
          "name": "requires_appointment",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": true
        },
        "available_days": {
          "name": "available_days",
          "type": "integer[]",
          "primaryKey": false,
          "notNull": false,
          "default": "'{RAY[1,2,3,4,}'"
        },
        "available_start_time": {
          "name": "available_start_time",
          "type": "time",
          "primaryKey": false,
          "notNull": false,
          "default": "'08:00:00'"
        },
        "available_end_time": {
          "name": "available_end_time",
          "type": "time",
          "primaryKey": false,
          "notNull": false,
          "default": "'18:00:00'"
        },
        "requires_deposit": {
          "name": "requires_deposit",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "deposit_percentage": {
          "name": "deposit_percentage",
          "type": "numeric(5, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "species_allowed": {
          "name": "species_allowed",
          "type": "text[]",
          "primaryKey": false,
          "notNull": false
        },
        "display_order": {
          "name": "display_order",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 100
        },
        "is_featured": {
          "name": "is_featured",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "icon": {
          "name": "icon",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "color": {
          "name": "color",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": true
        },
        "deleted_at": {
          "name": "deleted_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "deleted_by": {
          "name": "deleted_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_services_booking": {
          "name": "idx_services_booking",
          "columns": [
            {
              "expression": "tenant_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            },
            {
              "expression": "category",
              "asc": true,
              "nulls": "last",
              "opclass": "int4_ops",
              "isExpression": false
            },
            {
              "expression": "display_order",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            },
            {
              "expression": "name",
              "asc": true,
              "nulls": "last",
              "opclass": "int4_ops",
              "isExpression": false
            },
            {
              "expression": "base_price",
              "asc": true,
              "nulls": "last",
              "opclass": "int4_ops",
              "isExpression": false
            },
            {
              "expression": "duration_minutes",
              "asc": true,
              "nulls": "last",
              "opclass": "int4_ops",
              "isExpression": false
            },
            {
              "expression": "is_featured",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            },
            {
              "expression": "species_allowed",
              "asc": true,
              "nulls": "last",
              "opclass": "int4_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "where": "((is_active = true) AND (deleted_at IS NULL))",
          "with": {}
        },
        "idx_services_category": {
          "name": "idx_services_category",
          "columns": [
            {
              "expression": "tenant_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            },
            {
              "expression": "category",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_services_featured": {
          "name": "idx_services_featured",
          "columns": [
            {
              "expression": "tenant_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            },
            {
              "expression": "is_featured",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "where": "((is_featured = true) AND (is_active = true) AND (deleted_at IS NULL))",
          "with": {}
        },
        "idx_services_list": {
          "name": "idx_services_list",
          "columns": [
            {
              "expression": "tenant_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            },
            {
              "expression": "display_order",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            },
            {
              "expression": "name",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            },
            {
              "expression": "category",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            },
            {
              "expression": "base_price",
              "asc": true,
              "nulls": "last",
              "opclass": "int4_ops",
              "isExpression": false
            },
            {
              "expression": "duration_minutes",
              "asc": true,
              "nulls": "last",
              "opclass": "int4_ops",
              "isExpression": false
            },
            {
              "expression": "is_featured",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "where": "((is_active = true) AND (deleted_at IS NULL))",
          "with": {}
        },
        "idx_services_tenant": {
          "name": "idx_services_tenant",
          "columns": [
            {
              "expression": "tenant_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_services_tenant_active": {
          "name": "idx_services_tenant_active",
          "columns": [
            {
              "expression": "tenant_id",
              "asc": true,
              "nulls": "last",
              "opclass": "bool_ops",
              "isExpression": false
            },
            {
              "expression": "is_active",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "where": "(deleted_at IS NULL)",
          "with": {}
        },
        "idx_services_tenant_name_unique": {
          "name": "idx_services_tenant_name_unique",
          "columns": [
            {
              "expression": "tenant_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            },
            {
              "expression": "name",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "where": "(deleted_at IS NULL)",
          "with": {}
        }
      },
      "foreignKeys": {
        "services_deleted_by_fkey": {
          "name": "services_deleted_by_fkey",
          "tableFrom": "services",
          "tableTo": "profiles",
          "schemaTo": "public",
          "columnsFrom": [
            "deleted_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "services_tenant_id_fkey": {
          "name": "services_tenant_id_fkey",
          "tableFrom": "services",
          "tableTo": "tenants",
          "schemaTo": "public",
          "columnsFrom": [
            "tenant_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {
        "services_base_price_check": {
          "name": "services_base_price_check",
          "value": "base_price >= (0)::numeric"
        },
        "services_buffer_minutes_check": {
          "name": "services_buffer_minutes_check",
          "value": "buffer_minutes >= 0"
        },
        "services_buffer_non_negative": {
          "name": "services_buffer_non_negative",
          "value": "(buffer_minutes IS NULL) OR (buffer_minutes >= 0)"
        },
        "services_category_check": {
          "name": "services_category_check",
          "value": "category = ANY (ARRAY['consultation'::text, 'vaccination'::text, 'grooming'::text, 'surgery'::text, 'diagnostic'::text, 'dental'::text, 'emergency'::text, 'hospitalization'::text, 'treatment'::text, 'identification'::text, 'other'::text])"
        },
        "services_deposit_percentage_check": {
          "name": "services_deposit_percentage_check",
          "value": "(deposit_percentage IS NULL) OR ((deposit_percentage >= (0)::numeric) AND (deposit_percentage <= (100)::numeric))"
        },
        "services_duration_minutes_check": {
          "name": "services_duration_minutes_check",
          "value": "duration_minutes > 0"
        },
        "services_max_daily_bookings_check": {
          "name": "services_max_daily_bookings_check",
          "value": "(max_daily_bookings IS NULL) OR (max_daily_bookings > 0)"
        },
        "services_name_length": {
          "name": "services_name_length",
          "value": "(char_length(name) >= 2) AND (char_length(name) <= 100)"
        },
        "services_tax_rate_check": {
          "name": "services_tax_rate_check",
          "value": "(tax_rate >= (0)::numeric) AND (tax_rate <= (100)::numeric)"
        },
        "services_tax_rate_valid": {
          "name": "services_tax_rate_valid",
          "value": "(tax_rate IS NULL) OR ((tax_rate >= (0)::numeric) AND (tax_rate <= (100)::numeric))"
        },
        "services_time_order": {
          "name": "services_time_order",
          "value": "available_start_time < available_end_time"
        }
      },
      "policies": {
        "Public view active services": {
          "name": "Public view active services",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "public"
          ],
          "using": "((is_active = true) AND (deleted_at IS NULL))"
        },
        "Service role full access": {
          "name": "Service role full access",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "service_role"
          ]
        },
        "Staff manage services": {
          "name": "Staff manage services",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "authenticated"
          ]
        }
      },
      "isRLSEnabled": true
    },
    "public.appointments": {
      "name": "appointments",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "tenant_id": {
          "name": "tenant_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "pet_id": {
          "name": "pet_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "service_id": {
          "name": "service_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "vet_id": {
          "name": "vet_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "created_by": {
          "name": "created_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "start_time": {
          "name": "start_time",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true
        },
        "end_time": {
          "name": "end_time",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true
        },
        "duration_minutes": {
          "name": "duration_minutes",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 30
        },
        "reason": {
          "name": "reason",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "notes": {
          "name": "notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "internal_notes": {
          "name": "internal_notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'scheduled'"
        },
        "confirmed_at": {
          "name": "confirmed_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "checked_in_at": {
          "name": "checked_in_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "started_at": {
          "name": "started_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "completed_at": {
          "name": "completed_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "cancelled_at": {
          "name": "cancelled_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "cancelled_by": {
          "name": "cancelled_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "cancellation_reason": {
          "name": "cancellation_reason",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "reminder_sent": {
          "name": "reminder_sent",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "reminder_sent_at": {
          "name": "reminder_sent_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "deleted_at": {
          "name": "deleted_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "deleted_by": {
          "name": "deleted_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_appointments_calendar": {
          "name": "idx_appointments_calendar",
          "columns": [
            {
              "expression": "tenant_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            },
            {
              "expression": "start_time",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            },
            {
              "expression": "status",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            },
            {
              "expression": "pet_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            },
            {
              "expression": "vet_id",
              "asc": true,
              "nulls": "last",
              "opclass": "timestamptz_ops",
              "isExpression": false
            },
            {
              "expression": "service_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            },
            {
              "expression": "end_time",
              "asc": true,
              "nulls": "last",
              "opclass": "timestamptz_ops",
              "isExpression": false
            },
            {
              "expression": "duration_minutes",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            },
            {
              "expression": "reason",
              "asc": true,
              "nulls": "last",
              "opclass": "timestamptz_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "where": "(deleted_at IS NULL)",
          "with": {}
        },
        "idx_appointments_cancelled_by": {
          "name": "idx_appointments_cancelled_by",
          "columns": [
            {
              "expression": "cancelled_by",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_appointments_created_by": {
          "name": "idx_appointments_created_by",
          "columns": [
            {
              "expression": "created_by",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_appointments_owner_upcoming": {
          "name": "idx_appointments_owner_upcoming",
          "columns": [
            {
              "expression": "pet_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            },
            {
              "expression": "start_time",
              "asc": true,
              "nulls": "last",
              "opclass": "timestamptz_ops",
              "isExpression": false
            },
            {
              "expression": "tenant_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            },
            {
              "expression": "service_id",
              "asc": true,
              "nulls": "last",
              "opclass": "timestamptz_ops",
              "isExpression": false
            },
            {
              "expression": "vet_id",
              "asc": true,
              "nulls": "last",
              "opclass": "timestamptz_ops",
              "isExpression": false
            },
            {
              "expression": "status",
              "asc": true,
              "nulls": "last",
              "opclass": "timestamptz_ops",
              "isExpression": false
            },
            {
              "expression": "reason",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "where": "((status = ANY (ARRAY['scheduled'::text, 'confirmed'::text])) AND (deleted_at IS NULL))",
          "with": {}
        },
        "idx_appointments_pet": {
          "name": "idx_appointments_pet",
          "columns": [
            {
              "expression": "pet_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_appointments_service": {
          "name": "idx_appointments_service",
          "columns": [
            {
              "expression": "service_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_appointments_start_brin": {
          "name": "idx_appointments_start_brin",
          "columns": [
            {
              "expression": "start_time",
              "asc": true,
              "nulls": "last",
              "opclass": "timestamptz_minmax_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "brin",
          "with": {
            "pages_per_range": "64"
          }
        },
        "idx_appointments_tenant": {
          "name": "idx_appointments_tenant",
          "columns": [
            {
              "expression": "tenant_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_appointments_tenant_date": {
          "name": "idx_appointments_tenant_date",
          "columns": [
            {
              "expression": "tenant_id",
              "asc": true,
              "nulls": "last",
              "opclass": "timestamptz_ops",
              "isExpression": false
            },
            {
              "expression": "start_time",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "where": "(deleted_at IS NULL)",
          "with": {}
        },
        "idx_appointments_tenant_status": {
          "name": "idx_appointments_tenant_status",
          "columns": [
            {
              "expression": "tenant_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            },
            {
              "expression": "status",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "where": "(deleted_at IS NULL)",
          "with": {}
        },
        "idx_appointments_upcoming": {
          "name": "idx_appointments_upcoming",
          "columns": [
            {
              "expression": "tenant_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            },
            {
              "expression": "start_time",
              "asc": true,
              "nulls": "last",
              "opclass": "timestamptz_ops",
              "isExpression": false
            },
            {
              "expression": "status",
              "asc": true,
              "nulls": "last",
              "opclass": "timestamptz_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "where": "((status = ANY (ARRAY['scheduled'::text, 'confirmed'::text])) AND (deleted_at IS NULL))",
          "with": {}
        },
        "idx_appointments_vet": {
          "name": "idx_appointments_vet",
          "columns": [
            {
              "expression": "vet_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_appointments_vet_overlap": {
          "name": "idx_appointments_vet_overlap",
          "columns": [
            {
              "expression": "vet_id",
              "asc": true,
              "nulls": "last",
              "opclass": "timestamptz_ops",
              "isExpression": false
            },
            {
              "expression": "start_time",
              "asc": true,
              "nulls": "last",
              "opclass": "timestamptz_ops",
              "isExpression": false
            },
            {
              "expression": "end_time",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "where": "((status <> ALL (ARRAY['cancelled'::text, 'no_show'::text])) AND (deleted_at IS NULL))",
          "with": {}
        },
        "idx_appointments_vet_schedule": {
          "name": "idx_appointments_vet_schedule",
          "columns": [
            {
              "expression": "vet_id",
              "asc": true,
              "nulls": "last",
              "opclass": "timestamptz_ops",
              "isExpression": false
            },
            {
              "expression": "start_time",
              "asc": true,
              "nulls": "last",
              "opclass": "timestamptz_ops",
              "isExpression": false
            },
            {
              "expression": "end_time",
              "asc": true,
              "nulls": "last",
              "opclass": "timestamptz_ops",
              "isExpression": false
            },
            {
              "expression": "tenant_id",
              "asc": true,
              "nulls": "last",
              "opclass": "timestamptz_ops",
              "isExpression": false
            },
            {
              "expression": "pet_id",
              "asc": true,
              "nulls": "last",
              "opclass": "timestamptz_ops",
              "isExpression": false
            },
            {
              "expression": "service_id",
              "asc": true,
              "nulls": "last",
              "opclass": "timestamptz_ops",
              "isExpression": false
            },
            {
              "expression": "status",
              "asc": true,
              "nulls": "last",
              "opclass": "timestamptz_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "where": "((status <> ALL (ARRAY['cancelled'::text, 'no_show'::text])) AND (deleted_at IS NULL))",
          "with": {}
        }
      },
      "foreignKeys": {
        "appointments_cancelled_by_fkey": {
          "name": "appointments_cancelled_by_fkey",
          "tableFrom": "appointments",
          "tableTo": "profiles",
          "schemaTo": "public",
          "columnsFrom": [
            "cancelled_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "appointments_created_by_fkey": {
          "name": "appointments_created_by_fkey",
          "tableFrom": "appointments",
          "tableTo": "profiles",
          "schemaTo": "public",
          "columnsFrom": [
            "created_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "appointments_deleted_by_fkey": {
          "name": "appointments_deleted_by_fkey",
          "tableFrom": "appointments",
          "tableTo": "profiles",
          "schemaTo": "public",
          "columnsFrom": [
            "deleted_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "appointments_pet_id_fkey": {
          "name": "appointments_pet_id_fkey",
          "tableFrom": "appointments",
          "tableTo": "pets",
          "schemaTo": "public",
          "columnsFrom": [
            "pet_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "appointments_service_id_fkey": {
          "name": "appointments_service_id_fkey",
          "tableFrom": "appointments",
          "tableTo": "services",
          "schemaTo": "public",
          "columnsFrom": [
            "service_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "appointments_tenant_id_fkey": {
          "name": "appointments_tenant_id_fkey",
          "tableFrom": "appointments",
          "tableTo": "tenants",
          "schemaTo": "public",
          "columnsFrom": [
            "tenant_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "appointments_vet_id_fkey": {
          "name": "appointments_vet_id_fkey",
          "tableFrom": "appointments",
          "tableTo": "profiles",
          "schemaTo": "public",
          "columnsFrom": [
            "vet_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {
        "appointments_duration_matches": {
          "name": "appointments_duration_matches",
          "value": "(EXTRACT(epoch FROM (end_time - start_time)) / (60)::numeric) = (duration_minutes)::numeric"
        },
        "appointments_duration_minutes_check": {
          "name": "appointments_duration_minutes_check",
          "value": "duration_minutes > 0"
        },
        "appointments_status_check": {
          "name": "appointments_status_check",
          "value": "status = ANY (ARRAY['scheduled'::text, 'confirmed'::text, 'checked_in'::text, 'in_progress'::text, 'completed'::text, 'cancelled'::text, 'no_show'::text])"
        },
        "appointments_time_order": {
          "name": "appointments_time_order",
          "value": "end_time > start_time"
        }
      },
      "policies": {
        "Owners cancel appointments": {
          "name": "Owners cancel appointments",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ],
          "withCheck": "(status = 'cancelled'::text)",
          "using": "(is_owner_of_pet(pet_id) AND (status = ANY (ARRAY['scheduled'::text, 'confirmed'::text])) AND (deleted_at IS NULL))"
        },
        "Owners create appointments": {
          "name": "Owners create appointments",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ]
        },
        "Owners view pet appointments": {
          "name": "Owners view pet appointments",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ]
        },
        "Service role full access": {
          "name": "Service role full access",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "service_role"
          ]
        },
        "Staff manage appointments": {
          "name": "Staff manage appointments",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "authenticated"
          ]
        }
      },
      "isRLSEnabled": true
    },
    "public.suppliers": {
      "name": "suppliers",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "tenant_id": {
          "name": "tenant_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "legal_name": {
          "name": "legal_name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "tax_id": {
          "name": "tax_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "contact_info": {
          "name": "contact_info",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "website": {
          "name": "website",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "supplier_type": {
          "name": "supplier_type",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "default": "'products'"
        },
        "is_platform_provider": {
          "name": "is_platform_provider",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "minimum_order_amount": {
          "name": "minimum_order_amount",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "payment_terms": {
          "name": "payment_terms",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "delivery_time_days": {
          "name": "delivery_time_days",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "verification_status": {
          "name": "verification_status",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "default": "'pending'"
        },
        "verified_at": {
          "name": "verified_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "verified_by": {
          "name": "verified_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": true
        },
        "deleted_at": {
          "name": "deleted_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "deleted_by": {
          "name": "deleted_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_suppliers_active": {
          "name": "idx_suppliers_active",
          "columns": [
            {
              "expression": "is_active",
              "asc": true,
              "nulls": "last",
              "opclass": "bool_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "where": "(deleted_at IS NULL)",
          "with": {}
        },
        "idx_suppliers_platform_provider": {
          "name": "idx_suppliers_platform_provider",
          "columns": [
            {
              "expression": "is_platform_provider",
              "asc": true,
              "nulls": "last",
              "opclass": "bool_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "where": "(is_platform_provider = true)",
          "with": {}
        },
        "idx_suppliers_tenant": {
          "name": "idx_suppliers_tenant",
          "columns": [
            {
              "expression": "tenant_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_suppliers_type": {
          "name": "idx_suppliers_type",
          "columns": [
            {
              "expression": "supplier_type",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_suppliers_verification": {
          "name": "idx_suppliers_verification",
          "columns": [
            {
              "expression": "verification_status",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "suppliers_deleted_by_fkey": {
          "name": "suppliers_deleted_by_fkey",
          "tableFrom": "suppliers",
          "tableTo": "profiles",
          "schemaTo": "public",
          "columnsFrom": [
            "deleted_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "suppliers_tenant_id_fkey": {
          "name": "suppliers_tenant_id_fkey",
          "tableFrom": "suppliers",
          "tableTo": "tenants",
          "schemaTo": "public",
          "columnsFrom": [
            "tenant_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "suppliers_verified_by_fkey": {
          "name": "suppliers_verified_by_fkey",
          "tableFrom": "suppliers",
          "tableTo": "profiles",
          "schemaTo": "public",
          "columnsFrom": [
            "verified_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {
        "suppliers_supplier_type_check": {
          "name": "suppliers_supplier_type_check",
          "value": "supplier_type = ANY (ARRAY['products'::text, 'services'::text, 'both'::text])"
        },
        "suppliers_verification_status_check": {
          "name": "suppliers_verification_status_check",
          "value": "verification_status = ANY (ARRAY['pending'::text, 'verified'::text, 'rejected'::text])"
        }
      },
      "policies": {
        "Authenticated users view suppliers": {
          "name": "Authenticated users view suppliers",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "((tenant_id IS NULL) OR (EXISTS ( SELECT 1\n   FROM profiles p\n  WHERE ((p.id = auth.uid()) AND (p.tenant_id = suppliers.tenant_id) AND (p.deleted_at IS NULL)))))"
        },
        "Clinic staff manage suppliers": {
          "name": "Clinic staff manage suppliers",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "authenticated"
          ]
        },
        "Platform admins manage global suppliers": {
          "name": "Platform admins manage global suppliers",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "authenticated"
          ]
        },
        "Service role full access suppliers": {
          "name": "Service role full access suppliers",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "service_role"
          ]
        }
      },
      "isRLSEnabled": true
    },
    "public.hospitalization_visits": {
      "name": "hospitalization_visits",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "hospitalization_id": {
          "name": "hospitalization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "visitor_name": {
          "name": "visitor_name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "visitor_relationship": {
          "name": "visitor_relationship",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "visit_start": {
          "name": "visit_start",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true
        },
        "visit_end": {
          "name": "visit_end",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "notes": {
          "name": "notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {},
      "policies": {},
      "isRLSEnabled": true
    },
    "public.hospitalization_documents": {
      "name": "hospitalization_documents",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "hospitalization_id": {
          "name": "hospitalization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "document_type": {
          "name": "document_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "title": {
          "name": "title",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "file_url": {
          "name": "file_url",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "uploaded_by": {
          "name": "uploaded_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "notes": {
          "name": "notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "hospitalization_documents_uploaded_by_fkey": {
          "name": "hospitalization_documents_uploaded_by_fkey",
          "tableFrom": "hospitalization_documents",
          "tableTo": "users",
          "schemaTo": "auth",
          "columnsFrom": [
            "uploaded_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {
        "hospitalization_documents_document_type_check": {
          "name": "hospitalization_documents_document_type_check",
          "value": "document_type = ANY (ARRAY['consent'::text, 'treatment_plan'::text, 'discharge_summary'::text, 'lab_result'::text, 'image'::text, 'other'::text])"
        }
      },
      "policies": {},
      "isRLSEnabled": true
    },
    "public.store_categories": {
      "name": "store_categories",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "tenant_id": {
          "name": "tenant_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "slug": {
          "name": "slug",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "parent_id": {
          "name": "parent_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "level": {
          "name": "level",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 1
        },
        "image_url": {
          "name": "image_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "display_order": {
          "name": "display_order",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 100
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": true
        },
        "is_global_catalog": {
          "name": "is_global_catalog",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "created_by_tenant_id": {
          "name": "created_by_tenant_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "deleted_at": {
          "name": "deleted_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "deleted_by": {
          "name": "deleted_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_store_categories_global_catalog": {
          "name": "idx_store_categories_global_catalog",
          "columns": [
            {
              "expression": "is_global_catalog",
              "asc": true,
              "nulls": "last",
              "opclass": "bool_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "where": "(is_global_catalog = true)",
          "with": {}
        },
        "idx_store_categories_global_slug": {
          "name": "idx_store_categories_global_slug",
          "columns": [
            {
              "expression": "slug",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "where": "(tenant_id IS NULL)",
          "with": {}
        },
        "idx_store_categories_level": {
          "name": "idx_store_categories_level",
          "columns": [
            {
              "expression": "level",
              "asc": true,
              "nulls": "last",
              "opclass": "int4_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_store_categories_parent": {
          "name": "idx_store_categories_parent",
          "columns": [
            {
              "expression": "parent_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_store_categories_tenant_active": {
          "name": "idx_store_categories_tenant_active",
          "columns": [
            {
              "expression": "tenant_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            },
            {
              "expression": "is_active",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "where": "(deleted_at IS NULL)",
          "with": {}
        },
        "idx_store_categories_tenant_slug": {
          "name": "idx_store_categories_tenant_slug",
          "columns": [
            {
              "expression": "tenant_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            },
            {
              "expression": "slug",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "where": "(tenant_id IS NOT NULL)",
          "with": {}
        }
      },
      "foreignKeys": {
        "store_categories_created_by_tenant_id_fkey": {
          "name": "store_categories_created_by_tenant_id_fkey",
          "tableFrom": "store_categories",
          "tableTo": "tenants",
          "schemaTo": "public",
          "columnsFrom": [
            "created_by_tenant_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "store_categories_deleted_by_fkey": {
          "name": "store_categories_deleted_by_fkey",
          "tableFrom": "store_categories",
          "tableTo": "profiles",
          "schemaTo": "public",
          "columnsFrom": [
            "deleted_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "store_categories_parent_id_fkey": {
          "name": "store_categories_parent_id_fkey",
          "tableFrom": "store_categories",
          "tableTo": "store_categories",
          "schemaTo": "public",
          "columnsFrom": [
            "parent_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "store_categories_tenant_id_fkey": {
          "name": "store_categories_tenant_id_fkey",
          "tableFrom": "store_categories",
          "tableTo": "tenants",
          "schemaTo": "public",
          "columnsFrom": [
            "tenant_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {
        "store_categories_level_check": {
          "name": "store_categories_level_check",
          "value": "(level >= 1) AND (level <= 5)"
        }
      },
      "policies": {
        "Authenticated users view categories": {
          "name": "Authenticated users view categories",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "((tenant_id IS NULL) OR (EXISTS ( SELECT 1\n   FROM profiles p\n  WHERE ((p.id = auth.uid()) AND (p.tenant_id = store_categories.tenant_id) AND (p.deleted_at IS NULL)))))"
        },
        "Clinic staff manage categories": {
          "name": "Clinic staff manage categories",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "authenticated"
          ]
        },
        "Platform admins manage global categories": {
          "name": "Platform admins manage global categories",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "authenticated"
          ]
        },
        "Service role full access categories": {
          "name": "Service role full access categories",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "service_role"
          ]
        }
      },
      "isRLSEnabled": false
    },
    "public.store_brands": {
      "name": "store_brands",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "tenant_id": {
          "name": "tenant_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "slug": {
          "name": "slug",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "logo_url": {
          "name": "logo_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "website": {
          "name": "website",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "country_origin": {
          "name": "country_origin",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": true
        },
        "is_global_catalog": {
          "name": "is_global_catalog",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "created_by_tenant_id": {
          "name": "created_by_tenant_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "deleted_at": {
          "name": "deleted_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "deleted_by": {
          "name": "deleted_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_store_brands_country": {
          "name": "idx_store_brands_country",
          "columns": [
            {
              "expression": "country_origin",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_store_brands_global_catalog": {
          "name": "idx_store_brands_global_catalog",
          "columns": [
            {
              "expression": "is_global_catalog",
              "asc": true,
              "nulls": "last",
              "opclass": "bool_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "where": "(is_global_catalog = true)",
          "with": {}
        },
        "idx_store_brands_global_slug": {
          "name": "idx_store_brands_global_slug",
          "columns": [
            {
              "expression": "slug",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "where": "(tenant_id IS NULL)",
          "with": {}
        },
        "idx_store_brands_tenant_active": {
          "name": "idx_store_brands_tenant_active",
          "columns": [
            {
              "expression": "tenant_id",
              "asc": true,
              "nulls": "last",
              "opclass": "bool_ops",
              "isExpression": false
            },
            {
              "expression": "is_active",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "where": "(deleted_at IS NULL)",
          "with": {}
        },
        "idx_store_brands_tenant_slug": {
          "name": "idx_store_brands_tenant_slug",
          "columns": [
            {
              "expression": "tenant_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            },
            {
              "expression": "slug",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "where": "(tenant_id IS NOT NULL)",
          "with": {}
        }
      },
      "foreignKeys": {
        "store_brands_created_by_tenant_id_fkey": {
          "name": "store_brands_created_by_tenant_id_fkey",
          "tableFrom": "store_brands",
          "tableTo": "tenants",
          "schemaTo": "public",
          "columnsFrom": [
            "created_by_tenant_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "store_brands_deleted_by_fkey": {
          "name": "store_brands_deleted_by_fkey",
          "tableFrom": "store_brands",
          "tableTo": "profiles",
          "schemaTo": "public",
          "columnsFrom": [
            "deleted_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "store_brands_tenant_id_fkey": {
          "name": "store_brands_tenant_id_fkey",
          "tableFrom": "store_brands",
          "tableTo": "tenants",
          "schemaTo": "public",
          "columnsFrom": [
            "tenant_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {},
      "policies": {
        "Authenticated users view brands": {
          "name": "Authenticated users view brands",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "((tenant_id IS NULL) OR (EXISTS ( SELECT 1\n   FROM profiles p\n  WHERE ((p.id = auth.uid()) AND (p.tenant_id = store_brands.tenant_id) AND (p.deleted_at IS NULL)))))"
        },
        "Clinic staff manage brands": {
          "name": "Clinic staff manage brands",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "authenticated"
          ]
        },
        "Platform admins manage global brands": {
          "name": "Platform admins manage global brands",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "authenticated"
          ]
        },
        "Service role full access brands": {
          "name": "Service role full access brands",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "service_role"
          ]
        }
      },
      "isRLSEnabled": false
    },
    "public.store_products": {
      "name": "store_products",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "tenant_id": {
          "name": "tenant_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "category_id": {
          "name": "category_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "brand_id": {
          "name": "brand_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "sku": {
          "name": "sku",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "barcode": {
          "name": "barcode",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "short_description": {
          "name": "short_description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "purchase_unit": {
          "name": "purchase_unit",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "default": "'Unidad'"
        },
        "sale_unit": {
          "name": "sale_unit",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "default": "'Unidad'"
        },
        "conversion_factor": {
          "name": "conversion_factor",
          "type": "numeric(12, 4)",
          "primaryKey": false,
          "notNull": false,
          "default": "'1'"
        },
        "purchase_price": {
          "name": "purchase_price",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "unit_cost": {
          "name": "unit_cost",
          "type": "numeric(12, 4)",
          "primaryKey": false,
          "notNull": false,
          "generated": {
            "as": "\nCASE\n    WHEN ((purchase_price IS NOT NULL) AND (conversion_factor > (0)::numeric)) THEN (purchase_price / conversion_factor)\n    ELSE NULL::numeric\nEND",
            "type": "stored"
          }
        },
        "base_price": {
          "name": "base_price",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": true,
          "default": "'0'"
        },
        "sale_price": {
          "name": "sale_price",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "cost_price": {
          "name": "cost_price",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "default_supplier_id": {
          "name": "default_supplier_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "image_url": {
          "name": "image_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "images": {
          "name": "images",
          "type": "text[]",
          "primaryKey": false,
          "notNull": false,
          "default": "'{\"\"}'"
        },
        "weight_grams": {
          "name": "weight_grams",
          "type": "numeric(10, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "dimensions": {
          "name": "dimensions",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "attributes": {
          "name": "attributes",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "target_species": {
          "name": "target_species",
          "type": "text[]",
          "primaryKey": false,
          "notNull": false
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": true
        },
        "is_featured": {
          "name": "is_featured",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "requires_prescription": {
          "name": "requires_prescription",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "display_order": {
          "name": "display_order",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 100
        },
        "is_global_catalog": {
          "name": "is_global_catalog",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "created_by_tenant_id": {
          "name": "created_by_tenant_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "verification_status": {
          "name": "verification_status",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "default": "'pending'"
        },
        "verified_at": {
          "name": "verified_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "verified_by": {
          "name": "verified_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "meta_title": {
          "name": "meta_title",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "meta_description": {
          "name": "meta_description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "deleted_at": {
          "name": "deleted_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "deleted_by": {
          "name": "deleted_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_store_products_active": {
          "name": "idx_store_products_active",
          "columns": [
            {
              "expression": "tenant_id",
              "asc": true,
              "nulls": "last",
              "opclass": "timestamptz_ops",
              "isExpression": false
            },
            {
              "expression": "is_active",
              "asc": true,
              "nulls": "last",
              "opclass": "bool_ops",
              "isExpression": false
            },
            {
              "expression": "deleted_at",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            },
            {
              "expression": "name",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            },
            {
              "expression": "base_price",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            },
            {
              "expression": "sale_price",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            },
            {
              "expression": "image_url",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            },
            {
              "expression": "is_featured",
              "asc": true,
              "nulls": "last",
              "opclass": "bool_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_store_products_brand": {
          "name": "idx_store_products_brand",
          "columns": [
            {
              "expression": "brand_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_store_products_category": {
          "name": "idx_store_products_category",
          "columns": [
            {
              "expression": "category_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_store_products_featured": {
          "name": "idx_store_products_featured",
          "columns": [
            {
              "expression": "is_featured",
              "asc": true,
              "nulls": "last",
              "opclass": "bool_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "where": "((is_featured = true) AND (is_active = true) AND (deleted_at IS NULL))",
          "with": {}
        },
        "idx_store_products_global_catalog": {
          "name": "idx_store_products_global_catalog",
          "columns": [
            {
              "expression": "is_global_catalog",
              "asc": true,
              "nulls": "last",
              "opclass": "bool_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "where": "(is_global_catalog = true)",
          "with": {}
        },
        "idx_store_products_global_sku": {
          "name": "idx_store_products_global_sku",
          "columns": [
            {
              "expression": "sku",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "where": "((tenant_id IS NULL) AND (sku IS NOT NULL))",
          "with": {}
        },
        "idx_store_products_prescription": {
          "name": "idx_store_products_prescription",
          "columns": [
            {
              "expression": "requires_prescription",
              "asc": true,
              "nulls": "last",
              "opclass": "bool_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "where": "(requires_prescription = true)",
          "with": {}
        },
        "idx_store_products_search": {
          "name": "idx_store_products_search",
          "columns": [
            {
              "expression": "to_tsvector('spanish'::regconfig, ((name || ' '::text) || COALE",
              "asc": true,
              "nulls": "last",
              "opclass": "tsvector_ops",
              "isExpression": true
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "gin",
          "where": "(deleted_at IS NULL)",
          "with": {}
        },
        "idx_store_products_species": {
          "name": "idx_store_products_species",
          "columns": [
            {
              "expression": "target_species",
              "asc": true,
              "nulls": "last",
              "opclass": "array_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "gin",
          "where": "(target_species IS NOT NULL)",
          "with": {}
        },
        "idx_store_products_supplier": {
          "name": "idx_store_products_supplier",
          "columns": [
            {
              "expression": "default_supplier_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_store_products_tenant": {
          "name": "idx_store_products_tenant",
          "columns": [
            {
              "expression": "tenant_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_store_products_tenant_sku": {
          "name": "idx_store_products_tenant_sku",
          "columns": [
            {
              "expression": "tenant_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            },
            {
              "expression": "sku",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "where": "((tenant_id IS NOT NULL) AND (sku IS NOT NULL))",
          "with": {}
        },
        "idx_store_products_verification": {
          "name": "idx_store_products_verification",
          "columns": [
            {
              "expression": "verification_status",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "store_products_brand_id_fkey": {
          "name": "store_products_brand_id_fkey",
          "tableFrom": "store_products",
          "tableTo": "store_brands",
          "schemaTo": "public",
          "columnsFrom": [
            "brand_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "store_products_category_id_fkey": {
          "name": "store_products_category_id_fkey",
          "tableFrom": "store_products",
          "tableTo": "store_categories",
          "schemaTo": "public",
          "columnsFrom": [
            "category_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "store_products_created_by_tenant_id_fkey": {
          "name": "store_products_created_by_tenant_id_fkey",
          "tableFrom": "store_products",
          "tableTo": "tenants",
          "schemaTo": "public",
          "columnsFrom": [
            "created_by_tenant_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "store_products_default_supplier_id_fkey": {
          "name": "store_products_default_supplier_id_fkey",
          "tableFrom": "store_products",
          "tableTo": "suppliers",
          "schemaTo": "public",
          "columnsFrom": [
            "default_supplier_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "store_products_deleted_by_fkey": {
          "name": "store_products_deleted_by_fkey",
          "tableFrom": "store_products",
          "tableTo": "profiles",
          "schemaTo": "public",
          "columnsFrom": [
            "deleted_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "store_products_tenant_id_fkey": {
          "name": "store_products_tenant_id_fkey",
          "tableFrom": "store_products",
          "tableTo": "tenants",
          "schemaTo": "public",
          "columnsFrom": [
            "tenant_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "store_products_verified_by_fkey": {
          "name": "store_products_verified_by_fkey",
          "tableFrom": "store_products",
          "tableTo": "profiles",
          "schemaTo": "public",
          "columnsFrom": [
            "verified_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {
        "store_products_base_price_check": {
          "name": "store_products_base_price_check",
          "value": "base_price >= (0)::numeric"
        },
        "store_products_conversion_factor_check": {
          "name": "store_products_conversion_factor_check",
          "value": "conversion_factor > (0)::numeric"
        },
        "store_products_cost_price_check": {
          "name": "store_products_cost_price_check",
          "value": "(cost_price IS NULL) OR (cost_price >= (0)::numeric)"
        },
        "store_products_purchase_price_check": {
          "name": "store_products_purchase_price_check",
          "value": "(purchase_price IS NULL) OR (purchase_price >= (0)::numeric)"
        },
        "store_products_purchase_unit_check": {
          "name": "store_products_purchase_unit_check",
          "value": "purchase_unit = ANY (ARRAY['Unidad'::text, 'Caja'::text, 'Pack'::text, 'Bolsa'::text, 'Frasco'::text, 'Bulto'::text, 'Display'::text, 'Blister'::text, 'Paquete'::text, 'Kg'::text, 'L'::text])"
        },
        "store_products_sale_price_check": {
          "name": "store_products_sale_price_check",
          "value": "(sale_price IS NULL) OR (sale_price >= (0)::numeric)"
        },
        "store_products_sale_unit_check": {
          "name": "store_products_sale_unit_check",
          "value": "sale_unit = ANY (ARRAY['Unidad'::text, 'Tableta'::text, 'Ampolla'::text, 'Cpsula'::text, 'Comprimido'::text, 'ml'::text, 'g'::text, 'Kg'::text, 'Dosis'::text, 'Aplicacin'::text, 'Bolsa'::text, 'Frasco'::text, 'Caja'::text, 'Sobre'::text, 'Pipeta'::text])"
        },
        "store_products_verification_status_check": {
          "name": "store_products_verification_status_check",
          "value": "verification_status = ANY (ARRAY['pending'::text, 'verified'::text, 'rejected'::text, 'needs_review'::text])"
        }
      },
      "policies": {
        "Authenticated users view products": {
          "name": "Authenticated users view products",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "((tenant_id IS NULL) OR (EXISTS ( SELECT 1\n   FROM profiles p\n  WHERE ((p.id = auth.uid()) AND (p.tenant_id = store_products.tenant_id) AND (p.deleted_at IS NULL)))))"
        },
        "Clinic staff manage products": {
          "name": "Clinic staff manage products",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "authenticated"
          ]
        },
        "Platform admins manage global products": {
          "name": "Platform admins manage global products",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "authenticated"
          ]
        },
        "Service role full access products": {
          "name": "Service role full access products",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "service_role"
          ]
        }
      },
      "isRLSEnabled": false
    },
    "public.store_inventory": {
      "name": "store_inventory",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "product_id": {
          "name": "product_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "tenant_id": {
          "name": "tenant_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "stock_quantity": {
          "name": "stock_quantity",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": true,
          "default": "'0'"
        },
        "reserved_quantity": {
          "name": "reserved_quantity",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": false,
          "default": "'0'"
        },
        "available_quantity": {
          "name": "available_quantity",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": false,
          "generated": {
            "as": "(stock_quantity - reserved_quantity)",
            "type": "stored"
          }
        },
        "min_stock_level": {
          "name": "min_stock_level",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": false,
          "default": "'0'"
        },
        "reorder_quantity": {
          "name": "reorder_quantity",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "reorder_point": {
          "name": "reorder_point",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "weighted_average_cost": {
          "name": "weighted_average_cost",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": false,
          "default": "'0'"
        },
        "location": {
          "name": "location",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "bin_number": {
          "name": "bin_number",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "batch_number": {
          "name": "batch_number",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "expiry_date": {
          "name": "expiry_date",
          "type": "date",
          "primaryKey": false,
          "notNull": false
        },
        "supplier_name": {
          "name": "supplier_name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_store_inventory_available": {
          "name": "idx_store_inventory_available",
          "columns": [
            {
              "expression": "tenant_id",
              "asc": true,
              "nulls": "last",
              "opclass": "numeric_ops",
              "isExpression": false
            },
            {
              "expression": "available_quantity",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "where": "(available_quantity > (0)::numeric)",
          "with": {}
        },
        "idx_store_inventory_expiry": {
          "name": "idx_store_inventory_expiry",
          "columns": [
            {
              "expression": "expiry_date",
              "asc": true,
              "nulls": "last",
              "opclass": "date_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "where": "(expiry_date IS NOT NULL)",
          "with": {}
        },
        "idx_store_inventory_product": {
          "name": "idx_store_inventory_product",
          "columns": [
            {
              "expression": "product_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_store_inventory_reorder": {
          "name": "idx_store_inventory_reorder",
          "columns": [
            {
              "expression": "tenant_id",
              "asc": true,
              "nulls": "last",
              "opclass": "numeric_ops",
              "isExpression": false
            },
            {
              "expression": "reorder_point",
              "asc": true,
              "nulls": "last",
              "opclass": "numeric_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "where": "(reorder_point IS NOT NULL)",
          "with": {}
        },
        "idx_store_inventory_tenant": {
          "name": "idx_store_inventory_tenant",
          "columns": [
            {
              "expression": "tenant_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "store_inventory_product_id_fkey": {
          "name": "store_inventory_product_id_fkey",
          "tableFrom": "store_inventory",
          "tableTo": "store_products",
          "schemaTo": "public",
          "columnsFrom": [
            "product_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "store_inventory_tenant_id_fkey": {
          "name": "store_inventory_tenant_id_fkey",
          "tableFrom": "store_inventory",
          "tableTo": "tenants",
          "schemaTo": "public",
          "columnsFrom": [
            "tenant_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "store_inventory_product_id_key": {
          "columns": [
            "product_id"
          ],
          "nullsNotDistinct": false,
          "name": "store_inventory_product_id_key"
        }
      },
      "checkConstraints": {
        "store_inventory_reserved_quantity_check": {
          "name": "store_inventory_reserved_quantity_check",
          "value": "reserved_quantity >= (0)::numeric"
        },
        "store_inventory_reserved_valid": {
          "name": "store_inventory_reserved_valid",
          "value": "COALESCE(reserved_quantity, (0)::numeric) <= stock_quantity"
        },
        "store_inventory_stock_non_negative": {
          "name": "store_inventory_stock_non_negative",
          "value": "stock_quantity >= (0)::numeric"
        }
      },
      "policies": {
        "Clinic staff manage inventory": {
          "name": "Clinic staff manage inventory",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "authenticated"
          ],
          "withCheck": "(EXISTS ( SELECT 1\n   FROM profiles p\n  WHERE ((p.id = auth.uid()) AND (p.tenant_id = store_inventory.tenant_id) AND (p.role = ANY (ARRAY['vet'::text, 'admin'::text])) AND (p.deleted_at IS NULL))))",
          "using": "(EXISTS ( SELECT 1\n   FROM profiles p\n  WHERE ((p.id = auth.uid()) AND (p.tenant_id = store_inventory.tenant_id) AND (p.role = ANY (ARRAY['vet'::text, 'admin'::text])) AND (p.deleted_at IS NULL))))"
        },
        "Service role full access inventory": {
          "name": "Service role full access inventory",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "service_role"
          ]
        }
      },
      "isRLSEnabled": false
    },
    "public.lab_test_panels": {
      "name": "lab_test_panels",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "tenant_id": {
          "name": "tenant_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "code": {
          "name": "code",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "panel_price": {
          "name": "panel_price",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_lab_test_panels_tenant": {
          "name": "idx_lab_test_panels_tenant",
          "columns": [
            {
              "expression": "tenant_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "lab_test_panels_tenant_id_code_key": {
          "columns": [
            "tenant_id",
            "code"
          ],
          "nullsNotDistinct": false,
          "name": "lab_test_panels_tenant_id_code_key"
        }
      },
      "checkConstraints": {},
      "policies": {},
      "isRLSEnabled": true
    },
    "public.lab_panel_tests": {
      "name": "lab_panel_tests",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "panel_id": {
          "name": "panel_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "test_id": {
          "name": "test_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "display_order": {
          "name": "display_order",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        }
      },
      "indexes": {
        "idx_lab_panel_tests_panel": {
          "name": "idx_lab_panel_tests_panel",
          "columns": [
            {
              "expression": "panel_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "lab_panel_tests_panel_id_fkey": {
          "name": "lab_panel_tests_panel_id_fkey",
          "tableFrom": "lab_panel_tests",
          "tableTo": "lab_test_panels",
          "schemaTo": "public",
          "columnsFrom": [
            "panel_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "lab_panel_tests_panel_id_test_id_key": {
          "columns": [
            "panel_id",
            "test_id"
          ],
          "nullsNotDistinct": false,
          "name": "lab_panel_tests_panel_id_test_id_key"
        }
      },
      "checkConstraints": {},
      "policies": {},
      "isRLSEnabled": true
    },
    "public.lab_reference_ranges": {
      "name": "lab_reference_ranges",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "test_id": {
          "name": "test_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "species": {
          "name": "species",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "breed": {
          "name": "breed",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "age_min_months": {
          "name": "age_min_months",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "age_max_months": {
          "name": "age_max_months",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "sex": {
          "name": "sex",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "component_name": {
          "name": "component_name",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'result'"
        },
        "unit": {
          "name": "unit",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "range_low": {
          "name": "range_low",
          "type": "numeric(12, 4)",
          "primaryKey": false,
          "notNull": false
        },
        "range_high": {
          "name": "range_high",
          "type": "numeric(12, 4)",
          "primaryKey": false,
          "notNull": false
        },
        "critical_low": {
          "name": "critical_low",
          "type": "numeric(12, 4)",
          "primaryKey": false,
          "notNull": false
        },
        "critical_high": {
          "name": "critical_high",
          "type": "numeric(12, 4)",
          "primaryKey": false,
          "notNull": false
        },
        "decimal_places": {
          "name": "decimal_places",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 2
        },
        "notes": {
          "name": "notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_lab_reference_ranges_species": {
          "name": "idx_lab_reference_ranges_species",
          "columns": [
            {
              "expression": "species",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_lab_reference_ranges_test": {
          "name": "idx_lab_reference_ranges_test",
          "columns": [
            {
              "expression": "test_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {
        "lab_reference_ranges_sex_check": {
          "name": "lab_reference_ranges_sex_check",
          "value": "sex = ANY (ARRAY['male'::text, 'female'::text, 'neutered_male'::text, 'neutered_female'::text])"
        }
      },
      "policies": {},
      "isRLSEnabled": true
    },
    "public.external_lab_integrations": {
      "name": "external_lab_integrations",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "tenant_id": {
          "name": "tenant_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "lab_name": {
          "name": "lab_name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "lab_code": {
          "name": "lab_code",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "api_endpoint": {
          "name": "api_endpoint",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "credentials": {
          "name": "credentials",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "test_mappings": {
          "name": "test_mappings",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "species_mappings": {
          "name": "species_mappings",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "auto_send_orders": {
          "name": "auto_send_orders",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "auto_receive_results": {
          "name": "auto_receive_results",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": true
        },
        "last_sync_at": {
          "name": "last_sync_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "last_error": {
          "name": "last_error",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "external_lab_integrations_tenant_id_lab_code_key": {
          "columns": [
            "tenant_id",
            "lab_code"
          ],
          "nullsNotDistinct": false,
          "name": "external_lab_integrations_tenant_id_lab_code_key"
        }
      },
      "checkConstraints": {},
      "policies": {},
      "isRLSEnabled": true
    },
    "public.store_campaigns": {
      "name": "store_campaigns",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "tenant_id": {
          "name": "tenant_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "campaign_type": {
          "name": "campaign_type",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "default": "'sale'"
        },
        "start_date": {
          "name": "start_date",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true
        },
        "end_date": {
          "name": "end_date",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true
        },
        "discount_type": {
          "name": "discount_type",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "discount_value": {
          "name": "discount_value",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": true
        },
        "deleted_at": {
          "name": "deleted_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "deleted_by": {
          "name": "deleted_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_store_campaigns_active": {
          "name": "idx_store_campaigns_active",
          "columns": [
            {
              "expression": "tenant_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            },
            {
              "expression": "is_active",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            },
            {
              "expression": "start_date",
              "asc": true,
              "nulls": "last",
              "opclass": "timestamptz_ops",
              "isExpression": false
            },
            {
              "expression": "end_date",
              "asc": true,
              "nulls": "last",
              "opclass": "bool_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "where": "((is_active = true) AND (deleted_at IS NULL))",
          "with": {}
        },
        "idx_store_campaigns_dates": {
          "name": "idx_store_campaigns_dates",
          "columns": [
            {
              "expression": "start_date",
              "asc": true,
              "nulls": "last",
              "opclass": "timestamptz_ops",
              "isExpression": false
            },
            {
              "expression": "end_date",
              "asc": true,
              "nulls": "last",
              "opclass": "timestamptz_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "where": "(deleted_at IS NULL)",
          "with": {}
        },
        "idx_store_campaigns_tenant": {
          "name": "idx_store_campaigns_tenant",
          "columns": [
            {
              "expression": "tenant_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_store_campaigns_type": {
          "name": "idx_store_campaigns_type",
          "columns": [
            {
              "expression": "campaign_type",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "store_campaigns_deleted_by_fkey": {
          "name": "store_campaigns_deleted_by_fkey",
          "tableFrom": "store_campaigns",
          "tableTo": "profiles",
          "schemaTo": "public",
          "columnsFrom": [
            "deleted_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "store_campaigns_tenant_id_fkey": {
          "name": "store_campaigns_tenant_id_fkey",
          "tableFrom": "store_campaigns",
          "tableTo": "tenants",
          "schemaTo": "public",
          "columnsFrom": [
            "tenant_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {
        "store_campaigns_campaign_type_check": {
          "name": "store_campaigns_campaign_type_check",
          "value": "campaign_type = ANY (ARRAY['sale'::text, 'bogo'::text, 'bundle'::text, 'flash'::text, 'seasonal'::text])"
        },
        "store_campaigns_dates": {
          "name": "store_campaigns_dates",
          "value": "end_date > start_date"
        },
        "store_campaigns_discount_type_check": {
          "name": "store_campaigns_discount_type_check",
          "value": "discount_type = ANY (ARRAY['percentage'::text, 'fixed_amount'::text])"
        }
      },
      "policies": {
        "Clinic staff manage campaigns": {
          "name": "Clinic staff manage campaigns",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "authenticated"
          ],
          "withCheck": "(EXISTS ( SELECT 1\n   FROM profiles p\n  WHERE ((p.id = auth.uid()) AND (p.tenant_id = store_campaigns.tenant_id) AND (p.role = ANY (ARRAY['vet'::text, 'admin'::text])) AND (p.deleted_at IS NULL))))",
          "using": "(EXISTS ( SELECT 1\n   FROM profiles p\n  WHERE ((p.id = auth.uid()) AND (p.tenant_id = store_campaigns.tenant_id) AND (p.role = ANY (ARRAY['vet'::text, 'admin'::text])) AND (p.deleted_at IS NULL))))"
        },
        "Service role full access campaigns": {
          "name": "Service role full access campaigns",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "service_role"
          ]
        }
      },
      "isRLSEnabled": true
    },
    "public.store_coupons": {
      "name": "store_coupons",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "tenant_id": {
          "name": "tenant_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "code": {
          "name": "code",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "type": {
          "name": "type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "value": {
          "name": "value",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": true
        },
        "minimum_order_amount": {
          "name": "minimum_order_amount",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "applicable_categories": {
          "name": "applicable_categories",
          "type": "uuid[]",
          "primaryKey": false,
          "notNull": false
        },
        "applicable_products": {
          "name": "applicable_products",
          "type": "uuid[]",
          "primaryKey": false,
          "notNull": false
        },
        "usage_limit": {
          "name": "usage_limit",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "usage_limit_per_user": {
          "name": "usage_limit_per_user",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "used_count": {
          "name": "used_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "starts_at": {
          "name": "starts_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "expires_at": {
          "name": "expires_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": true
        },
        "created_by": {
          "name": "created_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_store_coupons_code": {
          "name": "idx_store_coupons_code",
          "columns": [
            {
              "expression": "code",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_store_coupons_tenant": {
          "name": "idx_store_coupons_tenant",
          "columns": [
            {
              "expression": "tenant_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "store_coupons_created_by_fkey": {
          "name": "store_coupons_created_by_fkey",
          "tableFrom": "store_coupons",
          "tableTo": "profiles",
          "schemaTo": "public",
          "columnsFrom": [
            "created_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "store_coupons_tenant_id_fkey": {
          "name": "store_coupons_tenant_id_fkey",
          "tableFrom": "store_coupons",
          "tableTo": "tenants",
          "schemaTo": "public",
          "columnsFrom": [
            "tenant_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "store_coupons_tenant_id_code_key": {
          "columns": [
            "tenant_id",
            "code"
          ],
          "nullsNotDistinct": false,
          "name": "store_coupons_tenant_id_code_key"
        }
      },
      "checkConstraints": {
        "store_coupons_type_check": {
          "name": "store_coupons_type_check",
          "value": "type = ANY (ARRAY['percentage'::text, 'fixed_amount'::text, 'free_shipping'::text])"
        },
        "store_coupons_value_check": {
          "name": "store_coupons_value_check",
          "value": "value > (0)::numeric"
        }
      },
      "policies": {
        "Clinic staff manage coupons": {
          "name": "Clinic staff manage coupons",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "authenticated"
          ],
          "withCheck": "(EXISTS ( SELECT 1\n   FROM profiles p\n  WHERE ((p.id = auth.uid()) AND (p.tenant_id = store_coupons.tenant_id) AND (p.role = ANY (ARRAY['vet'::text, 'admin'::text])) AND (p.deleted_at IS NULL))))",
          "using": "(EXISTS ( SELECT 1\n   FROM profiles p\n  WHERE ((p.id = auth.uid()) AND (p.tenant_id = store_coupons.tenant_id) AND (p.role = ANY (ARRAY['vet'::text, 'admin'::text])) AND (p.deleted_at IS NULL))))"
        },
        "Service role full access coupons": {
          "name": "Service role full access coupons",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "service_role"
          ]
        }
      },
      "isRLSEnabled": true
    },
    "public.store_orders": {
      "name": "store_orders",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "tenant_id": {
          "name": "tenant_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "order_number": {
          "name": "order_number",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "customer_id": {
          "name": "customer_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'pending'"
        },
        "subtotal": {
          "name": "subtotal",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": true,
          "default": "'0'"
        },
        "discount_amount": {
          "name": "discount_amount",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": false,
          "default": "'0'"
        },
        "shipping_cost": {
          "name": "shipping_cost",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": false,
          "default": "'0'"
        },
        "tax_amount": {
          "name": "tax_amount",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": false,
          "default": "'0'"
        },
        "total": {
          "name": "total",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": true,
          "default": "'0'"
        },
        "shipping_address": {
          "name": "shipping_address",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "shipping_method": {
          "name": "shipping_method",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "tracking_number": {
          "name": "tracking_number",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "payment_status": {
          "name": "payment_status",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "default": "'pending'"
        },
        "payment_method": {
          "name": "payment_method",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "payment_reference": {
          "name": "payment_reference",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "coupon_id": {
          "name": "coupon_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "coupon_code": {
          "name": "coupon_code",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "customer_notes": {
          "name": "customer_notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "internal_notes": {
          "name": "internal_notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "confirmed_at": {
          "name": "confirmed_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "shipped_at": {
          "name": "shipped_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "delivered_at": {
          "name": "delivered_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "cancelled_at": {
          "name": "cancelled_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "cancelled_by": {
          "name": "cancelled_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "cancellation_reason": {
          "name": "cancellation_reason",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "deleted_at": {
          "name": "deleted_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "deleted_by": {
          "name": "deleted_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_store_orders_created": {
          "name": "idx_store_orders_created",
          "columns": [
            {
              "expression": "created_at",
              "asc": false,
              "nulls": "first",
              "opclass": "timestamptz_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_store_orders_customer": {
          "name": "idx_store_orders_customer",
          "columns": [
            {
              "expression": "customer_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_store_orders_number": {
          "name": "idx_store_orders_number",
          "columns": [
            {
              "expression": "order_number",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_store_orders_payment_status": {
          "name": "idx_store_orders_payment_status",
          "columns": [
            {
              "expression": "payment_status",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_store_orders_status": {
          "name": "idx_store_orders_status",
          "columns": [
            {
              "expression": "status",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_store_orders_tenant": {
          "name": "idx_store_orders_tenant",
          "columns": [
            {
              "expression": "tenant_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "store_orders_cancelled_by_fkey": {
          "name": "store_orders_cancelled_by_fkey",
          "tableFrom": "store_orders",
          "tableTo": "profiles",
          "schemaTo": "public",
          "columnsFrom": [
            "cancelled_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "store_orders_coupon_id_fkey": {
          "name": "store_orders_coupon_id_fkey",
          "tableFrom": "store_orders",
          "tableTo": "store_coupons",
          "schemaTo": "public",
          "columnsFrom": [
            "coupon_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "store_orders_customer_id_fkey": {
          "name": "store_orders_customer_id_fkey",
          "tableFrom": "store_orders",
          "tableTo": "profiles",
          "schemaTo": "public",
          "columnsFrom": [
            "customer_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "store_orders_deleted_by_fkey": {
          "name": "store_orders_deleted_by_fkey",
          "tableFrom": "store_orders",
          "tableTo": "profiles",
          "schemaTo": "public",
          "columnsFrom": [
            "deleted_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "store_orders_tenant_id_fkey": {
          "name": "store_orders_tenant_id_fkey",
          "tableFrom": "store_orders",
          "tableTo": "tenants",
          "schemaTo": "public",
          "columnsFrom": [
            "tenant_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "store_orders_tenant_id_order_number_key": {
          "columns": [
            "tenant_id",
            "order_number"
          ],
          "nullsNotDistinct": false,
          "name": "store_orders_tenant_id_order_number_key"
        }
      },
      "checkConstraints": {
        "store_orders_payment_status_check": {
          "name": "store_orders_payment_status_check",
          "value": "payment_status = ANY (ARRAY['pending'::text, 'paid'::text, 'failed'::text, 'refunded'::text])"
        },
        "store_orders_status_check": {
          "name": "store_orders_status_check",
          "value": "status = ANY (ARRAY['pending'::text, 'confirmed'::text, 'processing'::text, 'ready'::text, 'shipped'::text, 'delivered'::text, 'cancelled'::text, 'refunded'::text])"
        }
      },
      "policies": {
        "Clinic staff manage orders": {
          "name": "Clinic staff manage orders",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "authenticated"
          ],
          "withCheck": "(EXISTS ( SELECT 1\n   FROM profiles p\n  WHERE ((p.id = auth.uid()) AND (p.tenant_id = store_orders.tenant_id) AND (p.role = ANY (ARRAY['vet'::text, 'admin'::text])) AND (p.deleted_at IS NULL))))",
          "using": "(EXISTS ( SELECT 1\n   FROM profiles p\n  WHERE ((p.id = auth.uid()) AND (p.tenant_id = store_orders.tenant_id) AND (p.role = ANY (ARRAY['vet'::text, 'admin'::text])) AND (p.deleted_at IS NULL))))"
        },
        "Customers view own orders": {
          "name": "Customers view own orders",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ]
        },
        "Service role full access orders": {
          "name": "Service role full access orders",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "service_role"
          ]
        }
      },
      "isRLSEnabled": true
    },
    "public.store_order_items": {
      "name": "store_order_items",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "tenant_id": {
          "name": "tenant_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "order_id": {
          "name": "order_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "product_id": {
          "name": "product_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "quantity": {
          "name": "quantity",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": true
        },
        "unit_price": {
          "name": "unit_price",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": true
        },
        "discount_amount": {
          "name": "discount_amount",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": false,
          "default": "'0'"
        },
        "total_price": {
          "name": "total_price",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": true
        },
        "product_name": {
          "name": "product_name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "product_sku": {
          "name": "product_sku",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "product_image_url": {
          "name": "product_image_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "notes": {
          "name": "notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_store_order_items_order": {
          "name": "idx_store_order_items_order",
          "columns": [
            {
              "expression": "order_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_store_order_items_product": {
          "name": "idx_store_order_items_product",
          "columns": [
            {
              "expression": "product_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_store_order_items_tenant": {
          "name": "idx_store_order_items_tenant",
          "columns": [
            {
              "expression": "tenant_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "store_order_items_order_id_fkey": {
          "name": "store_order_items_order_id_fkey",
          "tableFrom": "store_order_items",
          "tableTo": "store_orders",
          "schemaTo": "public",
          "columnsFrom": [
            "order_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "store_order_items_product_id_fkey": {
          "name": "store_order_items_product_id_fkey",
          "tableFrom": "store_order_items",
          "tableTo": "store_products",
          "schemaTo": "public",
          "columnsFrom": [
            "product_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "store_order_items_tenant_id_fkey": {
          "name": "store_order_items_tenant_id_fkey",
          "tableFrom": "store_order_items",
          "tableTo": "tenants",
          "schemaTo": "public",
          "columnsFrom": [
            "tenant_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {
        "store_order_items_quantity_check": {
          "name": "store_order_items_quantity_check",
          "value": "quantity > (0)::numeric"
        },
        "store_order_items_unit_price_check": {
          "name": "store_order_items_unit_price_check",
          "value": "unit_price >= (0)::numeric"
        }
      },
      "policies": {
        "Customers view own order_items": {
          "name": "Customers view own order_items",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "(EXISTS ( SELECT 1\n   FROM store_orders o\n  WHERE ((o.id = store_order_items.order_id) AND (o.customer_id = auth.uid()))))"
        },
        "Service role full access order_items": {
          "name": "Service role full access order_items",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "service_role"
          ]
        }
      },
      "isRLSEnabled": true
    },
    "public.consent_template_fields": {
      "name": "consent_template_fields",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "template_id": {
          "name": "template_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "field_name": {
          "name": "field_name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "field_label": {
          "name": "field_label",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "field_type": {
          "name": "field_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "is_required": {
          "name": "is_required",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "default_value": {
          "name": "default_value",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "options": {
          "name": "options",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "validation_regex": {
          "name": "validation_regex",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "min_length": {
          "name": "min_length",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "max_length": {
          "name": "max_length",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "display_order": {
          "name": "display_order",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "help_text": {
          "name": "help_text",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "placeholder": {
          "name": "placeholder",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_consent_template_fields_template": {
          "name": "idx_consent_template_fields_template",
          "columns": [
            {
              "expression": "template_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {
        "consent_template_fields_field_type_check": {
          "name": "consent_template_fields_field_type_check",
          "value": "field_type = ANY (ARRAY['text'::text, 'number'::text, 'date'::text, 'checkbox'::text, 'radio'::text, 'select'::text, 'textarea'::text, 'signature'::text])"
        }
      },
      "policies": {},
      "isRLSEnabled": true
    },
    "public.consent_audit_log": {
      "name": "consent_audit_log",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "consent_document_id": {
          "name": "consent_document_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "action": {
          "name": "action",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "performed_by": {
          "name": "performed_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "performed_by_name": {
          "name": "performed_by_name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "details": {
          "name": "details",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "ip_address": {
          "name": "ip_address",
          "type": "inet",
          "primaryKey": false,
          "notNull": false
        },
        "user_agent": {
          "name": "user_agent",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_consent_audit_document": {
          "name": "idx_consent_audit_document",
          "columns": [
            {
              "expression": "consent_document_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "consent_audit_log_performed_by_fkey": {
          "name": "consent_audit_log_performed_by_fkey",
          "tableFrom": "consent_audit_log",
          "tableTo": "users",
          "schemaTo": "auth",
          "columnsFrom": [
            "performed_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {
        "consent_audit_log_action_check": {
          "name": "consent_audit_log_action_check",
          "value": "action = ANY (ARRAY['created'::text, 'viewed'::text, 'signed'::text, 'witnessed'::text, 'revoked'::text, 'expired'::text, 'pdf_generated'::text, 'pdf_downloaded'::text, 'emailed'::text, 'printed'::text])"
        }
      },
      "policies": {},
      "isRLSEnabled": true
    },
    "public.consent_requests": {
      "name": "consent_requests",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "tenant_id": {
          "name": "tenant_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "template_id": {
          "name": "template_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "request_token": {
          "name": "request_token",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "encode(gen_random_bytes(32), 'hex'::text)"
        },
        "pet_id": {
          "name": "pet_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "appointment_id": {
          "name": "appointment_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "recipient_name": {
          "name": "recipient_name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "recipient_email": {
          "name": "recipient_email",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "recipient_phone": {
          "name": "recipient_phone",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "prefilled_data": {
          "name": "prefilled_data",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "requested_by": {
          "name": "requested_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "requested_at": {
          "name": "requested_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "expires_at": {
          "name": "expires_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true
        },
        "reminder_sent_at": {
          "name": "reminder_sent_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'pending'"
        },
        "consent_document_id": {
          "name": "consent_document_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "message": {
          "name": "message",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_consent_requests_status": {
          "name": "idx_consent_requests_status",
          "columns": [
            {
              "expression": "status",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_consent_requests_tenant": {
          "name": "idx_consent_requests_tenant",
          "columns": [
            {
              "expression": "tenant_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_consent_requests_token": {
          "name": "idx_consent_requests_token",
          "columns": [
            {
              "expression": "request_token",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "consent_requests_requested_by_fkey": {
          "name": "consent_requests_requested_by_fkey",
          "tableFrom": "consent_requests",
          "tableTo": "users",
          "schemaTo": "auth",
          "columnsFrom": [
            "requested_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "consent_requests_request_token_key": {
          "columns": [
            "request_token"
          ],
          "nullsNotDistinct": false,
          "name": "consent_requests_request_token_key"
        }
      },
      "checkConstraints": {
        "consent_requests_status_check": {
          "name": "consent_requests_status_check",
          "value": "status = ANY (ARRAY['pending'::text, 'sent'::text, 'viewed'::text, 'signed'::text, 'expired'::text, 'cancelled'::text])"
        }
      },
      "policies": {},
      "isRLSEnabled": true
    },
    "public.blanket_consents": {
      "name": "blanket_consents",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "tenant_id": {
          "name": "tenant_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "owner_id": {
          "name": "owner_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "consent_type": {
          "name": "consent_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "pet_id": {
          "name": "pet_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "max_amount": {
          "name": "max_amount",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "valid_procedures": {
          "name": "valid_procedures",
          "type": "text[]",
          "primaryKey": false,
          "notNull": false
        },
        "granted_at": {
          "name": "granted_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "expires_at": {
          "name": "expires_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "revoked_at": {
          "name": "revoked_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": true
        },
        "signature_data": {
          "name": "signature_data",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "consent_document_id": {
          "name": "consent_document_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "notes": {
          "name": "notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_blanket_consents_owner": {
          "name": "idx_blanket_consents_owner",
          "columns": [
            {
              "expression": "owner_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_blanket_consents_tenant": {
          "name": "idx_blanket_consents_tenant",
          "columns": [
            {
              "expression": "tenant_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "blanket_consents_owner_id_fkey": {
          "name": "blanket_consents_owner_id_fkey",
          "tableFrom": "blanket_consents",
          "tableTo": "users",
          "schemaTo": "auth",
          "columnsFrom": [
            "owner_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "blanket_consents_tenant_id_owner_id_consent_type_pet_id_key": {
          "columns": [
            "tenant_id",
            "owner_id",
            "consent_type",
            "pet_id"
          ],
          "nullsNotDistinct": false,
          "name": "blanket_consents_tenant_id_owner_id_consent_type_pet_id_key"
        }
      },
      "checkConstraints": {
        "blanket_consents_consent_type_check": {
          "name": "blanket_consents_consent_type_check",
          "value": "consent_type = ANY (ARRAY['emergency_treatment'::text, 'routine_care'::text, 'vaccination'::text, 'diagnostic_imaging'::text, 'blood_work'::text, 'medication'::text, 'minor_procedures'::text, 'communication'::text, 'photo_release'::text])"
        }
      },
      "policies": {},
      "isRLSEnabled": true
    },
    "public.store_reviews": {
      "name": "store_reviews",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "tenant_id": {
          "name": "tenant_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "product_id": {
          "name": "product_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "customer_id": {
          "name": "customer_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "order_id": {
          "name": "order_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "rating": {
          "name": "rating",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "title": {
          "name": "title",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "content": {
          "name": "content",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "is_approved": {
          "name": "is_approved",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "approved_by": {
          "name": "approved_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "approved_at": {
          "name": "approved_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "deleted_at": {
          "name": "deleted_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_store_reviews_approved": {
          "name": "idx_store_reviews_approved",
          "columns": [
            {
              "expression": "is_approved",
              "asc": true,
              "nulls": "last",
              "opclass": "timestamptz_ops",
              "isExpression": false
            },
            {
              "expression": "created_at",
              "asc": false,
              "nulls": "first",
              "opclass": "bool_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "where": "((is_approved = true) AND (deleted_at IS NULL))",
          "with": {}
        },
        "idx_store_reviews_customer": {
          "name": "idx_store_reviews_customer",
          "columns": [
            {
              "expression": "customer_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_store_reviews_product": {
          "name": "idx_store_reviews_product",
          "columns": [
            {
              "expression": "product_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_store_reviews_rating": {
          "name": "idx_store_reviews_rating",
          "columns": [
            {
              "expression": "rating",
              "asc": true,
              "nulls": "last",
              "opclass": "int4_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_store_reviews_tenant": {
          "name": "idx_store_reviews_tenant",
          "columns": [
            {
              "expression": "tenant_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "store_reviews_approved_by_fkey": {
          "name": "store_reviews_approved_by_fkey",
          "tableFrom": "store_reviews",
          "tableTo": "profiles",
          "schemaTo": "public",
          "columnsFrom": [
            "approved_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "store_reviews_customer_id_fkey": {
          "name": "store_reviews_customer_id_fkey",
          "tableFrom": "store_reviews",
          "tableTo": "profiles",
          "schemaTo": "public",
          "columnsFrom": [
            "customer_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "store_reviews_order_id_fkey": {
          "name": "store_reviews_order_id_fkey",
          "tableFrom": "store_reviews",
          "tableTo": "store_orders",
          "schemaTo": "public",
          "columnsFrom": [
            "order_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "store_reviews_product_id_fkey": {
          "name": "store_reviews_product_id_fkey",
          "tableFrom": "store_reviews",
          "tableTo": "store_products",
          "schemaTo": "public",
          "columnsFrom": [
            "product_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "store_reviews_tenant_id_fkey": {
          "name": "store_reviews_tenant_id_fkey",
          "tableFrom": "store_reviews",
          "tableTo": "tenants",
          "schemaTo": "public",
          "columnsFrom": [
            "tenant_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "store_reviews_product_id_customer_id_key": {
          "columns": [
            "product_id",
            "customer_id"
          ],
          "nullsNotDistinct": false,
          "name": "store_reviews_product_id_customer_id_key"
        }
      },
      "checkConstraints": {
        "store_reviews_rating_check": {
          "name": "store_reviews_rating_check",
          "value": "(rating >= 1) AND (rating <= 5)"
        }
      },
      "policies": {
        "Clinic staff moderate reviews": {
          "name": "Clinic staff moderate reviews",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "authenticated"
          ],
          "withCheck": "(EXISTS ( SELECT 1\n   FROM profiles p\n  WHERE ((p.id = auth.uid()) AND (p.tenant_id = store_reviews.tenant_id) AND (p.role = ANY (ARRAY['vet'::text, 'admin'::text])) AND (p.deleted_at IS NULL))))",
          "using": "(EXISTS ( SELECT 1\n   FROM profiles p\n  WHERE ((p.id = auth.uid()) AND (p.tenant_id = store_reviews.tenant_id) AND (p.role = ANY (ARRAY['vet'::text, 'admin'::text])) AND (p.deleted_at IS NULL))))"
        },
        "Customers manage own reviews": {
          "name": "Customers manage own reviews",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "authenticated"
          ]
        },
        "Public view approved reviews": {
          "name": "Public view approved reviews",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "public"
          ]
        },
        "Service role full access reviews": {
          "name": "Service role full access reviews",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "service_role"
          ]
        }
      },
      "isRLSEnabled": true
    },
    "public.store_wishlist": {
      "name": "store_wishlist",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "tenant_id": {
          "name": "tenant_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "customer_id": {
          "name": "customer_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "product_id": {
          "name": "product_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_store_wishlist_customer": {
          "name": "idx_store_wishlist_customer",
          "columns": [
            {
              "expression": "customer_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_store_wishlist_product": {
          "name": "idx_store_wishlist_product",
          "columns": [
            {
              "expression": "product_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_store_wishlist_tenant": {
          "name": "idx_store_wishlist_tenant",
          "columns": [
            {
              "expression": "tenant_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "store_wishlist_customer_id_fkey": {
          "name": "store_wishlist_customer_id_fkey",
          "tableFrom": "store_wishlist",
          "tableTo": "profiles",
          "schemaTo": "public",
          "columnsFrom": [
            "customer_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "store_wishlist_product_id_fkey": {
          "name": "store_wishlist_product_id_fkey",
          "tableFrom": "store_wishlist",
          "tableTo": "store_products",
          "schemaTo": "public",
          "columnsFrom": [
            "product_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "store_wishlist_tenant_id_fkey": {
          "name": "store_wishlist_tenant_id_fkey",
          "tableFrom": "store_wishlist",
          "tableTo": "tenants",
          "schemaTo": "public",
          "columnsFrom": [
            "tenant_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "store_wishlist_customer_id_product_id_key": {
          "columns": [
            "customer_id",
            "product_id"
          ],
          "nullsNotDistinct": false,
          "name": "store_wishlist_customer_id_product_id_key"
        }
      },
      "checkConstraints": {},
      "policies": {
        "Customers manage own wishlist": {
          "name": "Customers manage own wishlist",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "authenticated"
          ],
          "withCheck": "(customer_id = auth.uid())",
          "using": "(customer_id = auth.uid())"
        },
        "Service role full access wishlist": {
          "name": "Service role full access wishlist",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "service_role"
          ]
        }
      },
      "isRLSEnabled": true
    },
    "public.procurement_leads": {
      "name": "procurement_leads",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "tenant_id": {
          "name": "tenant_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "raw_product_name": {
          "name": "raw_product_name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "raw_brand_name": {
          "name": "raw_brand_name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "raw_supplier_name": {
          "name": "raw_supplier_name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "raw_price_paid": {
          "name": "raw_price_paid",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "raw_quantity": {
          "name": "raw_quantity",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "raw_unit": {
          "name": "raw_unit",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "raw_invoice_date": {
          "name": "raw_invoice_date",
          "type": "date",
          "primaryKey": false,
          "notNull": false
        },
        "raw_data": {
          "name": "raw_data",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "matched_product_id": {
          "name": "matched_product_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "matched_brand_id": {
          "name": "matched_brand_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "matched_supplier_id": {
          "name": "matched_supplier_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "matched_category_id": {
          "name": "matched_category_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "default": "'new'"
        },
        "match_confidence": {
          "name": "match_confidence",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "converted_product_id": {
          "name": "converted_product_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "converted_at": {
          "name": "converted_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "converted_by": {
          "name": "converted_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "is_new_product": {
          "name": "is_new_product",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "is_new_brand": {
          "name": "is_new_brand",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "is_new_supplier": {
          "name": "is_new_supplier",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "price_variance": {
          "name": "price_variance",
          "type": "numeric(5, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "detected_at": {
          "name": "detected_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "processed_at": {
          "name": "processed_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "processed_by": {
          "name": "processed_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_procurement_leads_confidence": {
          "name": "idx_procurement_leads_confidence",
          "columns": [
            {
              "expression": "match_confidence",
              "asc": true,
              "nulls": "last",
              "opclass": "int4_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_procurement_leads_matched_product": {
          "name": "idx_procurement_leads_matched_product",
          "columns": [
            {
              "expression": "matched_product_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_procurement_leads_new_flags": {
          "name": "idx_procurement_leads_new_flags",
          "columns": [
            {
              "expression": "is_new_product",
              "asc": true,
              "nulls": "last",
              "opclass": "bool_ops",
              "isExpression": false
            },
            {
              "expression": "is_new_brand",
              "asc": true,
              "nulls": "last",
              "opclass": "bool_ops",
              "isExpression": false
            },
            {
              "expression": "is_new_supplier",
              "asc": true,
              "nulls": "last",
              "opclass": "bool_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "where": "((is_new_product = true) OR (is_new_brand = true) OR (is_new_supplier = true))",
          "with": {}
        },
        "idx_procurement_leads_status": {
          "name": "idx_procurement_leads_status",
          "columns": [
            {
              "expression": "status",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_procurement_leads_tenant": {
          "name": "idx_procurement_leads_tenant",
          "columns": [
            {
              "expression": "tenant_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "procurement_leads_converted_by_fkey": {
          "name": "procurement_leads_converted_by_fkey",
          "tableFrom": "procurement_leads",
          "tableTo": "profiles",
          "schemaTo": "public",
          "columnsFrom": [
            "converted_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "procurement_leads_converted_product_id_fkey": {
          "name": "procurement_leads_converted_product_id_fkey",
          "tableFrom": "procurement_leads",
          "tableTo": "store_products",
          "schemaTo": "public",
          "columnsFrom": [
            "converted_product_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "procurement_leads_matched_brand_id_fkey": {
          "name": "procurement_leads_matched_brand_id_fkey",
          "tableFrom": "procurement_leads",
          "tableTo": "store_brands",
          "schemaTo": "public",
          "columnsFrom": [
            "matched_brand_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "procurement_leads_matched_category_id_fkey": {
          "name": "procurement_leads_matched_category_id_fkey",
          "tableFrom": "procurement_leads",
          "tableTo": "store_categories",
          "schemaTo": "public",
          "columnsFrom": [
            "matched_category_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "procurement_leads_matched_product_id_fkey": {
          "name": "procurement_leads_matched_product_id_fkey",
          "tableFrom": "procurement_leads",
          "tableTo": "store_products",
          "schemaTo": "public",
          "columnsFrom": [
            "matched_product_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "procurement_leads_matched_supplier_id_fkey": {
          "name": "procurement_leads_matched_supplier_id_fkey",
          "tableFrom": "procurement_leads",
          "tableTo": "suppliers",
          "schemaTo": "public",
          "columnsFrom": [
            "matched_supplier_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "procurement_leads_processed_by_fkey": {
          "name": "procurement_leads_processed_by_fkey",
          "tableFrom": "procurement_leads",
          "tableTo": "profiles",
          "schemaTo": "public",
          "columnsFrom": [
            "processed_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "procurement_leads_tenant_id_fkey": {
          "name": "procurement_leads_tenant_id_fkey",
          "tableFrom": "procurement_leads",
          "tableTo": "tenants",
          "schemaTo": "public",
          "columnsFrom": [
            "tenant_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {
        "procurement_leads_match_confidence_check": {
          "name": "procurement_leads_match_confidence_check",
          "value": "(match_confidence IS NULL) OR ((match_confidence >= 0) AND (match_confidence <= 100))"
        },
        "procurement_leads_status_check": {
          "name": "procurement_leads_status_check",
          "value": "status = ANY (ARRAY['new'::text, 'processing'::text, 'matched'::text, 'unmatched'::text, 'ignored'::text, 'converted'::text])"
        }
      },
      "policies": {
        "Clinic staff manage procurement": {
          "name": "Clinic staff manage procurement",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "authenticated"
          ],
          "withCheck": "(EXISTS ( SELECT 1\n   FROM profiles p\n  WHERE ((p.id = auth.uid()) AND (p.tenant_id = procurement_leads.tenant_id) AND (p.role = ANY (ARRAY['vet'::text, 'admin'::text])) AND (p.deleted_at IS NULL))))",
          "using": "(EXISTS ( SELECT 1\n   FROM profiles p\n  WHERE ((p.id = auth.uid()) AND (p.tenant_id = procurement_leads.tenant_id) AND (p.role = ANY (ARRAY['vet'::text, 'admin'::text])) AND (p.deleted_at IS NULL))))"
        },
        "Platform admins view procurement": {
          "name": "Platform admins view procurement",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ]
        },
        "Service role full access procurement": {
          "name": "Service role full access procurement",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "service_role"
          ]
        }
      },
      "isRLSEnabled": true
    },
    "public.staff_shifts": {
      "name": "staff_shifts",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "staff_profile_id": {
          "name": "staff_profile_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "tenant_id": {
          "name": "tenant_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "scheduled_start": {
          "name": "scheduled_start",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true
        },
        "scheduled_end": {
          "name": "scheduled_end",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true
        },
        "actual_start": {
          "name": "actual_start",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "actual_end": {
          "name": "actual_end",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "break_minutes": {
          "name": "break_minutes",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "shift_type": {
          "name": "shift_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'regular'"
        },
        "location": {
          "name": "location",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'scheduled'"
        },
        "clock_in_at": {
          "name": "clock_in_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "clock_out_at": {
          "name": "clock_out_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "clock_in_method": {
          "name": "clock_in_method",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "notes": {
          "name": "notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_staff_shifts_dates": {
          "name": "idx_staff_shifts_dates",
          "columns": [
            {
              "expression": "scheduled_start",
              "asc": true,
              "nulls": "last",
              "opclass": "timestamptz_ops",
              "isExpression": false
            },
            {
              "expression": "scheduled_end",
              "asc": true,
              "nulls": "last",
              "opclass": "timestamptz_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_staff_shifts_profile": {
          "name": "idx_staff_shifts_profile",
          "columns": [
            {
              "expression": "staff_profile_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_staff_shifts_tenant": {
          "name": "idx_staff_shifts_tenant",
          "columns": [
            {
              "expression": "tenant_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {
        "staff_shifts_clock_in_method_check": {
          "name": "staff_shifts_clock_in_method_check",
          "value": "clock_in_method = ANY (ARRAY['manual'::text, 'badge'::text, 'biometric'::text, 'app'::text])"
        },
        "staff_shifts_shift_type_check": {
          "name": "staff_shifts_shift_type_check",
          "value": "shift_type = ANY (ARRAY['regular'::text, 'overtime'::text, 'on_call'::text, 'emergency'::text, 'training'::text, 'meeting'::text])"
        },
        "staff_shifts_status_check": {
          "name": "staff_shifts_status_check",
          "value": "status = ANY (ARRAY['scheduled'::text, 'confirmed'::text, 'in_progress'::text, 'completed'::text, 'no_show'::text, 'cancelled'::text])"
        }
      },
      "policies": {},
      "isRLSEnabled": true
    },
    "public.payment_methods": {
      "name": "payment_methods",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "tenant_id": {
          "name": "tenant_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "type": {
          "name": "type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "is_default": {
          "name": "is_default",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": true
        },
        "requires_reference": {
          "name": "requires_reference",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "fee_percentage": {
          "name": "fee_percentage",
          "type": "numeric(5, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "min_amount": {
          "name": "min_amount",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "max_amount": {
          "name": "max_amount",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "instructions": {
          "name": "instructions",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "display_order": {
          "name": "display_order",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 100
        },
        "icon": {
          "name": "icon",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "deleted_at": {
          "name": "deleted_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "deleted_by": {
          "name": "deleted_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_payment_methods_active": {
          "name": "idx_payment_methods_active",
          "columns": [
            {
              "expression": "is_active",
              "asc": true,
              "nulls": "last",
              "opclass": "bool_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "where": "((is_active = true) AND (deleted_at IS NULL))",
          "with": {}
        },
        "idx_payment_methods_one_default": {
          "name": "idx_payment_methods_one_default",
          "columns": [
            {
              "expression": "tenant_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "where": "((is_default = true) AND (is_active = true) AND (deleted_at IS NULL))",
          "with": {}
        },
        "idx_payment_methods_tenant": {
          "name": "idx_payment_methods_tenant",
          "columns": [
            {
              "expression": "tenant_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "payment_methods_deleted_by_fkey": {
          "name": "payment_methods_deleted_by_fkey",
          "tableFrom": "payment_methods",
          "tableTo": "profiles",
          "schemaTo": "public",
          "columnsFrom": [
            "deleted_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "payment_methods_tenant_id_fkey": {
          "name": "payment_methods_tenant_id_fkey",
          "tableFrom": "payment_methods",
          "tableTo": "tenants",
          "schemaTo": "public",
          "columnsFrom": [
            "tenant_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {
        "payment_methods_fee_percentage_check": {
          "name": "payment_methods_fee_percentage_check",
          "value": "(fee_percentage IS NULL) OR (fee_percentage >= (0)::numeric)"
        },
        "payment_methods_max_amount_check": {
          "name": "payment_methods_max_amount_check",
          "value": "(max_amount IS NULL) OR (max_amount >= (0)::numeric)"
        },
        "payment_methods_min_amount_check": {
          "name": "payment_methods_min_amount_check",
          "value": "(min_amount IS NULL) OR (min_amount >= (0)::numeric)"
        },
        "payment_methods_type_check": {
          "name": "payment_methods_type_check",
          "value": "type = ANY (ARRAY['cash'::text, 'card'::text, 'transfer'::text, 'check'::text, 'credit'::text, 'qr'::text, 'other'::text])"
        }
      },
      "policies": {
        "Service role full access payment methods": {
          "name": "Service role full access payment methods",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "service_role"
          ],
          "using": "true"
        },
        "Staff manage payment methods": {
          "name": "Staff manage payment methods",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "authenticated"
          ]
        }
      },
      "isRLSEnabled": true
    },
    "public.time_off_requests": {
      "name": "time_off_requests",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "staff_profile_id": {
          "name": "staff_profile_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "tenant_id": {
          "name": "tenant_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "time_off_type_id": {
          "name": "time_off_type_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "start_date": {
          "name": "start_date",
          "type": "date",
          "primaryKey": false,
          "notNull": true
        },
        "end_date": {
          "name": "end_date",
          "type": "date",
          "primaryKey": false,
          "notNull": true
        },
        "start_half_day": {
          "name": "start_half_day",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "end_half_day": {
          "name": "end_half_day",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "total_days": {
          "name": "total_days",
          "type": "numeric(4, 1)",
          "primaryKey": false,
          "notNull": true
        },
        "total_hours": {
          "name": "total_hours",
          "type": "numeric(5, 1)",
          "primaryKey": false,
          "notNull": false
        },
        "reason": {
          "name": "reason",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "attachment_url": {
          "name": "attachment_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'pending'"
        },
        "requested_at": {
          "name": "requested_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "reviewed_by": {
          "name": "reviewed_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "reviewed_at": {
          "name": "reviewed_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "review_notes": {
          "name": "review_notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "coverage_notes": {
          "name": "coverage_notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "covering_staff_id": {
          "name": "covering_staff_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_time_off_requests_profile": {
          "name": "idx_time_off_requests_profile",
          "columns": [
            {
              "expression": "staff_profile_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_time_off_requests_status": {
          "name": "idx_time_off_requests_status",
          "columns": [
            {
              "expression": "status",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_time_off_requests_tenant": {
          "name": "idx_time_off_requests_tenant",
          "columns": [
            {
              "expression": "tenant_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "time_off_requests_reviewed_by_fkey": {
          "name": "time_off_requests_reviewed_by_fkey",
          "tableFrom": "time_off_requests",
          "tableTo": "users",
          "schemaTo": "auth",
          "columnsFrom": [
            "reviewed_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {
        "time_off_requests_status_check": {
          "name": "time_off_requests_status_check",
          "value": "status = ANY (ARRAY['pending'::text, 'approved'::text, 'denied'::text, 'cancelled'::text, 'withdrawn'::text])"
        },
        "valid_date_range": {
          "name": "valid_date_range",
          "value": "end_date >= start_date"
        }
      },
      "policies": {},
      "isRLSEnabled": true
    },
    "public.time_off_balances": {
      "name": "time_off_balances",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "staff_profile_id": {
          "name": "staff_profile_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "time_off_type_id": {
          "name": "time_off_type_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "year": {
          "name": "year",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "allocated_days": {
          "name": "allocated_days",
          "type": "numeric(5, 1)",
          "primaryKey": false,
          "notNull": true,
          "default": "'0'"
        },
        "used_days": {
          "name": "used_days",
          "type": "numeric(5, 1)",
          "primaryKey": false,
          "notNull": true,
          "default": "'0'"
        },
        "pending_days": {
          "name": "pending_days",
          "type": "numeric(5, 1)",
          "primaryKey": false,
          "notNull": true,
          "default": "'0'"
        },
        "carried_over_days": {
          "name": "carried_over_days",
          "type": "numeric(5, 1)",
          "primaryKey": false,
          "notNull": true,
          "default": "'0'"
        },
        "available_days": {
          "name": "available_days",
          "type": "numeric(5, 1)",
          "primaryKey": false,
          "notNull": false,
          "generated": {
            "as": "(((allocated_days + carried_over_days) - used_days) - pending_days)",
            "type": "stored"
          }
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "time_off_balances_staff_profile_id_time_off_type_id_year_key": {
          "columns": [
            "staff_profile_id",
            "time_off_type_id",
            "year"
          ],
          "nullsNotDistinct": false,
          "name": "time_off_balances_staff_profile_id_time_off_type_id_year_key"
        }
      },
      "checkConstraints": {},
      "policies": {},
      "isRLSEnabled": true
    },
    "public.staff_availability_overrides": {
      "name": "staff_availability_overrides",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "staff_profile_id": {
          "name": "staff_profile_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "start_date": {
          "name": "start_date",
          "type": "date",
          "primaryKey": false,
          "notNull": true
        },
        "end_date": {
          "name": "end_date",
          "type": "date",
          "primaryKey": false,
          "notNull": true
        },
        "override_type": {
          "name": "override_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "start_time": {
          "name": "start_time",
          "type": "time",
          "primaryKey": false,
          "notNull": false
        },
        "end_time": {
          "name": "end_time",
          "type": "time",
          "primaryKey": false,
          "notNull": false
        },
        "reason": {
          "name": "reason",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "is_recurring": {
          "name": "is_recurring",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "recurrence_pattern": {
          "name": "recurrence_pattern",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {
        "staff_availability_overrides_override_type_check": {
          "name": "staff_availability_overrides_override_type_check",
          "value": "override_type = ANY (ARRAY['available'::text, 'unavailable'::text, 'limited'::text])"
        },
        "valid_override_dates": {
          "name": "valid_override_dates",
          "value": "end_date >= start_date"
        }
      },
      "policies": {},
      "isRLSEnabled": true
    },
    "public.staff_tasks": {
      "name": "staff_tasks",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "tenant_id": {
          "name": "tenant_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "assigned_to": {
          "name": "assigned_to",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "assigned_by": {
          "name": "assigned_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "title": {
          "name": "title",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "priority": {
          "name": "priority",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'normal'"
        },
        "due_date": {
          "name": "due_date",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "reminder_at": {
          "name": "reminder_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "pet_id": {
          "name": "pet_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "appointment_id": {
          "name": "appointment_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "hospitalization_id": {
          "name": "hospitalization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'pending'"
        },
        "completed_at": {
          "name": "completed_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "completed_by": {
          "name": "completed_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "notes": {
          "name": "notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_staff_tasks_assigned": {
          "name": "idx_staff_tasks_assigned",
          "columns": [
            {
              "expression": "assigned_to",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_staff_tasks_status": {
          "name": "idx_staff_tasks_status",
          "columns": [
            {
              "expression": "status",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_staff_tasks_tenant": {
          "name": "idx_staff_tasks_tenant",
          "columns": [
            {
              "expression": "tenant_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "staff_tasks_assigned_by_fkey": {
          "name": "staff_tasks_assigned_by_fkey",
          "tableFrom": "staff_tasks",
          "tableTo": "users",
          "schemaTo": "auth",
          "columnsFrom": [
            "assigned_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "staff_tasks_completed_by_fkey": {
          "name": "staff_tasks_completed_by_fkey",
          "tableFrom": "staff_tasks",
          "tableTo": "users",
          "schemaTo": "auth",
          "columnsFrom": [
            "completed_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {
        "staff_tasks_priority_check": {
          "name": "staff_tasks_priority_check",
          "value": "priority = ANY (ARRAY['low'::text, 'normal'::text, 'high'::text, 'urgent'::text])"
        },
        "staff_tasks_status_check": {
          "name": "staff_tasks_status_check",
          "value": "status = ANY (ARRAY['pending'::text, 'in_progress'::text, 'completed'::text, 'cancelled'::text, 'deferred'::text])"
        }
      },
      "policies": {},
      "isRLSEnabled": true
    },
    "public.staff_reviews": {
      "name": "staff_reviews",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "staff_profile_id": {
          "name": "staff_profile_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "review_period_start": {
          "name": "review_period_start",
          "type": "date",
          "primaryKey": false,
          "notNull": true
        },
        "review_period_end": {
          "name": "review_period_end",
          "type": "date",
          "primaryKey": false,
          "notNull": true
        },
        "review_type": {
          "name": "review_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'annual'"
        },
        "reviewed_by": {
          "name": "reviewed_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "review_date": {
          "name": "review_date",
          "type": "date",
          "primaryKey": false,
          "notNull": true
        },
        "overall_rating": {
          "name": "overall_rating",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "ratings": {
          "name": "ratings",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "strengths": {
          "name": "strengths",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "areas_for_improvement": {
          "name": "areas_for_improvement",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "goals_for_next_period": {
          "name": "goals_for_next_period",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "employee_acknowledged": {
          "name": "employee_acknowledged",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "employee_acknowledged_at": {
          "name": "employee_acknowledged_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "employee_comments": {
          "name": "employee_comments",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'draft'"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_staff_reviews_profile": {
          "name": "idx_staff_reviews_profile",
          "columns": [
            {
              "expression": "staff_profile_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "staff_reviews_reviewed_by_fkey": {
          "name": "staff_reviews_reviewed_by_fkey",
          "tableFrom": "staff_reviews",
          "tableTo": "users",
          "schemaTo": "auth",
          "columnsFrom": [
            "reviewed_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {
        "staff_reviews_overall_rating_check": {
          "name": "staff_reviews_overall_rating_check",
          "value": "(overall_rating >= 1) AND (overall_rating <= 5)"
        },
        "staff_reviews_review_type_check": {
          "name": "staff_reviews_review_type_check",
          "value": "review_type = ANY (ARRAY['annual'::text, 'probation'::text, 'mid_year'::text, 'project'::text, 'incident'::text])"
        },
        "staff_reviews_status_check": {
          "name": "staff_reviews_status_check",
          "value": "status = ANY (ARRAY['draft'::text, 'submitted'::text, 'acknowledged'::text, 'finalized'::text])"
        }
      },
      "policies": {},
      "isRLSEnabled": true
    },
    "public.invoices": {
      "name": "invoices",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "tenant_id": {
          "name": "tenant_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "invoice_number": {
          "name": "invoice_number",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "client_id": {
          "name": "client_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "pet_id": {
          "name": "pet_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "appointment_id": {
          "name": "appointment_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "invoice_date": {
          "name": "invoice_date",
          "type": "date",
          "primaryKey": false,
          "notNull": true,
          "default": "CURRENT_DATE"
        },
        "due_date": {
          "name": "due_date",
          "type": "date",
          "primaryKey": false,
          "notNull": false
        },
        "subtotal": {
          "name": "subtotal",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": true,
          "default": "'0'"
        },
        "discount_amount": {
          "name": "discount_amount",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": false,
          "default": "'0'"
        },
        "discount_percentage": {
          "name": "discount_percentage",
          "type": "numeric(5, 2)",
          "primaryKey": false,
          "notNull": false,
          "default": "'0'"
        },
        "tax_amount": {
          "name": "tax_amount",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": false,
          "default": "'0'"
        },
        "total": {
          "name": "total",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": true,
          "default": "'0'"
        },
        "amount_paid": {
          "name": "amount_paid",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": false,
          "default": "'0'"
        },
        "balance_due": {
          "name": "balance_due",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": false,
          "generated": {
            "as": "(total - amount_paid)",
            "type": "stored"
          }
        },
        "currency": {
          "name": "currency",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "default": "'PYG'"
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'draft'"
        },
        "payment_terms": {
          "name": "payment_terms",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "notes": {
          "name": "notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "internal_notes": {
          "name": "internal_notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "footer_text": {
          "name": "footer_text",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "pdf_url": {
          "name": "pdf_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "pdf_generated_at": {
          "name": "pdf_generated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "sent_at": {
          "name": "sent_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "sent_to": {
          "name": "sent_to",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "opened_at": {
          "name": "opened_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "deleted_at": {
          "name": "deleted_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "deleted_by": {
          "name": "deleted_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_invoices_client": {
          "name": "idx_invoices_client",
          "columns": [
            {
              "expression": "client_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_invoices_client_history": {
          "name": "idx_invoices_client_history",
          "columns": [
            {
              "expression": "client_id",
              "asc": true,
              "nulls": "last",
              "opclass": "date_ops",
              "isExpression": false
            },
            {
              "expression": "invoice_date",
              "asc": false,
              "nulls": "first",
              "opclass": "date_ops",
              "isExpression": false
            },
            {
              "expression": "invoice_number",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            },
            {
              "expression": "total",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            },
            {
              "expression": "status",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            },
            {
              "expression": "balance_due",
              "asc": true,
              "nulls": "last",
              "opclass": "date_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "where": "(deleted_at IS NULL)",
          "with": {}
        },
        "idx_invoices_date_brin": {
          "name": "idx_invoices_date_brin",
          "columns": [
            {
              "expression": "invoice_date",
              "asc": true,
              "nulls": "last",
              "opclass": "date_minmax_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "brin",
          "with": {
            "pages_per_range": "32"
          }
        },
        "idx_invoices_list": {
          "name": "idx_invoices_list",
          "columns": [
            {
              "expression": "tenant_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            },
            {
              "expression": "invoice_date",
              "asc": false,
              "nulls": "first",
              "opclass": "date_ops",
              "isExpression": false
            },
            {
              "expression": "invoice_number",
              "asc": true,
              "nulls": "last",
              "opclass": "date_ops",
              "isExpression": false
            },
            {
              "expression": "client_id",
              "asc": true,
              "nulls": "last",
              "opclass": "date_ops",
              "isExpression": false
            },
            {
              "expression": "total",
              "asc": true,
              "nulls": "last",
              "opclass": "date_ops",
              "isExpression": false
            },
            {
              "expression": "status",
              "asc": true,
              "nulls": "last",
              "opclass": "date_ops",
              "isExpression": false
            },
            {
              "expression": "amount_paid",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            },
            {
              "expression": "balance_due",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "where": "(deleted_at IS NULL)",
          "with": {}
        },
        "idx_invoices_overdue": {
          "name": "idx_invoices_overdue",
          "columns": [
            {
              "expression": "due_date",
              "asc": true,
              "nulls": "last",
              "opclass": "date_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "where": "((status <> ALL (ARRAY['paid'::text, 'void'::text, 'refunded'::text])) AND (deleted_at IS NULL))",
          "with": {}
        },
        "idx_invoices_pet": {
          "name": "idx_invoices_pet",
          "columns": [
            {
              "expression": "pet_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_invoices_status": {
          "name": "idx_invoices_status",
          "columns": [
            {
              "expression": "status",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "where": "(deleted_at IS NULL)",
          "with": {}
        },
        "idx_invoices_tenant": {
          "name": "idx_invoices_tenant",
          "columns": [
            {
              "expression": "tenant_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_invoices_unpaid": {
          "name": "idx_invoices_unpaid",
          "columns": [
            {
              "expression": "tenant_id",
              "asc": true,
              "nulls": "last",
              "opclass": "date_ops",
              "isExpression": false
            },
            {
              "expression": "status",
              "asc": true,
              "nulls": "last",
              "opclass": "date_ops",
              "isExpression": false
            },
            {
              "expression": "due_date",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            },
            {
              "expression": "invoice_number",
              "asc": true,
              "nulls": "last",
              "opclass": "date_ops",
              "isExpression": false
            },
            {
              "expression": "client_id",
              "asc": true,
              "nulls": "last",
              "opclass": "date_ops",
              "isExpression": false
            },
            {
              "expression": "total",
              "asc": true,
              "nulls": "last",
              "opclass": "date_ops",
              "isExpression": false
            },
            {
              "expression": "balance_due",
              "asc": true,
              "nulls": "last",
              "opclass": "date_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "where": "((status <> ALL (ARRAY['paid'::text, 'void'::text, 'refunded'::text])) AND (deleted_at IS NULL))",
          "with": {}
        }
      },
      "foreignKeys": {
        "invoices_appointment_id_fkey": {
          "name": "invoices_appointment_id_fkey",
          "tableFrom": "invoices",
          "tableTo": "appointments",
          "schemaTo": "public",
          "columnsFrom": [
            "appointment_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "invoices_client_id_fkey": {
          "name": "invoices_client_id_fkey",
          "tableFrom": "invoices",
          "tableTo": "profiles",
          "schemaTo": "public",
          "columnsFrom": [
            "client_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "invoices_deleted_by_fkey": {
          "name": "invoices_deleted_by_fkey",
          "tableFrom": "invoices",
          "tableTo": "profiles",
          "schemaTo": "public",
          "columnsFrom": [
            "deleted_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "invoices_pet_id_fkey": {
          "name": "invoices_pet_id_fkey",
          "tableFrom": "invoices",
          "tableTo": "pets",
          "schemaTo": "public",
          "columnsFrom": [
            "pet_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "invoices_tenant_id_fkey": {
          "name": "invoices_tenant_id_fkey",
          "tableFrom": "invoices",
          "tableTo": "tenants",
          "schemaTo": "public",
          "columnsFrom": [
            "tenant_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "invoices_tenant_id_invoice_number_key": {
          "columns": [
            "tenant_id",
            "invoice_number"
          ],
          "nullsNotDistinct": false,
          "name": "invoices_tenant_id_invoice_number_key"
        }
      },
      "checkConstraints": {
        "invoices_amounts_non_negative": {
          "name": "invoices_amounts_non_negative",
          "value": "(subtotal >= (0)::numeric) AND (total >= (0)::numeric) AND (amount_paid >= (0)::numeric) AND (COALESCE(discount_amount, (0)::numeric) >= (0)::numeric) AND (COALESCE(tax_amount, (0)::numeric) >= (0)::numeric)"
        },
        "invoices_due_date_valid": {
          "name": "invoices_due_date_valid",
          "value": "(due_date IS NULL) OR (due_date >= invoice_date)"
        },
        "invoices_status_check": {
          "name": "invoices_status_check",
          "value": "status = ANY (ARRAY['draft'::text, 'sent'::text, 'viewed'::text, 'partial'::text, 'paid'::text, 'overdue'::text, 'void'::text, 'refunded'::text])"
        }
      },
      "policies": {
        "Clients view own invoices": {
          "name": "Clients view own invoices",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "((client_id = auth.uid()) AND (deleted_at IS NULL))"
        },
        "Service role full access invoices": {
          "name": "Service role full access invoices",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "service_role"
          ]
        },
        "Staff manage invoices": {
          "name": "Staff manage invoices",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "authenticated"
          ]
        }
      },
      "isRLSEnabled": true
    },
    "public.invoice_items": {
      "name": "invoice_items",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "invoice_id": {
          "name": "invoice_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "tenant_id": {
          "name": "tenant_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "item_type": {
          "name": "item_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'service'"
        },
        "service_id": {
          "name": "service_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "product_id": {
          "name": "product_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "quantity": {
          "name": "quantity",
          "type": "numeric(10, 2)",
          "primaryKey": false,
          "notNull": true,
          "default": "'1'"
        },
        "unit_price": {
          "name": "unit_price",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": true,
          "default": "'0'"
        },
        "discount_amount": {
          "name": "discount_amount",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": false,
          "default": "'0'"
        },
        "tax_rate": {
          "name": "tax_rate",
          "type": "numeric(5, 2)",
          "primaryKey": false,
          "notNull": false,
          "default": "'0'"
        },
        "total": {
          "name": "total",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": false,
          "default": "'0'"
        },
        "display_order": {
          "name": "display_order",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_invoice_items_invoice": {
          "name": "idx_invoice_items_invoice",
          "columns": [
            {
              "expression": "invoice_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_invoice_items_product": {
          "name": "idx_invoice_items_product",
          "columns": [
            {
              "expression": "product_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_invoice_items_service": {
          "name": "idx_invoice_items_service",
          "columns": [
            {
              "expression": "service_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_invoice_items_tenant": {
          "name": "idx_invoice_items_tenant",
          "columns": [
            {
              "expression": "tenant_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "invoice_items_invoice_id_fkey": {
          "name": "invoice_items_invoice_id_fkey",
          "tableFrom": "invoice_items",
          "tableTo": "invoices",
          "schemaTo": "public",
          "columnsFrom": [
            "invoice_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "invoice_items_product_id_fkey": {
          "name": "invoice_items_product_id_fkey",
          "tableFrom": "invoice_items",
          "tableTo": "store_products",
          "schemaTo": "public",
          "columnsFrom": [
            "product_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "invoice_items_service_id_fkey": {
          "name": "invoice_items_service_id_fkey",
          "tableFrom": "invoice_items",
          "tableTo": "services",
          "schemaTo": "public",
          "columnsFrom": [
            "service_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "invoice_items_tenant_id_fkey": {
          "name": "invoice_items_tenant_id_fkey",
          "tableFrom": "invoice_items",
          "tableTo": "tenants",
          "schemaTo": "public",
          "columnsFrom": [
            "tenant_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {
        "invoice_items_discount_amount_check": {
          "name": "invoice_items_discount_amount_check",
          "value": "discount_amount >= (0)::numeric"
        },
        "invoice_items_item_type_check": {
          "name": "invoice_items_item_type_check",
          "value": "item_type = ANY (ARRAY['service'::text, 'product'::text, 'discount'::text, 'custom'::text])"
        },
        "invoice_items_quantity_check": {
          "name": "invoice_items_quantity_check",
          "value": "quantity > (0)::numeric"
        },
        "invoice_items_quantity_valid": {
          "name": "invoice_items_quantity_valid",
          "value": "((item_type = 'discount'::text) AND (quantity <> (0)::numeric)) OR ((item_type <> 'discount'::text) AND (quantity > (0)::numeric))"
        },
        "invoice_items_tax_rate_check": {
          "name": "invoice_items_tax_rate_check",
          "value": "(tax_rate >= (0)::numeric) AND (tax_rate <= (100)::numeric)"
        },
        "invoice_items_tax_rate_valid": {
          "name": "invoice_items_tax_rate_valid",
          "value": "(tax_rate IS NULL) OR ((tax_rate >= (0)::numeric) AND (tax_rate <= (100)::numeric))"
        }
      },
      "policies": {
        "Clients view invoice items": {
          "name": "Clients view invoice items",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "(EXISTS ( SELECT 1\n   FROM invoices i\n  WHERE ((i.id = invoice_items.invoice_id) AND (i.client_id = auth.uid()))))"
        },
        "Service role full access invoice items": {
          "name": "Service role full access invoice items",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "service_role"
          ]
        },
        "Staff manage invoice items": {
          "name": "Staff manage invoice items",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "authenticated"
          ]
        }
      },
      "isRLSEnabled": true
    },
    "public.payments": {
      "name": "payments",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "tenant_id": {
          "name": "tenant_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "invoice_id": {
          "name": "invoice_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "payment_number": {
          "name": "payment_number",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "payment_date": {
          "name": "payment_date",
          "type": "date",
          "primaryKey": false,
          "notNull": true,
          "default": "CURRENT_DATE"
        },
        "amount": {
          "name": "amount",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": true
        },
        "payment_method_id": {
          "name": "payment_method_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "payment_method_name": {
          "name": "payment_method_name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "reference_number": {
          "name": "reference_number",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "authorization_code": {
          "name": "authorization_code",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'completed'"
        },
        "notes": {
          "name": "notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "received_by": {
          "name": "received_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_payments_daily_report": {
          "name": "idx_payments_daily_report",
          "columns": [
            {
              "expression": "tenant_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            },
            {
              "expression": "payment_date",
              "asc": false,
              "nulls": "first",
              "opclass": "date_ops",
              "isExpression": false
            },
            {
              "expression": "invoice_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            },
            {
              "expression": "amount",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            },
            {
              "expression": "payment_method_name",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            },
            {
              "expression": "status",
              "asc": true,
              "nulls": "last",
              "opclass": "date_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "where": "(status = 'completed'::text)",
          "with": {}
        },
        "idx_payments_date_brin": {
          "name": "idx_payments_date_brin",
          "columns": [
            {
              "expression": "payment_date",
              "asc": true,
              "nulls": "last",
              "opclass": "date_minmax_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "brin",
          "with": {
            "pages_per_range": "32"
          }
        },
        "idx_payments_invoice": {
          "name": "idx_payments_invoice",
          "columns": [
            {
              "expression": "invoice_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_payments_invoice_list": {
          "name": "idx_payments_invoice_list",
          "columns": [
            {
              "expression": "invoice_id",
              "asc": true,
              "nulls": "last",
              "opclass": "date_ops",
              "isExpression": false
            },
            {
              "expression": "payment_date",
              "asc": false,
              "nulls": "first",
              "opclass": "uuid_ops",
              "isExpression": false
            },
            {
              "expression": "amount",
              "asc": true,
              "nulls": "last",
              "opclass": "date_ops",
              "isExpression": false
            },
            {
              "expression": "payment_method_name",
              "asc": true,
              "nulls": "last",
              "opclass": "date_ops",
              "isExpression": false
            },
            {
              "expression": "status",
              "asc": true,
              "nulls": "last",
              "opclass": "date_ops",
              "isExpression": false
            },
            {
              "expression": "reference_number",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_payments_status": {
          "name": "idx_payments_status",
          "columns": [
            {
              "expression": "status",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_payments_tenant": {
          "name": "idx_payments_tenant",
          "columns": [
            {
              "expression": "tenant_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "payments_invoice_id_fkey": {
          "name": "payments_invoice_id_fkey",
          "tableFrom": "payments",
          "tableTo": "invoices",
          "schemaTo": "public",
          "columnsFrom": [
            "invoice_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "payments_payment_method_id_fkey": {
          "name": "payments_payment_method_id_fkey",
          "tableFrom": "payments",
          "tableTo": "payment_methods",
          "schemaTo": "public",
          "columnsFrom": [
            "payment_method_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "payments_received_by_fkey": {
          "name": "payments_received_by_fkey",
          "tableFrom": "payments",
          "tableTo": "profiles",
          "schemaTo": "public",
          "columnsFrom": [
            "received_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "payments_tenant_id_fkey": {
          "name": "payments_tenant_id_fkey",
          "tableFrom": "payments",
          "tableTo": "tenants",
          "schemaTo": "public",
          "columnsFrom": [
            "tenant_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {
        "payments_amount_check": {
          "name": "payments_amount_check",
          "value": "amount > (0)::numeric"
        },
        "payments_amount_positive": {
          "name": "payments_amount_positive",
          "value": "amount > (0)::numeric"
        },
        "payments_status_check": {
          "name": "payments_status_check",
          "value": "status = ANY (ARRAY['pending'::text, 'completed'::text, 'failed'::text, 'cancelled'::text, 'refunded'::text])"
        }
      },
      "policies": {
        "Clients view own payments": {
          "name": "Clients view own payments",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "(EXISTS ( SELECT 1\n   FROM invoices i\n  WHERE ((i.id = payments.invoice_id) AND (i.client_id = auth.uid()))))"
        },
        "Service role full access payments": {
          "name": "Service role full access payments",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "service_role"
          ]
        },
        "Staff manage payments": {
          "name": "Staff manage payments",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "authenticated"
          ]
        }
      },
      "isRLSEnabled": true
    },
    "public.refunds": {
      "name": "refunds",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "tenant_id": {
          "name": "tenant_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "payment_id": {
          "name": "payment_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "refund_number": {
          "name": "refund_number",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "refund_date": {
          "name": "refund_date",
          "type": "date",
          "primaryKey": false,
          "notNull": true,
          "default": "CURRENT_DATE"
        },
        "amount": {
          "name": "amount",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": true
        },
        "reason": {
          "name": "reason",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'completed'"
        },
        "processed_by": {
          "name": "processed_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "notes": {
          "name": "notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_refunds_payment": {
          "name": "idx_refunds_payment",
          "columns": [
            {
              "expression": "payment_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_refunds_tenant": {
          "name": "idx_refunds_tenant",
          "columns": [
            {
              "expression": "tenant_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "refunds_payment_id_fkey": {
          "name": "refunds_payment_id_fkey",
          "tableFrom": "refunds",
          "tableTo": "payments",
          "schemaTo": "public",
          "columnsFrom": [
            "payment_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "refunds_processed_by_fkey": {
          "name": "refunds_processed_by_fkey",
          "tableFrom": "refunds",
          "tableTo": "profiles",
          "schemaTo": "public",
          "columnsFrom": [
            "processed_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "refunds_tenant_id_fkey": {
          "name": "refunds_tenant_id_fkey",
          "tableFrom": "refunds",
          "tableTo": "tenants",
          "schemaTo": "public",
          "columnsFrom": [
            "tenant_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {
        "refunds_amount_check": {
          "name": "refunds_amount_check",
          "value": "amount > (0)::numeric"
        },
        "refunds_amount_positive": {
          "name": "refunds_amount_positive",
          "value": "amount > (0)::numeric"
        },
        "refunds_reason_required": {
          "name": "refunds_reason_required",
          "value": "(reason IS NOT NULL) AND (char_length(TRIM(BOTH FROM reason)) > 0)"
        },
        "refunds_status_check": {
          "name": "refunds_status_check",
          "value": "status = ANY (ARRAY['pending'::text, 'completed'::text, 'failed'::text])"
        }
      },
      "policies": {
        "Service role full access refunds": {
          "name": "Service role full access refunds",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "service_role"
          ],
          "using": "true"
        },
        "Staff manage refunds": {
          "name": "Staff manage refunds",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "authenticated"
          ]
        }
      },
      "isRLSEnabled": true
    },
    "public.hospitalization_notes": {
      "name": "hospitalization_notes",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "hospitalization_id": {
          "name": "hospitalization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "tenant_id": {
          "name": "tenant_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "note_type": {
          "name": "note_type",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "default": "'progress'"
        },
        "content": {
          "name": "content",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "created_by": {
          "name": "created_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_hospitalization_notes_created_by": {
          "name": "idx_hospitalization_notes_created_by",
          "columns": [
            {
              "expression": "created_by",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_hospitalization_notes_hosp": {
          "name": "idx_hospitalization_notes_hosp",
          "columns": [
            {
              "expression": "hospitalization_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_hospitalization_notes_tenant": {
          "name": "idx_hospitalization_notes_tenant",
          "columns": [
            {
              "expression": "tenant_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {
        "hospitalization_notes_note_type_check": {
          "name": "hospitalization_notes_note_type_check",
          "value": "note_type = ANY (ARRAY['progress'::text, 'doctor'::text, 'nursing'::text, 'discharge'::text, 'other'::text])"
        }
      },
      "policies": {
        "Owners view notes": {
          "name": "Owners view notes",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "(EXISTS ( SELECT 1\n   FROM hospitalizations h\n  WHERE ((h.id = hospitalization_notes.hospitalization_id) AND is_owner_of_pet(h.pet_id))))"
        },
        "Service role full access notes": {
          "name": "Service role full access notes",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "service_role"
          ]
        },
        "Staff manage notes": {
          "name": "Staff manage notes",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "authenticated"
          ]
        }
      },
      "isRLSEnabled": true
    },
    "public.expenses": {
      "name": "expenses",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "tenant_id": {
          "name": "tenant_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "amount": {
          "name": "amount",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": true
        },
        "currency": {
          "name": "currency",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "default": "'PYG'"
        },
        "category": {
          "name": "category",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "subcategory": {
          "name": "subcategory",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "expense_date": {
          "name": "expense_date",
          "type": "date",
          "primaryKey": false,
          "notNull": true,
          "default": "CURRENT_DATE"
        },
        "payment_date": {
          "name": "payment_date",
          "type": "date",
          "primaryKey": false,
          "notNull": false
        },
        "payment_method": {
          "name": "payment_method",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "reference_number": {
          "name": "reference_number",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "vendor_name": {
          "name": "vendor_name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "receipt_url": {
          "name": "receipt_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "notes": {
          "name": "notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "approved_by": {
          "name": "approved_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "approved_at": {
          "name": "approved_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "default": "'pending'"
        },
        "created_by": {
          "name": "created_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "deleted_at": {
          "name": "deleted_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "deleted_by": {
          "name": "deleted_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_expenses_category": {
          "name": "idx_expenses_category",
          "columns": [
            {
              "expression": "category",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_expenses_date_brin": {
          "name": "idx_expenses_date_brin",
          "columns": [
            {
              "expression": "expense_date",
              "asc": true,
              "nulls": "last",
              "opclass": "date_minmax_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "brin",
          "with": {
            "pages_per_range": "32"
          }
        },
        "idx_expenses_report": {
          "name": "idx_expenses_report",
          "columns": [
            {
              "expression": "tenant_id",
              "asc": true,
              "nulls": "last",
              "opclass": "date_ops",
              "isExpression": false
            },
            {
              "expression": "expense_date",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            },
            {
              "expression": "category",
              "asc": true,
              "nulls": "last",
              "opclass": "date_ops",
              "isExpression": false
            },
            {
              "expression": "amount",
              "asc": true,
              "nulls": "last",
              "opclass": "date_ops",
              "isExpression": false
            },
            {
              "expression": "status",
              "asc": true,
              "nulls": "last",
              "opclass": "date_ops",
              "isExpression": false
            },
            {
              "expression": "vendor_name",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "where": "(deleted_at IS NULL)",
          "with": {}
        },
        "idx_expenses_status": {
          "name": "idx_expenses_status",
          "columns": [
            {
              "expression": "status",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "where": "(deleted_at IS NULL)",
          "with": {}
        },
        "idx_expenses_tenant": {
          "name": "idx_expenses_tenant",
          "columns": [
            {
              "expression": "tenant_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "expenses_approved_by_fkey": {
          "name": "expenses_approved_by_fkey",
          "tableFrom": "expenses",
          "tableTo": "profiles",
          "schemaTo": "public",
          "columnsFrom": [
            "approved_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "expenses_created_by_fkey": {
          "name": "expenses_created_by_fkey",
          "tableFrom": "expenses",
          "tableTo": "profiles",
          "schemaTo": "public",
          "columnsFrom": [
            "created_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "expenses_deleted_by_fkey": {
          "name": "expenses_deleted_by_fkey",
          "tableFrom": "expenses",
          "tableTo": "profiles",
          "schemaTo": "public",
          "columnsFrom": [
            "deleted_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "expenses_tenant_id_fkey": {
          "name": "expenses_tenant_id_fkey",
          "tableFrom": "expenses",
          "tableTo": "tenants",
          "schemaTo": "public",
          "columnsFrom": [
            "tenant_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {
        "expenses_amount_check": {
          "name": "expenses_amount_check",
          "value": "amount > (0)::numeric"
        },
        "expenses_category_check": {
          "name": "expenses_category_check",
          "value": "category = ANY (ARRAY['supplies'::text, 'utilities'::text, 'payroll'::text, 'rent'::text, 'equipment'::text, 'marketing'::text, 'insurance'::text, 'taxes'::text, 'travel'::text, 'maintenance'::text, 'professional_services'::text, 'training'::text, 'other'::text])"
        },
        "expenses_status_check": {
          "name": "expenses_status_check",
          "value": "status = ANY (ARRAY['pending'::text, 'approved'::text, 'paid'::text, 'rejected'::text])"
        }
      },
      "policies": {
        "Service role full access expenses": {
          "name": "Service role full access expenses",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "service_role"
          ],
          "using": "true"
        },
        "Staff manage expenses": {
          "name": "Staff manage expenses",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "authenticated"
          ]
        }
      },
      "isRLSEnabled": true
    },
    "public.expense_categories": {
      "name": "expense_categories",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "tenant_id": {
          "name": "tenant_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "code": {
          "name": "code",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "parent_id": {
          "name": "parent_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "budget_monthly": {
          "name": "budget_monthly",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": true
        },
        "display_order": {
          "name": "display_order",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 100
        },
        "icon": {
          "name": "icon",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "color": {
          "name": "color",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_expense_categories_tenant": {
          "name": "idx_expense_categories_tenant",
          "columns": [
            {
              "expression": "tenant_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "expense_categories_parent_id_fkey": {
          "name": "expense_categories_parent_id_fkey",
          "tableFrom": "expense_categories",
          "tableTo": "expense_categories",
          "schemaTo": "public",
          "columnsFrom": [
            "parent_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "expense_categories_tenant_id_fkey": {
          "name": "expense_categories_tenant_id_fkey",
          "tableFrom": "expense_categories",
          "tableTo": "tenants",
          "schemaTo": "public",
          "columnsFrom": [
            "tenant_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "expense_categories_tenant_id_name_key": {
          "columns": [
            "tenant_id",
            "name"
          ],
          "nullsNotDistinct": false,
          "name": "expense_categories_tenant_id_name_key"
        }
      },
      "checkConstraints": {},
      "policies": {
        "Service role full access expense categories": {
          "name": "Service role full access expense categories",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "service_role"
          ],
          "using": "true"
        },
        "Staff manage expense categories": {
          "name": "Staff manage expense categories",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "authenticated"
          ]
        }
      },
      "isRLSEnabled": true
    },
    "public.loyalty_points": {
      "name": "loyalty_points",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "tenant_id": {
          "name": "tenant_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "client_id": {
          "name": "client_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "balance": {
          "name": "balance",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "lifetime_earned": {
          "name": "lifetime_earned",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "lifetime_redeemed": {
          "name": "lifetime_redeemed",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "tier": {
          "name": "tier",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "default": "'bronze'"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_loyalty_points_client": {
          "name": "idx_loyalty_points_client",
          "columns": [
            {
              "expression": "client_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_loyalty_points_tenant": {
          "name": "idx_loyalty_points_tenant",
          "columns": [
            {
              "expression": "tenant_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "loyalty_points_client_id_fkey": {
          "name": "loyalty_points_client_id_fkey",
          "tableFrom": "loyalty_points",
          "tableTo": "profiles",
          "schemaTo": "public",
          "columnsFrom": [
            "client_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "loyalty_points_tenant_id_fkey": {
          "name": "loyalty_points_tenant_id_fkey",
          "tableFrom": "loyalty_points",
          "tableTo": "tenants",
          "schemaTo": "public",
          "columnsFrom": [
            "tenant_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "loyalty_points_tenant_id_client_id_key": {
          "columns": [
            "tenant_id",
            "client_id"
          ],
          "nullsNotDistinct": false,
          "name": "loyalty_points_tenant_id_client_id_key"
        }
      },
      "checkConstraints": {
        "loyalty_points_balance_check": {
          "name": "loyalty_points_balance_check",
          "value": "balance >= 0"
        },
        "loyalty_points_tier_check": {
          "name": "loyalty_points_tier_check",
          "value": "tier = ANY (ARRAY['bronze'::text, 'silver'::text, 'gold'::text, 'platinum'::text])"
        }
      },
      "policies": {
        "Clients view own points": {
          "name": "Clients view own points",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "(client_id = auth.uid())"
        },
        "Service role full access loyalty points": {
          "name": "Service role full access loyalty points",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "service_role"
          ]
        },
        "Staff manage loyalty points": {
          "name": "Staff manage loyalty points",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "authenticated"
          ]
        }
      },
      "isRLSEnabled": true
    },
    "public.loyalty_transactions": {
      "name": "loyalty_transactions",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "tenant_id": {
          "name": "tenant_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "client_id": {
          "name": "client_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "type": {
          "name": "type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "points": {
          "name": "points",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "invoice_id": {
          "name": "invoice_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "order_id": {
          "name": "order_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "balance_after": {
          "name": "balance_after",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "expires_at": {
          "name": "expires_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_loyalty_transactions_client": {
          "name": "idx_loyalty_transactions_client",
          "columns": [
            {
              "expression": "client_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_loyalty_transactions_date_brin": {
          "name": "idx_loyalty_transactions_date_brin",
          "columns": [
            {
              "expression": "created_at",
              "asc": true,
              "nulls": "last",
              "opclass": "timestamptz_minmax_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "brin",
          "with": {
            "pages_per_range": "32"
          }
        },
        "idx_loyalty_transactions_tenant": {
          "name": "idx_loyalty_transactions_tenant",
          "columns": [
            {
              "expression": "tenant_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_loyalty_transactions_type": {
          "name": "idx_loyalty_transactions_type",
          "columns": [
            {
              "expression": "type",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "loyalty_transactions_client_id_fkey": {
          "name": "loyalty_transactions_client_id_fkey",
          "tableFrom": "loyalty_transactions",
          "tableTo": "profiles",
          "schemaTo": "public",
          "columnsFrom": [
            "client_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "loyalty_transactions_invoice_id_fkey": {
          "name": "loyalty_transactions_invoice_id_fkey",
          "tableFrom": "loyalty_transactions",
          "tableTo": "invoices",
          "schemaTo": "public",
          "columnsFrom": [
            "invoice_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "loyalty_transactions_tenant_id_fkey": {
          "name": "loyalty_transactions_tenant_id_fkey",
          "tableFrom": "loyalty_transactions",
          "tableTo": "tenants",
          "schemaTo": "public",
          "columnsFrom": [
            "tenant_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {
        "loyalty_transactions_type_check": {
          "name": "loyalty_transactions_type_check",
          "value": "type = ANY (ARRAY['earn'::text, 'redeem'::text, 'expire'::text, 'adjust'::text, 'bonus'::text])"
        }
      },
      "policies": {
        "Clients view own transactions": {
          "name": "Clients view own transactions",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "(client_id = auth.uid())"
        },
        "Service role full access loyalty transactions": {
          "name": "Service role full access loyalty transactions",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "service_role"
          ]
        },
        "Staff manage loyalty transactions": {
          "name": "Staff manage loyalty transactions",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "authenticated"
          ]
        }
      },
      "isRLSEnabled": true
    },
    "public.communication_preferences": {
      "name": "communication_preferences",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "tenant_id": {
          "name": "tenant_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "allow_sms": {
          "name": "allow_sms",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": true
        },
        "allow_whatsapp": {
          "name": "allow_whatsapp",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": true
        },
        "allow_email": {
          "name": "allow_email",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": true
        },
        "allow_in_app": {
          "name": "allow_in_app",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": true
        },
        "allow_push": {
          "name": "allow_push",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": true
        },
        "preferred_phone": {
          "name": "preferred_phone",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "preferred_email": {
          "name": "preferred_email",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "whatsapp_number": {
          "name": "whatsapp_number",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "allow_appointment_reminders": {
          "name": "allow_appointment_reminders",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": true
        },
        "allow_vaccine_reminders": {
          "name": "allow_vaccine_reminders",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": true
        },
        "allow_marketing": {
          "name": "allow_marketing",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "allow_feedback_requests": {
          "name": "allow_feedback_requests",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": true
        },
        "quiet_hours_enabled": {
          "name": "quiet_hours_enabled",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "quiet_hours_start": {
          "name": "quiet_hours_start",
          "type": "time",
          "primaryKey": false,
          "notNull": false,
          "default": "'22:00:00'"
        },
        "quiet_hours_end": {
          "name": "quiet_hours_end",
          "type": "time",
          "primaryKey": false,
          "notNull": false,
          "default": "'08:00:00'"
        },
        "preferred_language": {
          "name": "preferred_language",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "default": "'es'"
        },
        "timezone": {
          "name": "timezone",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "default": "'America/Asuncion'"
        },
        "unsubscribed_at": {
          "name": "unsubscribed_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "unsubscribe_reason": {
          "name": "unsubscribe_reason",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_communication_prefs_user": {
          "name": "idx_communication_prefs_user",
          "columns": [
            {
              "expression": "user_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "communication_preferences_user_id_tenant_id_key": {
          "columns": [
            "user_id",
            "tenant_id"
          ],
          "nullsNotDistinct": false,
          "name": "communication_preferences_user_id_tenant_id_key"
        }
      },
      "checkConstraints": {},
      "policies": {
        "Service role full access preferences": {
          "name": "Service role full access preferences",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "service_role"
          ],
          "using": "true"
        },
        "Staff view preferences": {
          "name": "Staff view preferences",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ]
        },
        "Users manage own preferences": {
          "name": "Users manage own preferences",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "authenticated"
          ]
        }
      },
      "isRLSEnabled": true
    },
    "public.store_inventory_transactions": {
      "name": "store_inventory_transactions",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "tenant_id": {
          "name": "tenant_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "product_id": {
          "name": "product_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "type": {
          "name": "type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "quantity": {
          "name": "quantity",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": true
        },
        "unit_cost": {
          "name": "unit_cost",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "reference_type": {
          "name": "reference_type",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "reference_id": {
          "name": "reference_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "notes": {
          "name": "notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "performed_by": {
          "name": "performed_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_inventory_transactions_date": {
          "name": "idx_inventory_transactions_date",
          "columns": [
            {
              "expression": "created_at",
              "asc": false,
              "nulls": "first",
              "opclass": "timestamptz_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_inventory_transactions_product": {
          "name": "idx_inventory_transactions_product",
          "columns": [
            {
              "expression": "product_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_inventory_transactions_reference": {
          "name": "idx_inventory_transactions_reference",
          "columns": [
            {
              "expression": "reference_type",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            },
            {
              "expression": "reference_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_inventory_transactions_tenant": {
          "name": "idx_inventory_transactions_tenant",
          "columns": [
            {
              "expression": "tenant_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_inventory_transactions_type": {
          "name": "idx_inventory_transactions_type",
          "columns": [
            {
              "expression": "type",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_store_inventory_txn_date_brin": {
          "name": "idx_store_inventory_txn_date_brin",
          "columns": [
            {
              "expression": "created_at",
              "asc": true,
              "nulls": "last",
              "opclass": "timestamptz_minmax_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "brin",
          "with": {
            "pages_per_range": "32"
          }
        },
        "idx_store_inventory_txn_product": {
          "name": "idx_store_inventory_txn_product",
          "columns": [
            {
              "expression": "product_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_store_inventory_txn_tenant": {
          "name": "idx_store_inventory_txn_tenant",
          "columns": [
            {
              "expression": "tenant_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {
        "store_inventory_transactions_type_check": {
          "name": "store_inventory_transactions_type_check",
          "value": "type = ANY (ARRAY['purchase'::text, 'sale'::text, 'adjustment'::text, 'return'::text, 'damage'::text, 'theft'::text, 'expired'::text, 'transfer'::text])"
        }
      },
      "policies": {
        "Clinic staff manage inventory_txns": {
          "name": "Clinic staff manage inventory_txns",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "authenticated"
          ],
          "withCheck": "(EXISTS ( SELECT 1\n   FROM profiles p\n  WHERE ((p.id = auth.uid()) AND (p.tenant_id = store_inventory_transactions.tenant_id) AND (p.role = ANY (ARRAY['vet'::text, 'admin'::text])) AND (p.deleted_at IS NULL))))",
          "using": "(EXISTS ( SELECT 1\n   FROM profiles p\n  WHERE ((p.id = auth.uid()) AND (p.tenant_id = store_inventory_transactions.tenant_id) AND (p.role = ANY (ARRAY['vet'::text, 'admin'::text])) AND (p.deleted_at IS NULL))))"
        },
        "Service role full access inv txn": {
          "name": "Service role full access inv txn",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "service_role"
          ]
        },
        "Service role full access inventory_txns": {
          "name": "Service role full access inventory_txns",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "service_role"
          ]
        }
      },
      "isRLSEnabled": false
    },
    "public.archived_pets": {
      "name": "archived_pets",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true
        },
        "original_data": {
          "name": "original_data",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true
        },
        "tenant_id": {
          "name": "tenant_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "owner_id": {
          "name": "owner_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "deleted_at": {
          "name": "deleted_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true
        },
        "deleted_by": {
          "name": "deleted_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "deletion_reason": {
          "name": "deletion_reason",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "archived_at": {
          "name": "archived_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {},
      "policies": {},
      "isRLSEnabled": true
    },
    "public.archived_medical_records": {
      "name": "archived_medical_records",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true
        },
        "original_data": {
          "name": "original_data",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true
        },
        "pet_id": {
          "name": "pet_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "tenant_id": {
          "name": "tenant_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "deleted_at": {
          "name": "deleted_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true
        },
        "deleted_by": {
          "name": "deleted_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "deletion_reason": {
          "name": "deletion_reason",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "archived_at": {
          "name": "archived_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {},
      "policies": {},
      "isRLSEnabled": true
    },
    "public.archived_invoices": {
      "name": "archived_invoices",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true
        },
        "original_data": {
          "name": "original_data",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true
        },
        "invoice_number": {
          "name": "invoice_number",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "tenant_id": {
          "name": "tenant_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "deleted_at": {
          "name": "deleted_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true
        },
        "deleted_by": {
          "name": "deleted_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "deletion_reason": {
          "name": "deletion_reason",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "archived_at": {
          "name": "archived_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {},
      "policies": {},
      "isRLSEnabled": true
    },
    "public.kennels": {
      "name": "kennels",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "tenant_id": {
          "name": "tenant_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "code": {
          "name": "code",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "location": {
          "name": "location",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "kennel_type": {
          "name": "kennel_type",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "default": "'standard'"
        },
        "max_occupancy": {
          "name": "max_occupancy",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 1
        },
        "current_occupancy": {
          "name": "current_occupancy",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "max_weight_kg": {
          "name": "max_weight_kg",
          "type": "numeric(6, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "features": {
          "name": "features",
          "type": "text[]",
          "primaryKey": false,
          "notNull": false
        },
        "daily_rate": {
          "name": "daily_rate",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": false,
          "default": "'0'"
        },
        "current_status": {
          "name": "current_status",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "default": "'available'"
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": true
        },
        "deleted_at": {
          "name": "deleted_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "deleted_by": {
          "name": "deleted_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_kennels_available": {
          "name": "idx_kennels_available",
          "columns": [
            {
              "expression": "tenant_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            },
            {
              "expression": "current_status",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "where": "((current_status = 'available'::text) AND (is_active = true) AND (deleted_at IS NULL))",
          "with": {}
        },
        "idx_kennels_status": {
          "name": "idx_kennels_status",
          "columns": [
            {
              "expression": "current_status",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "where": "((is_active = true) AND (deleted_at IS NULL))",
          "with": {}
        },
        "idx_kennels_tenant": {
          "name": "idx_kennels_tenant",
          "columns": [
            {
              "expression": "tenant_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_kennels_type": {
          "name": "idx_kennels_type",
          "columns": [
            {
              "expression": "tenant_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            },
            {
              "expression": "kennel_type",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "where": "((is_active = true) AND (deleted_at IS NULL))",
          "with": {}
        }
      },
      "foreignKeys": {
        "kennels_deleted_by_fkey": {
          "name": "kennels_deleted_by_fkey",
          "tableFrom": "kennels",
          "tableTo": "profiles",
          "schemaTo": "public",
          "columnsFrom": [
            "deleted_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "kennels_tenant_id_fkey": {
          "name": "kennels_tenant_id_fkey",
          "tableFrom": "kennels",
          "tableTo": "tenants",
          "schemaTo": "public",
          "columnsFrom": [
            "tenant_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "kennels_tenant_id_code_key": {
          "columns": [
            "tenant_id",
            "code"
          ],
          "nullsNotDistinct": false,
          "name": "kennels_tenant_id_code_key"
        }
      },
      "checkConstraints": {
        "kennels_code_length": {
          "name": "kennels_code_length",
          "value": "char_length(code) >= 1"
        },
        "kennels_current_occupancy_check": {
          "name": "kennels_current_occupancy_check",
          "value": "current_occupancy >= 0"
        },
        "kennels_current_status_check": {
          "name": "kennels_current_status_check",
          "value": "current_status = ANY (ARRAY['available'::text, 'occupied'::text, 'cleaning'::text, 'maintenance'::text, 'reserved'::text])"
        },
        "kennels_daily_rate_check": {
          "name": "kennels_daily_rate_check",
          "value": "daily_rate >= (0)::numeric"
        },
        "kennels_kennel_type_check": {
          "name": "kennels_kennel_type_check",
          "value": "kennel_type = ANY (ARRAY['standard'::text, 'isolation'::text, 'icu'::text, 'recovery'::text, 'large'::text, 'small'::text, 'extra-large'::text, 'oxygen'::text, 'exotic'::text])"
        },
        "kennels_max_occupancy_check": {
          "name": "kennels_max_occupancy_check",
          "value": "max_occupancy > 0"
        },
        "kennels_max_weight_kg_check": {
          "name": "kennels_max_weight_kg_check",
          "value": "(max_weight_kg IS NULL) OR (max_weight_kg > (0)::numeric)"
        },
        "kennels_name_length": {
          "name": "kennels_name_length",
          "value": "char_length(name) >= 1"
        },
        "kennels_occupancy_valid": {
          "name": "kennels_occupancy_valid",
          "value": "current_occupancy <= max_occupancy"
        }
      },
      "policies": {
        "Service role full access kennels": {
          "name": "Service role full access kennels",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "service_role"
          ],
          "using": "true"
        },
        "Staff manage kennels": {
          "name": "Staff manage kennels",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "authenticated"
          ]
        }
      },
      "isRLSEnabled": true
    },
    "public.hospitalizations": {
      "name": "hospitalizations",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "tenant_id": {
          "name": "tenant_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "pet_id": {
          "name": "pet_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "kennel_id": {
          "name": "kennel_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "primary_vet_id": {
          "name": "primary_vet_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "admitted_by": {
          "name": "admitted_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "admission_number": {
          "name": "admission_number",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "admitted_at": {
          "name": "admitted_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "expected_discharge": {
          "name": "expected_discharge",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "actual_discharge": {
          "name": "actual_discharge",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "reason": {
          "name": "reason",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "diagnosis": {
          "name": "diagnosis",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "notes": {
          "name": "notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "discharge_instructions": {
          "name": "discharge_instructions",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "acuity_level": {
          "name": "acuity_level",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "default": "'normal'"
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'admitted'"
        },
        "discharge_notes": {
          "name": "discharge_notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "discharged_by": {
          "name": "discharged_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "follow_up_required": {
          "name": "follow_up_required",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "follow_up_date": {
          "name": "follow_up_date",
          "type": "date",
          "primaryKey": false,
          "notNull": false
        },
        "estimated_cost": {
          "name": "estimated_cost",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "actual_cost": {
          "name": "actual_cost",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "invoice_id": {
          "name": "invoice_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "deleted_at": {
          "name": "deleted_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "deleted_by": {
          "name": "deleted_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_hospitalizations_active": {
          "name": "idx_hospitalizations_active",
          "columns": [
            {
              "expression": "tenant_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            },
            {
              "expression": "status",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "where": "((status <> ALL (ARRAY['discharged'::text, 'deceased'::text, 'transferred'::text])) AND (deleted_at IS NULL))",
          "with": {}
        },
        "idx_hospitalizations_admitted_by": {
          "name": "idx_hospitalizations_admitted_by",
          "columns": [
            {
              "expression": "admitted_by",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_hospitalizations_board": {
          "name": "idx_hospitalizations_board",
          "columns": [
            {
              "expression": "tenant_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            },
            {
              "expression": "status",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            },
            {
              "expression": "acuity_level",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            },
            {
              "expression": "pet_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            },
            {
              "expression": "kennel_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            },
            {
              "expression": "admitted_at",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            },
            {
              "expression": "expected_discharge",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            },
            {
              "expression": "diagnosis",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            },
            {
              "expression": "primary_vet_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "where": "((status <> ALL (ARRAY['discharged'::text, 'deceased'::text, 'transferred'::text])) AND (deleted_at IS NULL))",
          "with": {}
        },
        "idx_hospitalizations_discharged_by": {
          "name": "idx_hospitalizations_discharged_by",
          "columns": [
            {
              "expression": "discharged_by",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_hospitalizations_kennel": {
          "name": "idx_hospitalizations_kennel",
          "columns": [
            {
              "expression": "kennel_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_hospitalizations_one_active_per_pet": {
          "name": "idx_hospitalizations_one_active_per_pet",
          "columns": [
            {
              "expression": "pet_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "where": "((status <> ALL (ARRAY['discharged'::text, 'deceased'::text, 'transferred'::text])) AND (deleted_at IS NULL))",
          "with": {}
        },
        "idx_hospitalizations_pet": {
          "name": "idx_hospitalizations_pet",
          "columns": [
            {
              "expression": "pet_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_hospitalizations_primary_vet": {
          "name": "idx_hospitalizations_primary_vet",
          "columns": [
            {
              "expression": "primary_vet_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_hospitalizations_status": {
          "name": "idx_hospitalizations_status",
          "columns": [
            {
              "expression": "status",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "where": "(deleted_at IS NULL)",
          "with": {}
        },
        "idx_hospitalizations_tenant": {
          "name": "idx_hospitalizations_tenant",
          "columns": [
            {
              "expression": "tenant_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "hospitalizations_admitted_by_fkey": {
          "name": "hospitalizations_admitted_by_fkey",
          "tableFrom": "hospitalizations",
          "tableTo": "profiles",
          "schemaTo": "public",
          "columnsFrom": [
            "admitted_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "hospitalizations_deleted_by_fkey": {
          "name": "hospitalizations_deleted_by_fkey",
          "tableFrom": "hospitalizations",
          "tableTo": "profiles",
          "schemaTo": "public",
          "columnsFrom": [
            "deleted_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "hospitalizations_discharged_by_fkey": {
          "name": "hospitalizations_discharged_by_fkey",
          "tableFrom": "hospitalizations",
          "tableTo": "profiles",
          "schemaTo": "public",
          "columnsFrom": [
            "discharged_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "hospitalizations_invoice_id_fkey": {
          "name": "hospitalizations_invoice_id_fkey",
          "tableFrom": "hospitalizations",
          "tableTo": "invoices",
          "schemaTo": "public",
          "columnsFrom": [
            "invoice_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "hospitalizations_kennel_id_fkey": {
          "name": "hospitalizations_kennel_id_fkey",
          "tableFrom": "hospitalizations",
          "tableTo": "kennels",
          "schemaTo": "public",
          "columnsFrom": [
            "kennel_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "hospitalizations_pet_id_fkey": {
          "name": "hospitalizations_pet_id_fkey",
          "tableFrom": "hospitalizations",
          "tableTo": "pets",
          "schemaTo": "public",
          "columnsFrom": [
            "pet_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "restrict",
          "onUpdate": "no action"
        },
        "hospitalizations_primary_vet_id_fkey": {
          "name": "hospitalizations_primary_vet_id_fkey",
          "tableFrom": "hospitalizations",
          "tableTo": "profiles",
          "schemaTo": "public",
          "columnsFrom": [
            "primary_vet_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "hospitalizations_tenant_id_fkey": {
          "name": "hospitalizations_tenant_id_fkey",
          "tableFrom": "hospitalizations",
          "tableTo": "tenants",
          "schemaTo": "public",
          "columnsFrom": [
            "tenant_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "hospitalizations_tenant_id_admission_number_key": {
          "columns": [
            "tenant_id",
            "admission_number"
          ],
          "nullsNotDistinct": false,
          "name": "hospitalizations_tenant_id_admission_number_key"
        }
      },
      "checkConstraints": {
        "hospitalizations_actual_cost_check": {
          "name": "hospitalizations_actual_cost_check",
          "value": "(actual_cost IS NULL) OR (actual_cost >= (0)::numeric)"
        },
        "hospitalizations_acuity_level_check": {
          "name": "hospitalizations_acuity_level_check",
          "value": "acuity_level = ANY (ARRAY['low'::text, 'normal'::text, 'high'::text, 'critical'::text])"
        },
        "hospitalizations_discharge_after_admission": {
          "name": "hospitalizations_discharge_after_admission",
          "value": "(actual_discharge IS NULL) OR (actual_discharge >= admitted_at)"
        },
        "hospitalizations_estimated_cost_check": {
          "name": "hospitalizations_estimated_cost_check",
          "value": "(estimated_cost IS NULL) OR (estimated_cost >= (0)::numeric)"
        },
        "hospitalizations_reason_length": {
          "name": "hospitalizations_reason_length",
          "value": "char_length(reason) >= 3"
        },
        "hospitalizations_status_check": {
          "name": "hospitalizations_status_check",
          "value": "status = ANY (ARRAY['admitted'::text, 'in_treatment'::text, 'stable'::text, 'critical'::text, 'recovering'::text, 'discharged'::text, 'deceased'::text, 'transferred'::text])"
        }
      },
      "policies": {
        "Owners view pet hospitalizations": {
          "name": "Owners view pet hospitalizations",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "(is_owner_of_pet(pet_id) AND (deleted_at IS NULL))"
        },
        "Service role full access hospitalizations": {
          "name": "Service role full access hospitalizations",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "service_role"
          ]
        },
        "Staff manage hospitalizations": {
          "name": "Staff manage hospitalizations",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "authenticated"
          ]
        }
      },
      "isRLSEnabled": true
    },
    "public.hospitalization_vitals": {
      "name": "hospitalization_vitals",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "hospitalization_id": {
          "name": "hospitalization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "tenant_id": {
          "name": "tenant_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "temperature": {
          "name": "temperature",
          "type": "numeric(4, 1)",
          "primaryKey": false,
          "notNull": false
        },
        "heart_rate": {
          "name": "heart_rate",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "respiratory_rate": {
          "name": "respiratory_rate",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "blood_pressure_systolic": {
          "name": "blood_pressure_systolic",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "blood_pressure_diastolic": {
          "name": "blood_pressure_diastolic",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "spo2": {
          "name": "spo2",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "weight_kg": {
          "name": "weight_kg",
          "type": "numeric(6, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "pain_score": {
          "name": "pain_score",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "mentation": {
          "name": "mentation",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "hydration_status": {
          "name": "hydration_status",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "notes": {
          "name": "notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "recorded_by": {
          "name": "recorded_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "recorded_at": {
          "name": "recorded_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_hospitalization_vitals_hosp": {
          "name": "idx_hospitalization_vitals_hosp",
          "columns": [
            {
              "expression": "hospitalization_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_hospitalization_vitals_recorded_brin": {
          "name": "idx_hospitalization_vitals_recorded_brin",
          "columns": [
            {
              "expression": "recorded_at",
              "asc": true,
              "nulls": "last",
              "opclass": "timestamptz_minmax_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "brin",
          "with": {
            "pages_per_range": "32"
          }
        },
        "idx_hospitalization_vitals_recorded_by": {
          "name": "idx_hospitalization_vitals_recorded_by",
          "columns": [
            {
              "expression": "recorded_by",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_hospitalization_vitals_tenant": {
          "name": "idx_hospitalization_vitals_tenant",
          "columns": [
            {
              "expression": "tenant_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "hospitalization_vitals_hospitalization_id_fkey": {
          "name": "hospitalization_vitals_hospitalization_id_fkey",
          "tableFrom": "hospitalization_vitals",
          "tableTo": "hospitalizations",
          "schemaTo": "public",
          "columnsFrom": [
            "hospitalization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "hospitalization_vitals_recorded_by_fkey": {
          "name": "hospitalization_vitals_recorded_by_fkey",
          "tableFrom": "hospitalization_vitals",
          "tableTo": "profiles",
          "schemaTo": "public",
          "columnsFrom": [
            "recorded_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "hospitalization_vitals_tenant_id_fkey": {
          "name": "hospitalization_vitals_tenant_id_fkey",
          "tableFrom": "hospitalization_vitals",
          "tableTo": "tenants",
          "schemaTo": "public",
          "columnsFrom": [
            "tenant_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {
        "hospitalization_vitals_blood_pressure_diastolic_check": {
          "name": "hospitalization_vitals_blood_pressure_diastolic_check",
          "value": "(blood_pressure_diastolic IS NULL) OR ((blood_pressure_diastolic >= 20) AND (blood_pressure_diastolic <= 200))"
        },
        "hospitalization_vitals_blood_pressure_systolic_check": {
          "name": "hospitalization_vitals_blood_pressure_systolic_check",
          "value": "(blood_pressure_systolic IS NULL) OR ((blood_pressure_systolic >= 40) AND (blood_pressure_systolic <= 300))"
        },
        "hospitalization_vitals_heart_rate_check": {
          "name": "hospitalization_vitals_heart_rate_check",
          "value": "(heart_rate IS NULL) OR ((heart_rate >= 20) AND (heart_rate <= 400))"
        },
        "hospitalization_vitals_hydration_status_check": {
          "name": "hospitalization_vitals_hydration_status_check",
          "value": "(hydration_status IS NULL) OR (hydration_status = ANY (ARRAY['normal'::text, 'mild'::text, 'moderate'::text, 'severe'::text]))"
        },
        "hospitalization_vitals_mentation_check": {
          "name": "hospitalization_vitals_mentation_check",
          "value": "(mentation IS NULL) OR (mentation = ANY (ARRAY['bright'::text, 'quiet'::text, 'dull'::text, 'obtunded'::text, 'comatose'::text]))"
        },
        "hospitalization_vitals_pain_score_check": {
          "name": "hospitalization_vitals_pain_score_check",
          "value": "(pain_score IS NULL) OR ((pain_score >= 0) AND (pain_score <= 10))"
        },
        "hospitalization_vitals_respiratory_rate_check": {
          "name": "hospitalization_vitals_respiratory_rate_check",
          "value": "(respiratory_rate IS NULL) OR ((respiratory_rate >= 5) AND (respiratory_rate <= 150))"
        },
        "hospitalization_vitals_spo2_check": {
          "name": "hospitalization_vitals_spo2_check",
          "value": "(spo2 IS NULL) OR ((spo2 >= 0) AND (spo2 <= 100))"
        },
        "hospitalization_vitals_temperature_check": {
          "name": "hospitalization_vitals_temperature_check",
          "value": "(temperature IS NULL) OR ((temperature >= (30)::numeric) AND (temperature <= (45)::numeric))"
        },
        "hospitalization_vitals_weight_kg_check": {
          "name": "hospitalization_vitals_weight_kg_check",
          "value": "(weight_kg IS NULL) OR (weight_kg > (0)::numeric)"
        }
      },
      "policies": {
        "Owners view vitals": {
          "name": "Owners view vitals",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "(EXISTS ( SELECT 1\n   FROM hospitalizations h\n  WHERE ((h.id = hospitalization_vitals.hospitalization_id) AND is_owner_of_pet(h.pet_id))))"
        },
        "Service role full access vitals": {
          "name": "Service role full access vitals",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "service_role"
          ]
        },
        "Staff manage vitals": {
          "name": "Staff manage vitals",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "authenticated"
          ]
        }
      },
      "isRLSEnabled": true
    },
    "public.hospitalization_medications": {
      "name": "hospitalization_medications",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "hospitalization_id": {
          "name": "hospitalization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "tenant_id": {
          "name": "tenant_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "medication_name": {
          "name": "medication_name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "dose": {
          "name": "dose",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "route": {
          "name": "route",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "frequency": {
          "name": "frequency",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "scheduled_at": {
          "name": "scheduled_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "administered_at": {
          "name": "administered_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "skipped_reason": {
          "name": "skipped_reason",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "default": "'scheduled'"
        },
        "administered_by": {
          "name": "administered_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "notes": {
          "name": "notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_hospitalization_medications_administered_by": {
          "name": "idx_hospitalization_medications_administered_by",
          "columns": [
            {
              "expression": "administered_by",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_hospitalization_medications_hosp": {
          "name": "idx_hospitalization_medications_hosp",
          "columns": [
            {
              "expression": "hospitalization_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_hospitalization_medications_scheduled": {
          "name": "idx_hospitalization_medications_scheduled",
          "columns": [
            {
              "expression": "scheduled_at",
              "asc": true,
              "nulls": "last",
              "opclass": "timestamptz_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "where": "(status = 'scheduled'::text)",
          "with": {}
        },
        "idx_hospitalization_medications_tenant": {
          "name": "idx_hospitalization_medications_tenant",
          "columns": [
            {
              "expression": "tenant_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_hospitalization_meds_scheduled_brin": {
          "name": "idx_hospitalization_meds_scheduled_brin",
          "columns": [
            {
              "expression": "scheduled_at",
              "asc": true,
              "nulls": "last",
              "opclass": "timestamptz_minmax_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "brin",
          "where": "(scheduled_at IS NOT NULL)",
          "with": {
            "pages_per_range": "32"
          }
        }
      },
      "foreignKeys": {
        "hospitalization_medications_administered_by_fkey": {
          "name": "hospitalization_medications_administered_by_fkey",
          "tableFrom": "hospitalization_medications",
          "tableTo": "profiles",
          "schemaTo": "public",
          "columnsFrom": [
            "administered_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "hospitalization_medications_hospitalization_id_fkey": {
          "name": "hospitalization_medications_hospitalization_id_fkey",
          "tableFrom": "hospitalization_medications",
          "tableTo": "hospitalizations",
          "schemaTo": "public",
          "columnsFrom": [
            "hospitalization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "hospitalization_medications_tenant_id_fkey": {
          "name": "hospitalization_medications_tenant_id_fkey",
          "tableFrom": "hospitalization_medications",
          "tableTo": "tenants",
          "schemaTo": "public",
          "columnsFrom": [
            "tenant_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {
        "hospitalization_medications_route_check": {
          "name": "hospitalization_medications_route_check",
          "value": "(route IS NULL) OR (route = ANY (ARRAY['oral'::text, 'IV'::text, 'IM'::text, 'SQ'::text, 'topical'::text, 'inhaled'::text, 'rectal'::text, 'ophthalmic'::text, 'otic'::text]))"
        },
        "hospitalization_medications_status_check": {
          "name": "hospitalization_medications_status_check",
          "value": "status = ANY (ARRAY['scheduled'::text, 'administered'::text, 'skipped'::text, 'held'::text])"
        }
      },
      "policies": {
        "Service role full access medications": {
          "name": "Service role full access medications",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "service_role"
          ],
          "using": "true"
        },
        "Staff manage medications": {
          "name": "Staff manage medications",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "authenticated"
          ]
        }
      },
      "isRLSEnabled": true
    },
    "public.hospitalization_treatments": {
      "name": "hospitalization_treatments",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "hospitalization_id": {
          "name": "hospitalization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "tenant_id": {
          "name": "tenant_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "treatment_type": {
          "name": "treatment_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "scheduled_at": {
          "name": "scheduled_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "performed_at": {
          "name": "performed_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "default": "'scheduled'"
        },
        "performed_by": {
          "name": "performed_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "notes": {
          "name": "notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_hospitalization_treatments_hosp": {
          "name": "idx_hospitalization_treatments_hosp",
          "columns": [
            {
              "expression": "hospitalization_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_hospitalization_treatments_performed_by": {
          "name": "idx_hospitalization_treatments_performed_by",
          "columns": [
            {
              "expression": "performed_by",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_hospitalization_treatments_tenant": {
          "name": "idx_hospitalization_treatments_tenant",
          "columns": [
            {
              "expression": "tenant_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "hospitalization_treatments_hospitalization_id_fkey": {
          "name": "hospitalization_treatments_hospitalization_id_fkey",
          "tableFrom": "hospitalization_treatments",
          "tableTo": "hospitalizations",
          "schemaTo": "public",
          "columnsFrom": [
            "hospitalization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "hospitalization_treatments_performed_by_fkey": {
          "name": "hospitalization_treatments_performed_by_fkey",
          "tableFrom": "hospitalization_treatments",
          "tableTo": "profiles",
          "schemaTo": "public",
          "columnsFrom": [
            "performed_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "hospitalization_treatments_tenant_id_fkey": {
          "name": "hospitalization_treatments_tenant_id_fkey",
          "tableFrom": "hospitalization_treatments",
          "tableTo": "tenants",
          "schemaTo": "public",
          "columnsFrom": [
            "tenant_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {
        "hospitalization_treatments_status_check": {
          "name": "hospitalization_treatments_status_check",
          "value": "status = ANY (ARRAY['scheduled'::text, 'performed'::text, 'skipped'::text, 'pending'::text])"
        }
      },
      "policies": {
        "Service role full access treatments": {
          "name": "Service role full access treatments",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "service_role"
          ],
          "using": "true"
        },
        "Staff manage treatments": {
          "name": "Staff manage treatments",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "authenticated"
          ]
        }
      },
      "isRLSEnabled": true
    },
    "public.hospitalization_feedings": {
      "name": "hospitalization_feedings",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "hospitalization_id": {
          "name": "hospitalization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "tenant_id": {
          "name": "tenant_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "food_type": {
          "name": "food_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "amount": {
          "name": "amount",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "method": {
          "name": "method",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "scheduled_at": {
          "name": "scheduled_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "fed_at": {
          "name": "fed_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "consumed_amount": {
          "name": "consumed_amount",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "appetite_score": {
          "name": "appetite_score",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "vomited": {
          "name": "vomited",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "default": "'scheduled'"
        },
        "fed_by": {
          "name": "fed_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "notes": {
          "name": "notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_hospitalization_feedings_fed_by": {
          "name": "idx_hospitalization_feedings_fed_by",
          "columns": [
            {
              "expression": "fed_by",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_hospitalization_feedings_hosp": {
          "name": "idx_hospitalization_feedings_hosp",
          "columns": [
            {
              "expression": "hospitalization_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_hospitalization_feedings_tenant": {
          "name": "idx_hospitalization_feedings_tenant",
          "columns": [
            {
              "expression": "tenant_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "hospitalization_feedings_fed_by_fkey": {
          "name": "hospitalization_feedings_fed_by_fkey",
          "tableFrom": "hospitalization_feedings",
          "tableTo": "profiles",
          "schemaTo": "public",
          "columnsFrom": [
            "fed_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "hospitalization_feedings_hospitalization_id_fkey": {
          "name": "hospitalization_feedings_hospitalization_id_fkey",
          "tableFrom": "hospitalization_feedings",
          "tableTo": "hospitalizations",
          "schemaTo": "public",
          "columnsFrom": [
            "hospitalization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "hospitalization_feedings_tenant_id_fkey": {
          "name": "hospitalization_feedings_tenant_id_fkey",
          "tableFrom": "hospitalization_feedings",
          "tableTo": "tenants",
          "schemaTo": "public",
          "columnsFrom": [
            "tenant_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {
        "hospitalization_feedings_appetite_score_check": {
          "name": "hospitalization_feedings_appetite_score_check",
          "value": "(appetite_score IS NULL) OR ((appetite_score >= 0) AND (appetite_score <= 5))"
        },
        "hospitalization_feedings_method_check": {
          "name": "hospitalization_feedings_method_check",
          "value": "(method IS NULL) OR (method = ANY (ARRAY['oral'::text, 'syringe'::text, 'tube'::text, 'assisted'::text]))"
        },
        "hospitalization_feedings_status_check": {
          "name": "hospitalization_feedings_status_check",
          "value": "status = ANY (ARRAY['scheduled'::text, 'completed'::text, 'refused'::text, 'partial'::text])"
        }
      },
      "policies": {
        "Service role full access feedings": {
          "name": "Service role full access feedings",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "service_role"
          ],
          "using": "true"
        },
        "Staff manage feedings": {
          "name": "Staff manage feedings",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "authenticated"
          ]
        }
      },
      "isRLSEnabled": true
    },
    "public.store_campaign_items": {
      "name": "store_campaign_items",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "campaign_id": {
          "name": "campaign_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "tenant_id": {
          "name": "tenant_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "product_id": {
          "name": "product_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "discount_type": {
          "name": "discount_type",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "discount_value": {
          "name": "discount_value",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_store_campaign_items_campaign": {
          "name": "idx_store_campaign_items_campaign",
          "columns": [
            {
              "expression": "campaign_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_store_campaign_items_product": {
          "name": "idx_store_campaign_items_product",
          "columns": [
            {
              "expression": "product_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_store_campaign_items_tenant": {
          "name": "idx_store_campaign_items_tenant",
          "columns": [
            {
              "expression": "tenant_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "store_campaign_items_campaign_id_product_id_key": {
          "columns": [
            "campaign_id",
            "product_id"
          ],
          "nullsNotDistinct": false,
          "name": "store_campaign_items_campaign_id_product_id_key"
        }
      },
      "checkConstraints": {
        "store_campaign_items_discount_type_check": {
          "name": "store_campaign_items_discount_type_check",
          "value": "discount_type = ANY (ARRAY['percentage'::text, 'fixed_amount'::text])"
        }
      },
      "policies": {
        "Clinic staff manage campaign_items": {
          "name": "Clinic staff manage campaign_items",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "authenticated"
          ],
          "withCheck": "(EXISTS ( SELECT 1\n   FROM profiles p\n  WHERE ((p.id = auth.uid()) AND (p.tenant_id = store_campaign_items.tenant_id) AND (p.role = ANY (ARRAY['vet'::text, 'admin'::text])) AND (p.deleted_at IS NULL))))",
          "using": "(EXISTS ( SELECT 1\n   FROM profiles p\n  WHERE ((p.id = auth.uid()) AND (p.tenant_id = store_campaign_items.tenant_id) AND (p.role = ANY (ARRAY['vet'::text, 'admin'::text])) AND (p.deleted_at IS NULL))))"
        },
        "Service role full access campaign items": {
          "name": "Service role full access campaign items",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "service_role"
          ]
        },
        "Service role full access campaign_items": {
          "name": "Service role full access campaign_items",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "service_role"
          ]
        }
      },
      "isRLSEnabled": true
    },
    "public.audit_log_enhanced": {
      "name": "audit_log_enhanced",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "table_name": {
          "name": "table_name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "record_id": {
          "name": "record_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "operation": {
          "name": "operation",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "old_values": {
          "name": "old_values",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "new_values": {
          "name": "new_values",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "changed_fields": {
          "name": "changed_fields",
          "type": "text[]",
          "primaryKey": false,
          "notNull": false
        },
        "tenant_id": {
          "name": "tenant_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "user_email": {
          "name": "user_email",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "user_role": {
          "name": "user_role",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "session_id": {
          "name": "session_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "ip_address": {
          "name": "ip_address",
          "type": "inet",
          "primaryKey": false,
          "notNull": false
        },
        "user_agent": {
          "name": "user_agent",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "request_id": {
          "name": "request_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "api_endpoint": {
          "name": "api_endpoint",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "occurred_at": {
          "name": "occurred_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "data_classification": {
          "name": "data_classification",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "default": "'internal'"
        },
        "retention_until": {
          "name": "retention_until",
          "type": "date",
          "primaryKey": false,
          "notNull": false
        },
        "compliance_tags": {
          "name": "compliance_tags",
          "type": "text[]",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_audit_enhanced_record": {
          "name": "idx_audit_enhanced_record",
          "columns": [
            {
              "expression": "record_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_audit_enhanced_table": {
          "name": "idx_audit_enhanced_table",
          "columns": [
            {
              "expression": "table_name",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_audit_enhanced_tenant": {
          "name": "idx_audit_enhanced_tenant",
          "columns": [
            {
              "expression": "tenant_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_audit_enhanced_time": {
          "name": "idx_audit_enhanced_time",
          "columns": [
            {
              "expression": "occurred_at",
              "asc": false,
              "nulls": "first",
              "opclass": "timestamptz_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_audit_enhanced_user": {
          "name": "idx_audit_enhanced_user",
          "columns": [
            {
              "expression": "user_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {
        "audit_log_enhanced_data_classification_check": {
          "name": "audit_log_enhanced_data_classification_check",
          "value": "data_classification = ANY (ARRAY['public'::text, 'internal'::text, 'confidential'::text, 'restricted'::text])"
        },
        "audit_log_enhanced_operation_check": {
          "name": "audit_log_enhanced_operation_check",
          "value": "operation = ANY (ARRAY['INSERT'::text, 'UPDATE'::text, 'DELETE'::text])"
        }
      },
      "policies": {},
      "isRLSEnabled": true
    },
    "public.audit_configuration": {
      "name": "audit_configuration",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "table_name": {
          "name": "table_name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "audit_inserts": {
          "name": "audit_inserts",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": true
        },
        "audit_updates": {
          "name": "audit_updates",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": true
        },
        "audit_deletes": {
          "name": "audit_deletes",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": true
        },
        "capture_old_values": {
          "name": "capture_old_values",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": true
        },
        "capture_new_values": {
          "name": "capture_new_values",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": true
        },
        "excluded_columns": {
          "name": "excluded_columns",
          "type": "text[]",
          "primaryKey": false,
          "notNull": false,
          "default": "'{\"RAY['updated_at'::text\",\"'created_at'::tex\"}'"
        },
        "sensitive_columns": {
          "name": "sensitive_columns",
          "type": "text[]",
          "primaryKey": false,
          "notNull": false,
          "default": "'{\"RAY\"}'"
        },
        "data_classification": {
          "name": "data_classification",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "default": "'internal'"
        },
        "retention_days": {
          "name": "retention_days",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 365
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "audit_configuration_table_name_key": {
          "columns": [
            "table_name"
          ],
          "nullsNotDistinct": false,
          "name": "audit_configuration_table_name_key"
        }
      },
      "checkConstraints": {},
      "policies": {},
      "isRLSEnabled": true
    },
    "public.security_events": {
      "name": "security_events",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "event_type": {
          "name": "event_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "user_email": {
          "name": "user_email",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "target_user_id": {
          "name": "target_user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "tenant_id": {
          "name": "tenant_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "ip_address": {
          "name": "ip_address",
          "type": "inet",
          "primaryKey": false,
          "notNull": false
        },
        "user_agent": {
          "name": "user_agent",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "geolocation": {
          "name": "geolocation",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "details": {
          "name": "details",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "severity": {
          "name": "severity",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "default": "'info'"
        },
        "acknowledged": {
          "name": "acknowledged",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "acknowledged_by": {
          "name": "acknowledged_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "acknowledged_at": {
          "name": "acknowledged_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "occurred_at": {
          "name": "occurred_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_security_events_severity": {
          "name": "idx_security_events_severity",
          "columns": [
            {
              "expression": "severity",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_security_events_time": {
          "name": "idx_security_events_time",
          "columns": [
            {
              "expression": "occurred_at",
              "asc": false,
              "nulls": "first",
              "opclass": "timestamptz_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_security_events_type": {
          "name": "idx_security_events_type",
          "columns": [
            {
              "expression": "event_type",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_security_events_user": {
          "name": "idx_security_events_user",
          "columns": [
            {
              "expression": "user_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {},
      "policies": {},
      "isRLSEnabled": true
    },
    "public.data_access_log": {
      "name": "data_access_log",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "table_name": {
          "name": "table_name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "record_id": {
          "name": "record_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "record_count": {
          "name": "record_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "query_type": {
          "name": "query_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "user_email": {
          "name": "user_email",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "user_role": {
          "name": "user_role",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "tenant_id": {
          "name": "tenant_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "ip_address": {
          "name": "ip_address",
          "type": "inet",
          "primaryKey": false,
          "notNull": false
        },
        "purpose": {
          "name": "purpose",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "justification": {
          "name": "justification",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "query_hash": {
          "name": "query_hash",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "fields_accessed": {
          "name": "fields_accessed",
          "type": "text[]",
          "primaryKey": false,
          "notNull": false
        },
        "filter_criteria": {
          "name": "filter_criteria",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "occurred_at": {
          "name": "occurred_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_data_access_table": {
          "name": "idx_data_access_table",
          "columns": [
            {
              "expression": "table_name",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_data_access_time": {
          "name": "idx_data_access_time",
          "columns": [
            {
              "expression": "occurred_at",
              "asc": false,
              "nulls": "first",
              "opclass": "timestamptz_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_data_access_user": {
          "name": "idx_data_access_user",
          "columns": [
            {
              "expression": "user_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {},
      "policies": {},
      "isRLSEnabled": true
    },
    "public.materialized_view_refresh_log": {
      "name": "materialized_view_refresh_log",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "view_name": {
          "name": "view_name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "refresh_started_at": {
          "name": "refresh_started_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true
        },
        "refresh_completed_at": {
          "name": "refresh_completed_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "duration_seconds": {
          "name": "duration_seconds",
          "type": "numeric(10, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "rows_affected": {
          "name": "rows_affected",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "default": "'in_progress'"
        },
        "error_message": {
          "name": "error_message",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_mv_refresh_log_time": {
          "name": "idx_mv_refresh_log_time",
          "columns": [
            {
              "expression": "refresh_started_at",
              "asc": false,
              "nulls": "first",
              "opclass": "timestamptz_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_mv_refresh_log_view": {
          "name": "idx_mv_refresh_log_view",
          "columns": [
            {
              "expression": "view_name",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {},
      "policies": {},
      "isRLSEnabled": false
    },
    "public.scheduled_job_log": {
      "name": "scheduled_job_log",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "job_name": {
          "name": "job_name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "started_at": {
          "name": "started_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "completed_at": {
          "name": "completed_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "duration_ms": {
          "name": "duration_ms",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "default": "'running'"
        },
        "result": {
          "name": "result",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "error_message": {
          "name": "error_message",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "rows_affected": {
          "name": "rows_affected",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_job_log_name": {
          "name": "idx_job_log_name",
          "columns": [
            {
              "expression": "job_name",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_job_log_time": {
          "name": "idx_job_log_time",
          "columns": [
            {
              "expression": "started_at",
              "asc": false,
              "nulls": "first",
              "opclass": "timestamptz_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {
        "scheduled_job_log_status_check": {
          "name": "scheduled_job_log_status_check",
          "value": "status = ANY (ARRAY['running'::text, 'completed'::text, 'failed'::text])"
        }
      },
      "policies": {},
      "isRLSEnabled": false
    },
    "public.loyalty_rules": {
      "name": "loyalty_rules",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "tenant_id": {
          "name": "tenant_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "points_per_currency": {
          "name": "points_per_currency",
          "type": "numeric(10, 4)",
          "primaryKey": false,
          "notNull": false,
          "default": "'0.01'"
        },
        "min_purchase_amount": {
          "name": "min_purchase_amount",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": false,
          "default": "'0'"
        },
        "max_points_per_transaction": {
          "name": "max_points_per_transaction",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "service_category_multipliers": {
          "name": "service_category_multipliers",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "tier_multipliers": {
          "name": "tier_multipliers",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{\"gold\":1.5,\"bronze\":1,\"silver\":1.25,\"platinum\":2}'::jsonb"
        },
        "points_value": {
          "name": "points_value",
          "type": "numeric(10, 4)",
          "primaryKey": false,
          "notNull": false,
          "default": "'100'"
        },
        "min_points_to_redeem": {
          "name": "min_points_to_redeem",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 100
        },
        "max_redemption_percentage": {
          "name": "max_redemption_percentage",
          "type": "numeric(5, 2)",
          "primaryKey": false,
          "notNull": false,
          "default": "'50'"
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_loyalty_rules_tenant": {
          "name": "idx_loyalty_rules_tenant",
          "columns": [
            {
              "expression": "tenant_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {},
      "policies": {
        "Service role full access loyalty rules": {
          "name": "Service role full access loyalty rules",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "service_role"
          ],
          "using": "true"
        },
        "Staff manage loyalty rules": {
          "name": "Staff manage loyalty rules",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "authenticated"
          ]
        }
      },
      "isRLSEnabled": true
    },
    "public.store_subcategories": {
      "name": "store_subcategories",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "tenant_id": {
          "name": "tenant_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "category_id": {
          "name": "category_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "slug": {
          "name": "slug",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "icon": {
          "name": "icon",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "sort_order": {
          "name": "sort_order",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "store_subcategories_category_id_slug_key": {
          "columns": [
            "category_id",
            "slug"
          ],
          "nullsNotDistinct": false,
          "name": "store_subcategories_category_id_slug_key"
        }
      },
      "checkConstraints": {},
      "policies": {
        "Anyone can view active subcategories": {
          "name": "Anyone can view active subcategories",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "public"
          ],
          "using": "(is_active = true)"
        }
      },
      "isRLSEnabled": true
    },
    "public.lab_result_comments": {
      "name": "lab_result_comments",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "lab_order_id": {
          "name": "lab_order_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "tenant_id": {
          "name": "tenant_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "comment": {
          "name": "comment",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "created_by": {
          "name": "created_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_lab_comments_created_by": {
          "name": "idx_lab_comments_created_by",
          "columns": [
            {
              "expression": "created_by",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_lab_comments_order": {
          "name": "idx_lab_comments_order",
          "columns": [
            {
              "expression": "lab_order_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_lab_comments_tenant": {
          "name": "idx_lab_comments_tenant",
          "columns": [
            {
              "expression": "tenant_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "lab_result_comments_created_by_fkey": {
          "name": "lab_result_comments_created_by_fkey",
          "tableFrom": "lab_result_comments",
          "tableTo": "profiles",
          "schemaTo": "public",
          "columnsFrom": [
            "created_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "lab_result_comments_lab_order_id_fkey": {
          "name": "lab_result_comments_lab_order_id_fkey",
          "tableFrom": "lab_result_comments",
          "tableTo": "lab_orders",
          "schemaTo": "public",
          "columnsFrom": [
            "lab_order_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "lab_result_comments_tenant_id_fkey": {
          "name": "lab_result_comments_tenant_id_fkey",
          "tableFrom": "lab_result_comments",
          "tableTo": "tenants",
          "schemaTo": "public",
          "columnsFrom": [
            "tenant_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {},
      "policies": {
        "Service role full access comments": {
          "name": "Service role full access comments",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "service_role"
          ],
          "using": "true"
        },
        "Staff manage comments": {
          "name": "Staff manage comments",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "authenticated"
          ]
        }
      },
      "isRLSEnabled": true
    },
    "public.lab_test_catalog": {
      "name": "lab_test_catalog",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "tenant_id": {
          "name": "tenant_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "code": {
          "name": "code",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "category": {
          "name": "category",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "base_price": {
          "name": "base_price",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": false,
          "default": "'0'"
        },
        "reference_ranges": {
          "name": "reference_ranges",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "turnaround_days": {
          "name": "turnaround_days",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 1
        },
        "requires_fasting": {
          "name": "requires_fasting",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "sample_type": {
          "name": "sample_type",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "sample_volume_ml": {
          "name": "sample_volume_ml",
          "type": "numeric(6, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "special_instructions": {
          "name": "special_instructions",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": true
        },
        "display_order": {
          "name": "display_order",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 100
        },
        "deleted_at": {
          "name": "deleted_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "deleted_by": {
          "name": "deleted_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_lab_test_catalog_active": {
          "name": "idx_lab_test_catalog_active",
          "columns": [
            {
              "expression": "is_active",
              "asc": true,
              "nulls": "last",
              "opclass": "bool_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "where": "((is_active = true) AND (deleted_at IS NULL))",
          "with": {}
        },
        "idx_lab_test_catalog_category": {
          "name": "idx_lab_test_catalog_category",
          "columns": [
            {
              "expression": "category",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_lab_test_catalog_global_code": {
          "name": "idx_lab_test_catalog_global_code",
          "columns": [
            {
              "expression": "code",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "where": "((tenant_id IS NULL) AND (deleted_at IS NULL))",
          "with": {}
        },
        "idx_lab_test_catalog_name_search": {
          "name": "idx_lab_test_catalog_name_search",
          "columns": [
            {
              "expression": "name",
              "asc": true,
              "nulls": "last",
              "opclass": "gin_trgm_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "gin",
          "with": {}
        },
        "idx_lab_test_catalog_ranges_gin": {
          "name": "idx_lab_test_catalog_ranges_gin",
          "columns": [
            {
              "expression": "reference_ranges",
              "asc": true,
              "nulls": "last",
              "opclass": "jsonb_path_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "gin",
          "where": "((reference_ranges IS NOT NULL) AND (reference_ranges <> '{}'::jsonb))",
          "with": {}
        },
        "idx_lab_test_catalog_sample_type": {
          "name": "idx_lab_test_catalog_sample_type",
          "columns": [
            {
              "expression": "sample_type",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_lab_test_catalog_tenant": {
          "name": "idx_lab_test_catalog_tenant",
          "columns": [
            {
              "expression": "tenant_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "lab_test_catalog_deleted_by_fkey": {
          "name": "lab_test_catalog_deleted_by_fkey",
          "tableFrom": "lab_test_catalog",
          "tableTo": "profiles",
          "schemaTo": "public",
          "columnsFrom": [
            "deleted_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "lab_test_catalog_tenant_id_fkey": {
          "name": "lab_test_catalog_tenant_id_fkey",
          "tableFrom": "lab_test_catalog",
          "tableTo": "tenants",
          "schemaTo": "public",
          "columnsFrom": [
            "tenant_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "lab_test_catalog_tenant_id_code_key": {
          "columns": [
            "tenant_id",
            "code"
          ],
          "nullsNotDistinct": false,
          "name": "lab_test_catalog_tenant_id_code_key"
        }
      },
      "checkConstraints": {
        "lab_test_catalog_base_price_check": {
          "name": "lab_test_catalog_base_price_check",
          "value": "base_price >= (0)::numeric"
        },
        "lab_test_catalog_code_length": {
          "name": "lab_test_catalog_code_length",
          "value": "char_length(code) >= 2"
        },
        "lab_test_catalog_name_length": {
          "name": "lab_test_catalog_name_length",
          "value": "char_length(name) >= 2"
        },
        "lab_test_catalog_sample_type_check": {
          "name": "lab_test_catalog_sample_type_check",
          "value": "(sample_type IS NULL) OR (sample_type = ANY (ARRAY['blood'::text, 'serum'::text, 'plasma'::text, 'urine'::text, 'feces'::text, 'tissue'::text, 'swab'::text, 'citrated_blood'::text, 'edta_blood'::text, 'aspirate'::text, 'biopsy'::text, 'skin'::text, 'hair'::text, 'other'::text]))"
        },
        "lab_test_catalog_sample_volume_ml_check": {
          "name": "lab_test_catalog_sample_volume_ml_check",
          "value": "(sample_volume_ml IS NULL) OR (sample_volume_ml > (0)::numeric)"
        },
        "lab_test_catalog_turnaround_days_check": {
          "name": "lab_test_catalog_turnaround_days_check",
          "value": "turnaround_days > 0"
        }
      },
      "policies": {
        "Public read lab tests": {
          "name": "Public read lab tests",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "public"
          ],
          "using": "((is_active = true) AND (deleted_at IS NULL))"
        },
        "Service role full access lab tests": {
          "name": "Service role full access lab tests",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "service_role"
          ]
        },
        "Staff manage tenant tests": {
          "name": "Staff manage tenant tests",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "authenticated"
          ]
        }
      },
      "isRLSEnabled": true
    },
    "public.store_product_variants": {
      "name": "store_product_variants",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "product_id": {
          "name": "product_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "tenant_id": {
          "name": "tenant_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "sku": {
          "name": "sku",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "variant_type": {
          "name": "variant_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "price_modifier": {
          "name": "price_modifier",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": false,
          "default": "'0'"
        },
        "stock_quantity": {
          "name": "stock_quantity",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "sort_order": {
          "name": "sort_order",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "is_default": {
          "name": "is_default",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "store_product_variants_tenant_id_sku_key": {
          "columns": [
            "tenant_id",
            "sku"
          ],
          "nullsNotDistinct": false,
          "name": "store_product_variants_tenant_id_sku_key"
        }
      },
      "checkConstraints": {},
      "policies": {
        "Anyone can view active variants": {
          "name": "Anyone can view active variants",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "public"
          ],
          "using": "(is_active = true)"
        }
      },
      "isRLSEnabled": true
    },
    "public.lab_panels": {
      "name": "lab_panels",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "tenant_id": {
          "name": "tenant_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "code": {
          "name": "code",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "test_ids": {
          "name": "test_ids",
          "type": "uuid[]",
          "primaryKey": false,
          "notNull": true,
          "default": "'{\"\"}'"
        },
        "panel_price": {
          "name": "panel_price",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": true
        },
        "display_order": {
          "name": "display_order",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 100
        },
        "deleted_at": {
          "name": "deleted_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "deleted_by": {
          "name": "deleted_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_lab_panels_active": {
          "name": "idx_lab_panels_active",
          "columns": [
            {
              "expression": "is_active",
              "asc": true,
              "nulls": "last",
              "opclass": "bool_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "where": "((is_active = true) AND (deleted_at IS NULL))",
          "with": {}
        },
        "idx_lab_panels_tenant": {
          "name": "idx_lab_panels_tenant",
          "columns": [
            {
              "expression": "tenant_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "lab_panels_deleted_by_fkey": {
          "name": "lab_panels_deleted_by_fkey",
          "tableFrom": "lab_panels",
          "tableTo": "profiles",
          "schemaTo": "public",
          "columnsFrom": [
            "deleted_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "lab_panels_tenant_id_fkey": {
          "name": "lab_panels_tenant_id_fkey",
          "tableFrom": "lab_panels",
          "tableTo": "tenants",
          "schemaTo": "public",
          "columnsFrom": [
            "tenant_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "lab_panels_tenant_id_code_key": {
          "columns": [
            "tenant_id",
            "code"
          ],
          "nullsNotDistinct": false,
          "name": "lab_panels_tenant_id_code_key"
        }
      },
      "checkConstraints": {
        "lab_panels_name_length": {
          "name": "lab_panels_name_length",
          "value": "char_length(name) >= 2"
        },
        "lab_panels_panel_price_check": {
          "name": "lab_panels_panel_price_check",
          "value": "(panel_price IS NULL) OR (panel_price >= (0)::numeric)"
        }
      },
      "policies": {
        "Public read lab panels": {
          "name": "Public read lab panels",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "public"
          ],
          "using": "((is_active = true) AND (deleted_at IS NULL))"
        },
        "Service role full access panels": {
          "name": "Service role full access panels",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "service_role"
          ]
        },
        "Staff manage panels": {
          "name": "Staff manage panels",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "authenticated"
          ]
        }
      },
      "isRLSEnabled": true
    },
    "public.lab_orders": {
      "name": "lab_orders",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "tenant_id": {
          "name": "tenant_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "order_number": {
          "name": "order_number",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "pet_id": {
          "name": "pet_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "ordered_by": {
          "name": "ordered_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "medical_record_id": {
          "name": "medical_record_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "priority": {
          "name": "priority",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "default": "'routine'"
        },
        "clinical_notes": {
          "name": "clinical_notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "fasting_confirmed": {
          "name": "fasting_confirmed",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "lab_type": {
          "name": "lab_type",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "default": "'in_house'"
        },
        "reference_lab_name": {
          "name": "reference_lab_name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "external_accession": {
          "name": "external_accession",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'pending'"
        },
        "collected_at": {
          "name": "collected_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "collected_by": {
          "name": "collected_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "processing_at": {
          "name": "processing_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "completed_at": {
          "name": "completed_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "reviewed_at": {
          "name": "reviewed_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "reviewed_by": {
          "name": "reviewed_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "deleted_at": {
          "name": "deleted_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "deleted_by": {
          "name": "deleted_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_lab_orders_collected_by": {
          "name": "idx_lab_orders_collected_by",
          "columns": [
            {
              "expression": "collected_by",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_lab_orders_created_brin": {
          "name": "idx_lab_orders_created_brin",
          "columns": [
            {
              "expression": "created_at",
              "asc": true,
              "nulls": "last",
              "opclass": "timestamptz_minmax_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "brin",
          "with": {
            "pages_per_range": "32"
          }
        },
        "idx_lab_orders_medical_record": {
          "name": "idx_lab_orders_medical_record",
          "columns": [
            {
              "expression": "medical_record_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_lab_orders_ordered_by": {
          "name": "idx_lab_orders_ordered_by",
          "columns": [
            {
              "expression": "ordered_by",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_lab_orders_pending": {
          "name": "idx_lab_orders_pending",
          "columns": [
            {
              "expression": "tenant_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            },
            {
              "expression": "priority",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "where": "((status = ANY (ARRAY['pending'::text, 'collected'::text, 'processing'::text])) AND (deleted_at IS NULL))",
          "with": {}
        },
        "idx_lab_orders_pet": {
          "name": "idx_lab_orders_pet",
          "columns": [
            {
              "expression": "pet_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_lab_orders_reviewed_by": {
          "name": "idx_lab_orders_reviewed_by",
          "columns": [
            {
              "expression": "reviewed_by",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_lab_orders_status": {
          "name": "idx_lab_orders_status",
          "columns": [
            {
              "expression": "status",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "where": "(deleted_at IS NULL)",
          "with": {}
        },
        "idx_lab_orders_tenant": {
          "name": "idx_lab_orders_tenant",
          "columns": [
            {
              "expression": "tenant_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "lab_orders_collected_by_fkey": {
          "name": "lab_orders_collected_by_fkey",
          "tableFrom": "lab_orders",
          "tableTo": "profiles",
          "schemaTo": "public",
          "columnsFrom": [
            "collected_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "lab_orders_deleted_by_fkey": {
          "name": "lab_orders_deleted_by_fkey",
          "tableFrom": "lab_orders",
          "tableTo": "profiles",
          "schemaTo": "public",
          "columnsFrom": [
            "deleted_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "lab_orders_medical_record_id_fkey": {
          "name": "lab_orders_medical_record_id_fkey",
          "tableFrom": "lab_orders",
          "tableTo": "medical_records",
          "schemaTo": "public",
          "columnsFrom": [
            "medical_record_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "lab_orders_ordered_by_fkey": {
          "name": "lab_orders_ordered_by_fkey",
          "tableFrom": "lab_orders",
          "tableTo": "profiles",
          "schemaTo": "public",
          "columnsFrom": [
            "ordered_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "lab_orders_pet_id_fkey": {
          "name": "lab_orders_pet_id_fkey",
          "tableFrom": "lab_orders",
          "tableTo": "pets",
          "schemaTo": "public",
          "columnsFrom": [
            "pet_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "restrict",
          "onUpdate": "no action"
        },
        "lab_orders_reviewed_by_fkey": {
          "name": "lab_orders_reviewed_by_fkey",
          "tableFrom": "lab_orders",
          "tableTo": "profiles",
          "schemaTo": "public",
          "columnsFrom": [
            "reviewed_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "lab_orders_tenant_id_fkey": {
          "name": "lab_orders_tenant_id_fkey",
          "tableFrom": "lab_orders",
          "tableTo": "tenants",
          "schemaTo": "public",
          "columnsFrom": [
            "tenant_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "lab_orders_tenant_id_order_number_key": {
          "columns": [
            "tenant_id",
            "order_number"
          ],
          "nullsNotDistinct": false,
          "name": "lab_orders_tenant_id_order_number_key"
        }
      },
      "checkConstraints": {
        "lab_orders_lab_type_check": {
          "name": "lab_orders_lab_type_check",
          "value": "lab_type = ANY (ARRAY['in_house'::text, 'reference_lab'::text])"
        },
        "lab_orders_priority_check": {
          "name": "lab_orders_priority_check",
          "value": "priority = ANY (ARRAY['stat'::text, 'urgent'::text, 'routine'::text])"
        },
        "lab_orders_status_check": {
          "name": "lab_orders_status_check",
          "value": "status = ANY (ARRAY['pending'::text, 'collected'::text, 'processing'::text, 'completed'::text, 'reviewed'::text, 'cancelled'::text])"
        }
      },
      "policies": {
        "Owners view pet lab orders": {
          "name": "Owners view pet lab orders",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "(is_owner_of_pet(pet_id) AND (status = ANY (ARRAY['completed'::text, 'reviewed'::text])) AND (deleted_at IS NULL))"
        },
        "Service role full access lab orders": {
          "name": "Service role full access lab orders",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "service_role"
          ]
        },
        "Staff manage lab orders": {
          "name": "Staff manage lab orders",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "authenticated"
          ]
        }
      },
      "isRLSEnabled": true
    },
    "public.lab_order_items": {
      "name": "lab_order_items",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "lab_order_id": {
          "name": "lab_order_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "tenant_id": {
          "name": "tenant_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "test_id": {
          "name": "test_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'pending'"
        },
        "price": {
          "name": "price",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_lab_order_items_order": {
          "name": "idx_lab_order_items_order",
          "columns": [
            {
              "expression": "lab_order_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_lab_order_items_status": {
          "name": "idx_lab_order_items_status",
          "columns": [
            {
              "expression": "status",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_lab_order_items_tenant": {
          "name": "idx_lab_order_items_tenant",
          "columns": [
            {
              "expression": "tenant_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_lab_order_items_test": {
          "name": "idx_lab_order_items_test",
          "columns": [
            {
              "expression": "test_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "lab_order_items_lab_order_id_fkey": {
          "name": "lab_order_items_lab_order_id_fkey",
          "tableFrom": "lab_order_items",
          "tableTo": "lab_orders",
          "schemaTo": "public",
          "columnsFrom": [
            "lab_order_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "lab_order_items_tenant_id_fkey": {
          "name": "lab_order_items_tenant_id_fkey",
          "tableFrom": "lab_order_items",
          "tableTo": "tenants",
          "schemaTo": "public",
          "columnsFrom": [
            "tenant_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "lab_order_items_test_id_fkey": {
          "name": "lab_order_items_test_id_fkey",
          "tableFrom": "lab_order_items",
          "tableTo": "lab_test_catalog",
          "schemaTo": "public",
          "columnsFrom": [
            "test_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "restrict",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "lab_order_items_lab_order_id_test_id_key": {
          "columns": [
            "lab_order_id",
            "test_id"
          ],
          "nullsNotDistinct": false,
          "name": "lab_order_items_lab_order_id_test_id_key"
        }
      },
      "checkConstraints": {
        "lab_order_items_price_check": {
          "name": "lab_order_items_price_check",
          "value": "(price IS NULL) OR (price >= (0)::numeric)"
        },
        "lab_order_items_status_check": {
          "name": "lab_order_items_status_check",
          "value": "status = ANY (ARRAY['pending'::text, 'processing'::text, 'completed'::text, 'cancelled'::text])"
        }
      },
      "policies": {
        "Owners view order items": {
          "name": "Owners view order items",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "(EXISTS ( SELECT 1\n   FROM lab_orders lo\n  WHERE ((lo.id = lab_order_items.lab_order_id) AND is_owner_of_pet(lo.pet_id) AND (lo.status = ANY (ARRAY['completed'::text, 'reviewed'::text])))))"
        },
        "Service role full access order items": {
          "name": "Service role full access order items",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "service_role"
          ]
        },
        "Staff manage order items": {
          "name": "Staff manage order items",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "authenticated"
          ]
        }
      },
      "isRLSEnabled": true
    },
    "public.lab_results": {
      "name": "lab_results",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "lab_order_id": {
          "name": "lab_order_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "tenant_id": {
          "name": "tenant_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "test_id": {
          "name": "test_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "value": {
          "name": "value",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "numeric_value": {
          "name": "numeric_value",
          "type": "numeric(12, 4)",
          "primaryKey": false,
          "notNull": false
        },
        "unit": {
          "name": "unit",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "reference_min": {
          "name": "reference_min",
          "type": "numeric(12, 4)",
          "primaryKey": false,
          "notNull": false
        },
        "reference_max": {
          "name": "reference_max",
          "type": "numeric(12, 4)",
          "primaryKey": false,
          "notNull": false
        },
        "flag": {
          "name": "flag",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "is_abnormal": {
          "name": "is_abnormal",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "notes": {
          "name": "notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "entered_by": {
          "name": "entered_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_lab_results_abnormal": {
          "name": "idx_lab_results_abnormal",
          "columns": [
            {
              "expression": "is_abnormal",
              "asc": true,
              "nulls": "last",
              "opclass": "bool_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "where": "(is_abnormal = true)",
          "with": {}
        },
        "idx_lab_results_entered_by": {
          "name": "idx_lab_results_entered_by",
          "columns": [
            {
              "expression": "entered_by",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_lab_results_flag": {
          "name": "idx_lab_results_flag",
          "columns": [
            {
              "expression": "flag",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "where": "(flag = ANY (ARRAY['critical_low'::text, 'critical_high'::text]))",
          "with": {}
        },
        "idx_lab_results_order": {
          "name": "idx_lab_results_order",
          "columns": [
            {
              "expression": "lab_order_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_lab_results_tenant": {
          "name": "idx_lab_results_tenant",
          "columns": [
            {
              "expression": "tenant_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_lab_results_test": {
          "name": "idx_lab_results_test",
          "columns": [
            {
              "expression": "test_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "lab_results_entered_by_fkey": {
          "name": "lab_results_entered_by_fkey",
          "tableFrom": "lab_results",
          "tableTo": "profiles",
          "schemaTo": "public",
          "columnsFrom": [
            "entered_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "lab_results_lab_order_id_fkey": {
          "name": "lab_results_lab_order_id_fkey",
          "tableFrom": "lab_results",
          "tableTo": "lab_orders",
          "schemaTo": "public",
          "columnsFrom": [
            "lab_order_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "lab_results_tenant_id_fkey": {
          "name": "lab_results_tenant_id_fkey",
          "tableFrom": "lab_results",
          "tableTo": "tenants",
          "schemaTo": "public",
          "columnsFrom": [
            "tenant_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "lab_results_test_id_fkey": {
          "name": "lab_results_test_id_fkey",
          "tableFrom": "lab_results",
          "tableTo": "lab_test_catalog",
          "schemaTo": "public",
          "columnsFrom": [
            "test_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "restrict",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "lab_results_lab_order_id_test_id_key": {
          "columns": [
            "lab_order_id",
            "test_id"
          ],
          "nullsNotDistinct": false,
          "name": "lab_results_lab_order_id_test_id_key"
        }
      },
      "checkConstraints": {
        "lab_results_flag_check": {
          "name": "lab_results_flag_check",
          "value": "(flag IS NULL) OR (flag = ANY (ARRAY['low'::text, 'normal'::text, 'high'::text, 'critical_low'::text, 'critical_high'::text]))"
        }
      },
      "policies": {
        "Owners view results": {
          "name": "Owners view results",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "(EXISTS ( SELECT 1\n   FROM lab_orders lo\n  WHERE ((lo.id = lab_results.lab_order_id) AND is_owner_of_pet(lo.pet_id) AND (lo.status = ANY (ARRAY['completed'::text, 'reviewed'::text])))))"
        },
        "Service role full access results": {
          "name": "Service role full access results",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "service_role"
          ]
        },
        "Staff manage results": {
          "name": "Staff manage results",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "authenticated"
          ]
        }
      },
      "isRLSEnabled": true
    },
    "public.lab_result_attachments": {
      "name": "lab_result_attachments",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "lab_order_id": {
          "name": "lab_order_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "tenant_id": {
          "name": "tenant_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "file_url": {
          "name": "file_url",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "file_name": {
          "name": "file_name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "file_type": {
          "name": "file_type",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "file_size_bytes": {
          "name": "file_size_bytes",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "uploaded_by": {
          "name": "uploaded_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_lab_attachments_order": {
          "name": "idx_lab_attachments_order",
          "columns": [
            {
              "expression": "lab_order_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_lab_attachments_tenant": {
          "name": "idx_lab_attachments_tenant",
          "columns": [
            {
              "expression": "tenant_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_lab_attachments_uploaded_by": {
          "name": "idx_lab_attachments_uploaded_by",
          "columns": [
            {
              "expression": "uploaded_by",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "lab_result_attachments_lab_order_id_fkey": {
          "name": "lab_result_attachments_lab_order_id_fkey",
          "tableFrom": "lab_result_attachments",
          "tableTo": "lab_orders",
          "schemaTo": "public",
          "columnsFrom": [
            "lab_order_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "lab_result_attachments_tenant_id_fkey": {
          "name": "lab_result_attachments_tenant_id_fkey",
          "tableFrom": "lab_result_attachments",
          "tableTo": "tenants",
          "schemaTo": "public",
          "columnsFrom": [
            "tenant_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "lab_result_attachments_uploaded_by_fkey": {
          "name": "lab_result_attachments_uploaded_by_fkey",
          "tableFrom": "lab_result_attachments",
          "tableTo": "profiles",
          "schemaTo": "public",
          "columnsFrom": [
            "uploaded_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {
        "lab_result_attachments_file_size_bytes_check": {
          "name": "lab_result_attachments_file_size_bytes_check",
          "value": "(file_size_bytes IS NULL) OR (file_size_bytes > 0)"
        }
      },
      "policies": {
        "Owners view attachments": {
          "name": "Owners view attachments",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "(EXISTS ( SELECT 1\n   FROM lab_orders lo\n  WHERE ((lo.id = lab_result_attachments.lab_order_id) AND is_owner_of_pet(lo.pet_id) AND (lo.status = ANY (ARRAY['completed'::text, 'reviewed'::text])))))"
        },
        "Service role full access attachments": {
          "name": "Service role full access attachments",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "service_role"
          ]
        },
        "Staff manage attachments": {
          "name": "Staff manage attachments",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "authenticated"
          ]
        }
      },
      "isRLSEnabled": true
    },
    "public.client_credits": {
      "name": "client_credits",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "tenant_id": {
          "name": "tenant_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "client_id": {
          "name": "client_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "amount": {
          "name": "amount",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": true
        },
        "type": {
          "name": "type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "invoice_id": {
          "name": "invoice_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "payment_id": {
          "name": "payment_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "default": "'active'"
        },
        "used_at": {
          "name": "used_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "used_on_invoice_id": {
          "name": "used_on_invoice_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "expires_at": {
          "name": "expires_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_client_credits_active": {
          "name": "idx_client_credits_active",
          "columns": [
            {
              "expression": "status",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "where": "(status = 'active'::text)",
          "with": {}
        },
        "idx_client_credits_client": {
          "name": "idx_client_credits_client",
          "columns": [
            {
              "expression": "client_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_client_credits_tenant": {
          "name": "idx_client_credits_tenant",
          "columns": [
            {
              "expression": "tenant_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {
        "client_credits_status_check": {
          "name": "client_credits_status_check",
          "value": "status = ANY (ARRAY['active'::text, 'used'::text, 'expired'::text])"
        },
        "client_credits_type_check": {
          "name": "client_credits_type_check",
          "value": "type = ANY (ARRAY['payment'::text, 'refund'::text, 'adjustment'::text, 'reward'::text, 'promo'::text])"
        }
      },
      "policies": {
        "Clients view own credits": {
          "name": "Clients view own credits",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "(client_id = auth.uid())"
        },
        "Service role full access credits": {
          "name": "Service role full access credits",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "service_role"
          ]
        },
        "Staff manage credits": {
          "name": "Staff manage credits",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "authenticated"
          ]
        }
      },
      "isRLSEnabled": true
    },
    "public.insurance_providers": {
      "name": "insurance_providers",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "code": {
          "name": "code",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "country": {
          "name": "country",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "logo_url": {
          "name": "logo_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "website": {
          "name": "website",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "phone": {
          "name": "phone",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "email": {
          "name": "email",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "claims_email": {
          "name": "claims_email",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "claims_phone": {
          "name": "claims_phone",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "address": {
          "name": "address",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "coverage_types": {
          "name": "coverage_types",
          "type": "text[]",
          "primaryKey": false,
          "notNull": false
        },
        "direct_billing": {
          "name": "direct_billing",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_insurance_providers_active": {
          "name": "idx_insurance_providers_active",
          "columns": [
            {
              "expression": "is_active",
              "asc": true,
              "nulls": "last",
              "opclass": "bool_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "where": "(is_active = true)",
          "with": {}
        },
        "idx_insurance_providers_address_gin": {
          "name": "idx_insurance_providers_address_gin",
          "columns": [
            {
              "expression": "address",
              "asc": true,
              "nulls": "last",
              "opclass": "jsonb_path_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "gin",
          "where": "(address IS NOT NULL)",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "insurance_providers_code_key": {
          "columns": [
            "code"
          ],
          "nullsNotDistinct": false,
          "name": "insurance_providers_code_key"
        }
      },
      "checkConstraints": {},
      "policies": {
        "Public read providers": {
          "name": "Public read providers",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "public"
          ],
          "using": "(is_active = true)"
        },
        "Service role manage providers": {
          "name": "Service role manage providers",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "service_role"
          ]
        }
      },
      "isRLSEnabled": true
    },
    "public.insurance_policies": {
      "name": "insurance_policies",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "tenant_id": {
          "name": "tenant_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "pet_id": {
          "name": "pet_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "provider_id": {
          "name": "provider_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "policy_number": {
          "name": "policy_number",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "group_number": {
          "name": "group_number",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "coverage_type": {
          "name": "coverage_type",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "default": "'basic'"
        },
        "coverage_details": {
          "name": "coverage_details",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "annual_limit": {
          "name": "annual_limit",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "deductible": {
          "name": "deductible",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "copay_percentage": {
          "name": "copay_percentage",
          "type": "numeric(5, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "effective_date": {
          "name": "effective_date",
          "type": "date",
          "primaryKey": false,
          "notNull": true
        },
        "expiry_date": {
          "name": "expiry_date",
          "type": "date",
          "primaryKey": false,
          "notNull": false
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "default": "'active'"
        },
        "claims_contact_name": {
          "name": "claims_contact_name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "claims_contact_phone": {
          "name": "claims_contact_phone",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "claims_contact_email": {
          "name": "claims_contact_email",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "policy_document_url": {
          "name": "policy_document_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "deleted_at": {
          "name": "deleted_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "deleted_by": {
          "name": "deleted_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_insurance_policies_coverage_gin": {
          "name": "idx_insurance_policies_coverage_gin",
          "columns": [
            {
              "expression": "coverage_details",
              "asc": true,
              "nulls": "last",
              "opclass": "jsonb_path_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "gin",
          "where": "((coverage_details IS NOT NULL) AND (coverage_details <> '{}'::jsonb))",
          "with": {}
        },
        "idx_insurance_policies_pet": {
          "name": "idx_insurance_policies_pet",
          "columns": [
            {
              "expression": "pet_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_insurance_policies_provider": {
          "name": "idx_insurance_policies_provider",
          "columns": [
            {
              "expression": "provider_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_insurance_policies_status": {
          "name": "idx_insurance_policies_status",
          "columns": [
            {
              "expression": "status",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "where": "(deleted_at IS NULL)",
          "with": {}
        },
        "idx_insurance_policies_tenant": {
          "name": "idx_insurance_policies_tenant",
          "columns": [
            {
              "expression": "tenant_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "insurance_policies_deleted_by_fkey": {
          "name": "insurance_policies_deleted_by_fkey",
          "tableFrom": "insurance_policies",
          "tableTo": "profiles",
          "schemaTo": "public",
          "columnsFrom": [
            "deleted_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "insurance_policies_pet_id_fkey": {
          "name": "insurance_policies_pet_id_fkey",
          "tableFrom": "insurance_policies",
          "tableTo": "pets",
          "schemaTo": "public",
          "columnsFrom": [
            "pet_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "insurance_policies_provider_id_fkey": {
          "name": "insurance_policies_provider_id_fkey",
          "tableFrom": "insurance_policies",
          "tableTo": "insurance_providers",
          "schemaTo": "public",
          "columnsFrom": [
            "provider_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "insurance_policies_tenant_id_fkey": {
          "name": "insurance_policies_tenant_id_fkey",
          "tableFrom": "insurance_policies",
          "tableTo": "tenants",
          "schemaTo": "public",
          "columnsFrom": [
            "tenant_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {
        "insurance_policies_coverage_type_check": {
          "name": "insurance_policies_coverage_type_check",
          "value": "coverage_type = ANY (ARRAY['basic'::text, 'standard'::text, 'premium'::text, 'comprehensive'::text])"
        },
        "insurance_policies_status_check": {
          "name": "insurance_policies_status_check",
          "value": "status = ANY (ARRAY['pending'::text, 'active'::text, 'expired'::text, 'cancelled'::text, 'suspended'::text])"
        }
      },
      "policies": {
        "Owners view pet policies": {
          "name": "Owners view pet policies",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "(is_owner_of_pet(pet_id) AND (deleted_at IS NULL))"
        },
        "Service role full access policies": {
          "name": "Service role full access policies",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "service_role"
          ]
        },
        "Staff manage policies": {
          "name": "Staff manage policies",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "authenticated"
          ]
        }
      },
      "isRLSEnabled": true
    },
    "public.insurance_claims": {
      "name": "insurance_claims",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "tenant_id": {
          "name": "tenant_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "policy_id": {
          "name": "policy_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "pet_id": {
          "name": "pet_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "claim_number": {
          "name": "claim_number",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "claim_type": {
          "name": "claim_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "claimed_amount": {
          "name": "claimed_amount",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": true
        },
        "approved_amount": {
          "name": "approved_amount",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "paid_amount": {
          "name": "paid_amount",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "service_date": {
          "name": "service_date",
          "type": "date",
          "primaryKey": false,
          "notNull": true
        },
        "submitted_at": {
          "name": "submitted_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "processed_at": {
          "name": "processed_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'draft'"
        },
        "denial_reason": {
          "name": "denial_reason",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "invoice_id": {
          "name": "invoice_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "medical_record_id": {
          "name": "medical_record_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "supporting_documents": {
          "name": "supporting_documents",
          "type": "text[]",
          "primaryKey": false,
          "notNull": false,
          "default": "'{\"\"}'"
        },
        "notes": {
          "name": "notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "provider_notes": {
          "name": "provider_notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "submitted_by": {
          "name": "submitted_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "deleted_at": {
          "name": "deleted_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "deleted_by": {
          "name": "deleted_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_insurance_claims_pet": {
          "name": "idx_insurance_claims_pet",
          "columns": [
            {
              "expression": "pet_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_insurance_claims_policy": {
          "name": "idx_insurance_claims_policy",
          "columns": [
            {
              "expression": "policy_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_insurance_claims_status": {
          "name": "idx_insurance_claims_status",
          "columns": [
            {
              "expression": "status",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "where": "(deleted_at IS NULL)",
          "with": {}
        },
        "idx_insurance_claims_tenant": {
          "name": "idx_insurance_claims_tenant",
          "columns": [
            {
              "expression": "tenant_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "insurance_claims_deleted_by_fkey": {
          "name": "insurance_claims_deleted_by_fkey",
          "tableFrom": "insurance_claims",
          "tableTo": "profiles",
          "schemaTo": "public",
          "columnsFrom": [
            "deleted_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "insurance_claims_invoice_id_fkey": {
          "name": "insurance_claims_invoice_id_fkey",
          "tableFrom": "insurance_claims",
          "tableTo": "invoices",
          "schemaTo": "public",
          "columnsFrom": [
            "invoice_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "insurance_claims_medical_record_id_fkey": {
          "name": "insurance_claims_medical_record_id_fkey",
          "tableFrom": "insurance_claims",
          "tableTo": "medical_records",
          "schemaTo": "public",
          "columnsFrom": [
            "medical_record_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "insurance_claims_pet_id_fkey": {
          "name": "insurance_claims_pet_id_fkey",
          "tableFrom": "insurance_claims",
          "tableTo": "pets",
          "schemaTo": "public",
          "columnsFrom": [
            "pet_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "insurance_claims_policy_id_fkey": {
          "name": "insurance_claims_policy_id_fkey",
          "tableFrom": "insurance_claims",
          "tableTo": "insurance_policies",
          "schemaTo": "public",
          "columnsFrom": [
            "policy_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "insurance_claims_submitted_by_fkey": {
          "name": "insurance_claims_submitted_by_fkey",
          "tableFrom": "insurance_claims",
          "tableTo": "profiles",
          "schemaTo": "public",
          "columnsFrom": [
            "submitted_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "insurance_claims_tenant_id_fkey": {
          "name": "insurance_claims_tenant_id_fkey",
          "tableFrom": "insurance_claims",
          "tableTo": "tenants",
          "schemaTo": "public",
          "columnsFrom": [
            "tenant_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {
        "insurance_claims_claim_type_check": {
          "name": "insurance_claims_claim_type_check",
          "value": "claim_type = ANY (ARRAY['treatment'::text, 'surgery'::text, 'hospitalization'::text, 'medication'::text, 'diagnostic'::text, 'other'::text])"
        },
        "insurance_claims_status_check": {
          "name": "insurance_claims_status_check",
          "value": "status = ANY (ARRAY['draft'::text, 'submitted'::text, 'under_review'::text, 'approved'::text, 'partially_approved'::text, 'denied'::text, 'paid'::text])"
        }
      },
      "policies": {
        "Owners view pet claims": {
          "name": "Owners view pet claims",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "(is_owner_of_pet(pet_id) AND (deleted_at IS NULL))"
        },
        "Service role full access claims": {
          "name": "Service role full access claims",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "service_role"
          ]
        },
        "Staff manage claims": {
          "name": "Staff manage claims",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "authenticated"
          ]
        }
      },
      "isRLSEnabled": true
    },
    "public.insurance_claim_items": {
      "name": "insurance_claim_items",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "claim_id": {
          "name": "claim_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "tenant_id": {
          "name": "tenant_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "service_id": {
          "name": "service_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "quantity": {
          "name": "quantity",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 1
        },
        "amount": {
          "name": "amount",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": true
        },
        "approved_amount": {
          "name": "approved_amount",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "is_covered": {
          "name": "is_covered",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false
        },
        "denial_reason": {
          "name": "denial_reason",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_insurance_claim_items_claim": {
          "name": "idx_insurance_claim_items_claim",
          "columns": [
            {
              "expression": "claim_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_insurance_claim_items_tenant": {
          "name": "idx_insurance_claim_items_tenant",
          "columns": [
            {
              "expression": "tenant_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "insurance_claim_items_claim_id_fkey": {
          "name": "insurance_claim_items_claim_id_fkey",
          "tableFrom": "insurance_claim_items",
          "tableTo": "insurance_claims",
          "schemaTo": "public",
          "columnsFrom": [
            "claim_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "insurance_claim_items_service_id_fkey": {
          "name": "insurance_claim_items_service_id_fkey",
          "tableFrom": "insurance_claim_items",
          "tableTo": "services",
          "schemaTo": "public",
          "columnsFrom": [
            "service_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "insurance_claim_items_tenant_id_fkey": {
          "name": "insurance_claim_items_tenant_id_fkey",
          "tableFrom": "insurance_claim_items",
          "tableTo": "tenants",
          "schemaTo": "public",
          "columnsFrom": [
            "tenant_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {},
      "policies": {
        "Service role full access claim items": {
          "name": "Service role full access claim items",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "service_role"
          ],
          "using": "true"
        },
        "Staff manage claim items": {
          "name": "Staff manage claim items",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "authenticated"
          ]
        }
      },
      "isRLSEnabled": true
    },
    "public.conversations": {
      "name": "conversations",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "tenant_id": {
          "name": "tenant_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "client_id": {
          "name": "client_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "pet_id": {
          "name": "pet_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "subject": {
          "name": "subject",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "channel": {
          "name": "channel",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'in_app'"
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'open'"
        },
        "priority": {
          "name": "priority",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "default": "'normal'"
        },
        "assigned_to": {
          "name": "assigned_to",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "assigned_at": {
          "name": "assigned_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "last_message_at": {
          "name": "last_message_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "last_client_message_at": {
          "name": "last_client_message_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "last_staff_message_at": {
          "name": "last_staff_message_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "client_last_read_at": {
          "name": "client_last_read_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "staff_last_read_at": {
          "name": "staff_last_read_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "unread_client_count": {
          "name": "unread_client_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "unread_staff_count": {
          "name": "unread_staff_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "appointment_id": {
          "name": "appointment_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "tags": {
          "name": "tags",
          "type": "text[]",
          "primaryKey": false,
          "notNull": false
        },
        "deleted_at": {
          "name": "deleted_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "deleted_by": {
          "name": "deleted_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_conversations_assigned": {
          "name": "idx_conversations_assigned",
          "columns": [
            {
              "expression": "assigned_to",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_conversations_client": {
          "name": "idx_conversations_client",
          "columns": [
            {
              "expression": "client_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_conversations_client_history": {
          "name": "idx_conversations_client_history",
          "columns": [
            {
              "expression": "client_id",
              "asc": true,
              "nulls": "last",
              "opclass": "timestamptz_ops",
              "isExpression": false
            },
            {
              "expression": "last_message_at",
              "asc": false,
              "nulls": "first",
              "opclass": "uuid_ops",
              "isExpression": false
            },
            {
              "expression": "tenant_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            },
            {
              "expression": "subject",
              "asc": true,
              "nulls": "last",
              "opclass": "timestamptz_ops",
              "isExpression": false
            },
            {
              "expression": "status",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            },
            {
              "expression": "unread_client_count",
              "asc": true,
              "nulls": "last",
              "opclass": "timestamptz_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_conversations_inbox": {
          "name": "idx_conversations_inbox",
          "columns": [
            {
              "expression": "tenant_id",
              "asc": true,
              "nulls": "last",
              "opclass": "timestamptz_ops",
              "isExpression": false
            },
            {
              "expression": "unread_staff_count",
              "asc": false,
              "nulls": "first",
              "opclass": "int4_ops",
              "isExpression": false
            },
            {
              "expression": "last_message_at",
              "asc": false,
              "nulls": "first",
              "opclass": "int4_ops",
              "isExpression": false
            },
            {
              "expression": "client_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            },
            {
              "expression": "pet_id",
              "asc": true,
              "nulls": "last",
              "opclass": "int4_ops",
              "isExpression": false
            },
            {
              "expression": "subject",
              "asc": true,
              "nulls": "last",
              "opclass": "int4_ops",
              "isExpression": false
            },
            {
              "expression": "status",
              "asc": true,
              "nulls": "last",
              "opclass": "int4_ops",
              "isExpression": false
            },
            {
              "expression": "priority",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_conversations_last_message": {
          "name": "idx_conversations_last_message",
          "columns": [
            {
              "expression": "last_message_at",
              "asc": false,
              "nulls": "first",
              "opclass": "timestamptz_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_conversations_pet": {
          "name": "idx_conversations_pet",
          "columns": [
            {
              "expression": "pet_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_conversations_status": {
          "name": "idx_conversations_status",
          "columns": [
            {
              "expression": "status",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_conversations_tenant": {
          "name": "idx_conversations_tenant",
          "columns": [
            {
              "expression": "tenant_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_conversations_unread_staff": {
          "name": "idx_conversations_unread_staff",
          "columns": [
            {
              "expression": "unread_staff_count",
              "asc": true,
              "nulls": "last",
              "opclass": "int4_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "where": "(unread_staff_count > 0)",
          "with": {}
        }
      },
      "foreignKeys": {
        "conversations_appointment_id_fkey": {
          "name": "conversations_appointment_id_fkey",
          "tableFrom": "conversations",
          "tableTo": "appointments",
          "schemaTo": "public",
          "columnsFrom": [
            "appointment_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "conversations_assigned_to_fkey": {
          "name": "conversations_assigned_to_fkey",
          "tableFrom": "conversations",
          "tableTo": "profiles",
          "schemaTo": "public",
          "columnsFrom": [
            "assigned_to"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "conversations_client_id_fkey": {
          "name": "conversations_client_id_fkey",
          "tableFrom": "conversations",
          "tableTo": "profiles",
          "schemaTo": "public",
          "columnsFrom": [
            "client_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "conversations_deleted_by_fkey": {
          "name": "conversations_deleted_by_fkey",
          "tableFrom": "conversations",
          "tableTo": "profiles",
          "schemaTo": "public",
          "columnsFrom": [
            "deleted_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "conversations_pet_id_fkey": {
          "name": "conversations_pet_id_fkey",
          "tableFrom": "conversations",
          "tableTo": "pets",
          "schemaTo": "public",
          "columnsFrom": [
            "pet_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "conversations_tenant_id_fkey": {
          "name": "conversations_tenant_id_fkey",
          "tableFrom": "conversations",
          "tableTo": "tenants",
          "schemaTo": "public",
          "columnsFrom": [
            "tenant_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {
        "conversations_channel_check": {
          "name": "conversations_channel_check",
          "value": "channel = ANY (ARRAY['in_app'::text, 'sms'::text, 'whatsapp'::text, 'email'::text])"
        },
        "conversations_priority_check": {
          "name": "conversations_priority_check",
          "value": "priority = ANY (ARRAY['low'::text, 'normal'::text, 'high'::text, 'urgent'::text])"
        },
        "conversations_status_check": {
          "name": "conversations_status_check",
          "value": "status = ANY (ARRAY['open'::text, 'pending'::text, 'resolved'::text, 'closed'::text, 'spam'::text])"
        }
      },
      "policies": {
        "Clients create conversations": {
          "name": "Clients create conversations",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "(client_id = auth.uid())"
        },
        "Clients view own conversations": {
          "name": "Clients view own conversations",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ]
        },
        "Service role full access conversations": {
          "name": "Service role full access conversations",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "service_role"
          ]
        },
        "Staff manage conversations": {
          "name": "Staff manage conversations",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "authenticated"
          ]
        }
      },
      "isRLSEnabled": true
    },
    "public.messages": {
      "name": "messages",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "conversation_id": {
          "name": "conversation_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "tenant_id": {
          "name": "tenant_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "sender_id": {
          "name": "sender_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "sender_type": {
          "name": "sender_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "sender_name": {
          "name": "sender_name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "message_type": {
          "name": "message_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'text'"
        },
        "content": {
          "name": "content",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "content_html": {
          "name": "content_html",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "attachments": {
          "name": "attachments",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'[]'::jsonb"
        },
        "card_data": {
          "name": "card_data",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "reply_to_id": {
          "name": "reply_to_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'sent'"
        },
        "delivered_at": {
          "name": "delivered_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "read_at": {
          "name": "read_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "failed_reason": {
          "name": "failed_reason",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "external_message_id": {
          "name": "external_message_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "external_channel": {
          "name": "external_channel",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "metadata": {
          "name": "metadata",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_messages_attachments_gin": {
          "name": "idx_messages_attachments_gin",
          "columns": [
            {
              "expression": "attachments",
              "asc": true,
              "nulls": "last",
              "opclass": "jsonb_path_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "gin",
          "where": "((attachments IS NOT NULL) AND (attachments <> '[]'::jsonb))",
          "with": {}
        },
        "idx_messages_conversation": {
          "name": "idx_messages_conversation",
          "columns": [
            {
              "expression": "conversation_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_messages_created_brin": {
          "name": "idx_messages_created_brin",
          "columns": [
            {
              "expression": "created_at",
              "asc": true,
              "nulls": "last",
              "opclass": "timestamptz_minmax_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "brin",
          "with": {
            "pages_per_range": "32"
          }
        },
        "idx_messages_metadata_gin": {
          "name": "idx_messages_metadata_gin",
          "columns": [
            {
              "expression": "metadata",
              "asc": true,
              "nulls": "last",
              "opclass": "jsonb_path_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "gin",
          "where": "((metadata IS NOT NULL) AND (metadata <> '{}'::jsonb))",
          "with": {}
        },
        "idx_messages_sender": {
          "name": "idx_messages_sender",
          "columns": [
            {
              "expression": "sender_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_messages_status": {
          "name": "idx_messages_status",
          "columns": [
            {
              "expression": "status",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_messages_tenant": {
          "name": "idx_messages_tenant",
          "columns": [
            {
              "expression": "tenant_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "messages_conversation_id_fkey": {
          "name": "messages_conversation_id_fkey",
          "tableFrom": "messages",
          "tableTo": "conversations",
          "schemaTo": "public",
          "columnsFrom": [
            "conversation_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "messages_reply_to_id_fkey": {
          "name": "messages_reply_to_id_fkey",
          "tableFrom": "messages",
          "tableTo": "messages",
          "schemaTo": "public",
          "columnsFrom": [
            "reply_to_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "messages_sender_id_fkey": {
          "name": "messages_sender_id_fkey",
          "tableFrom": "messages",
          "tableTo": "profiles",
          "schemaTo": "public",
          "columnsFrom": [
            "sender_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "messages_tenant_id_fkey": {
          "name": "messages_tenant_id_fkey",
          "tableFrom": "messages",
          "tableTo": "tenants",
          "schemaTo": "public",
          "columnsFrom": [
            "tenant_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {
        "messages_message_type_check": {
          "name": "messages_message_type_check",
          "value": "message_type = ANY (ARRAY['text'::text, 'image'::text, 'file'::text, 'audio'::text, 'video'::text, 'location'::text, 'appointment_card'::text, 'invoice_card'::text, 'prescription_card'::text, 'system'::text])"
        },
        "messages_sender_type_check": {
          "name": "messages_sender_type_check",
          "value": "sender_type = ANY (ARRAY['client'::text, 'staff'::text, 'system'::text, 'bot'::text])"
        },
        "messages_status_check": {
          "name": "messages_status_check",
          "value": "status = ANY (ARRAY['pending'::text, 'sent'::text, 'delivered'::text, 'read'::text, 'failed'::text])"
        }
      },
      "policies": {
        "Clients send messages": {
          "name": "Clients send messages",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "((sender_type = 'client'::text) AND (sender_id = auth.uid()))"
        },
        "Clients view own messages": {
          "name": "Clients view own messages",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ]
        },
        "Service role full access messages": {
          "name": "Service role full access messages",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "service_role"
          ]
        },
        "Staff manage messages": {
          "name": "Staff manage messages",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "authenticated"
          ]
        }
      },
      "isRLSEnabled": true
    },
    "public.message_templates": {
      "name": "message_templates",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "tenant_id": {
          "name": "tenant_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "code": {
          "name": "code",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "category": {
          "name": "category",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "subject": {
          "name": "subject",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "content": {
          "name": "content",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "content_html": {
          "name": "content_html",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "variables": {
          "name": "variables",
          "type": "text[]",
          "primaryKey": false,
          "notNull": false
        },
        "channels": {
          "name": "channels",
          "type": "text[]",
          "primaryKey": false,
          "notNull": false,
          "default": "'{\"RAY['in_app'::tex\"}'"
        },
        "sms_approved": {
          "name": "sms_approved",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "whatsapp_template_id": {
          "name": "whatsapp_template_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "language": {
          "name": "language",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "default": "'es'"
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": true
        },
        "deleted_at": {
          "name": "deleted_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "deleted_by": {
          "name": "deleted_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_message_templates_active": {
          "name": "idx_message_templates_active",
          "columns": [
            {
              "expression": "is_active",
              "asc": true,
              "nulls": "last",
              "opclass": "bool_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "where": "((is_active = true) AND (deleted_at IS NULL))",
          "with": {}
        },
        "idx_message_templates_category": {
          "name": "idx_message_templates_category",
          "columns": [
            {
              "expression": "category",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_message_templates_global_code": {
          "name": "idx_message_templates_global_code",
          "columns": [
            {
              "expression": "code",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "where": "((tenant_id IS NULL) AND (deleted_at IS NULL))",
          "with": {}
        },
        "idx_message_templates_tenant": {
          "name": "idx_message_templates_tenant",
          "columns": [
            {
              "expression": "tenant_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "message_templates_tenant_id_fkey": {
          "name": "message_templates_tenant_id_fkey",
          "tableFrom": "message_templates",
          "tableTo": "tenants",
          "schemaTo": "public",
          "columnsFrom": [
            "tenant_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "message_templates_tenant_id_code_key": {
          "columns": [
            "tenant_id",
            "code"
          ],
          "nullsNotDistinct": false,
          "name": "message_templates_tenant_id_code_key"
        }
      },
      "checkConstraints": {
        "message_templates_category_check": {
          "name": "message_templates_category_check",
          "value": "category = ANY (ARRAY['appointment'::text, 'reminder'::text, 'follow_up'::text, 'marketing'::text, 'transactional'::text, 'welcome'::text, 'feedback'::text, 'custom'::text])"
        }
      },
      "policies": {
        "Read templates": {
          "name": "Read templates",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "(((tenant_id IS NULL) OR is_staff_of(tenant_id)) AND (deleted_at IS NULL))"
        },
        "Service role manage templates": {
          "name": "Service role manage templates",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "service_role"
          ]
        },
        "Staff manage templates": {
          "name": "Staff manage templates",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "authenticated"
          ]
        }
      },
      "isRLSEnabled": true
    },
    "public.reminders": {
      "name": "reminders",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "tenant_id": {
          "name": "tenant_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "client_id": {
          "name": "client_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "pet_id": {
          "name": "pet_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "type": {
          "name": "type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "reference_type": {
          "name": "reference_type",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "reference_id": {
          "name": "reference_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "scheduled_at": {
          "name": "scheduled_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'pending'"
        },
        "attempts": {
          "name": "attempts",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "max_attempts": {
          "name": "max_attempts",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 3
        },
        "last_attempt_at": {
          "name": "last_attempt_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "next_attempt_at": {
          "name": "next_attempt_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "error_message": {
          "name": "error_message",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "custom_subject": {
          "name": "custom_subject",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "custom_body": {
          "name": "custom_body",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "deleted_at": {
          "name": "deleted_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "deleted_by": {
          "name": "deleted_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_reminders_client": {
          "name": "idx_reminders_client",
          "columns": [
            {
              "expression": "client_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_reminders_queue": {
          "name": "idx_reminders_queue",
          "columns": [
            {
              "expression": "scheduled_at",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            },
            {
              "expression": "status",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            },
            {
              "expression": "tenant_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            },
            {
              "expression": "client_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            },
            {
              "expression": "pet_id",
              "asc": true,
              "nulls": "last",
              "opclass": "timestamptz_ops",
              "isExpression": false
            },
            {
              "expression": "type",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            },
            {
              "expression": "reference_type",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            },
            {
              "expression": "reference_id",
              "asc": true,
              "nulls": "last",
              "opclass": "timestamptz_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "where": "(status = 'pending'::text)",
          "with": {}
        },
        "idx_reminders_reference": {
          "name": "idx_reminders_reference",
          "columns": [
            {
              "expression": "reference_type",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            },
            {
              "expression": "reference_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_reminders_scheduled": {
          "name": "idx_reminders_scheduled",
          "columns": [
            {
              "expression": "scheduled_at",
              "asc": true,
              "nulls": "last",
              "opclass": "timestamptz_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "where": "(status = 'pending'::text)",
          "with": {}
        },
        "idx_reminders_scheduled_brin": {
          "name": "idx_reminders_scheduled_brin",
          "columns": [
            {
              "expression": "scheduled_at",
              "asc": true,
              "nulls": "last",
              "opclass": "timestamptz_minmax_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "brin",
          "with": {
            "pages_per_range": "32"
          }
        },
        "idx_reminders_status": {
          "name": "idx_reminders_status",
          "columns": [
            {
              "expression": "status",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_reminders_tenant": {
          "name": "idx_reminders_tenant",
          "columns": [
            {
              "expression": "tenant_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "reminders_client_id_fkey": {
          "name": "reminders_client_id_fkey",
          "tableFrom": "reminders",
          "tableTo": "profiles",
          "schemaTo": "public",
          "columnsFrom": [
            "client_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "reminders_deleted_by_fkey": {
          "name": "reminders_deleted_by_fkey",
          "tableFrom": "reminders",
          "tableTo": "profiles",
          "schemaTo": "public",
          "columnsFrom": [
            "deleted_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "reminders_pet_id_fkey": {
          "name": "reminders_pet_id_fkey",
          "tableFrom": "reminders",
          "tableTo": "pets",
          "schemaTo": "public",
          "columnsFrom": [
            "pet_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "reminders_tenant_id_fkey": {
          "name": "reminders_tenant_id_fkey",
          "tableFrom": "reminders",
          "tableTo": "tenants",
          "schemaTo": "public",
          "columnsFrom": [
            "tenant_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {
        "reminders_status_check": {
          "name": "reminders_status_check",
          "value": "status = ANY (ARRAY['pending'::text, 'processing'::text, 'sent'::text, 'failed'::text, 'cancelled'::text, 'skipped'::text])"
        },
        "reminders_type_check": {
          "name": "reminders_type_check",
          "value": "type = ANY (ARRAY['vaccine_reminder'::text, 'vaccine_overdue'::text, 'appointment_reminder'::text, 'appointment_confirmation'::text, 'appointment_cancelled'::text, 'invoice_sent'::text, 'payment_received'::text, 'payment_overdue'::text, 'birthday'::text, 'follow_up'::text, 'lab_results_ready'::text, 'hospitalization_update'::text, 'custom'::text])"
        }
      },
      "policies": {
        "Clients view own reminders": {
          "name": "Clients view own reminders",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "(client_id = auth.uid())"
        },
        "Service role full access reminders": {
          "name": "Service role full access reminders",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "service_role"
          ]
        },
        "Staff manage reminders": {
          "name": "Staff manage reminders",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "authenticated"
          ]
        }
      },
      "isRLSEnabled": true
    },
    "public.qr_tag_scans": {
      "name": "qr_tag_scans",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "tag_id": {
          "name": "tag_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "tenant_id": {
          "name": "tenant_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "scanned_at": {
          "name": "scanned_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "ip_address": {
          "name": "ip_address",
          "type": "inet",
          "primaryKey": false,
          "notNull": false
        },
        "user_agent": {
          "name": "user_agent",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "latitude": {
          "name": "latitude",
          "type": "numeric(10, 7)",
          "primaryKey": false,
          "notNull": false
        },
        "longitude": {
          "name": "longitude",
          "type": "numeric(10, 7)",
          "primaryKey": false,
          "notNull": false
        },
        "location_accuracy": {
          "name": "location_accuracy",
          "type": "numeric",
          "primaryKey": false,
          "notNull": false
        },
        "contact_attempted": {
          "name": "contact_attempted",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "contact_method": {
          "name": "contact_method",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "contact_details": {
          "name": "contact_details",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "scanned_by": {
          "name": "scanned_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_qr_tag_scans_scanned_brin": {
          "name": "idx_qr_tag_scans_scanned_brin",
          "columns": [
            {
              "expression": "scanned_at",
              "asc": true,
              "nulls": "last",
              "opclass": "timestamptz_minmax_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "brin",
          "with": {
            "pages_per_range": "32"
          }
        },
        "idx_qr_tag_scans_tag": {
          "name": "idx_qr_tag_scans_tag",
          "columns": [
            {
              "expression": "tag_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_qr_tag_scans_tenant": {
          "name": "idx_qr_tag_scans_tenant",
          "columns": [
            {
              "expression": "tenant_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {},
      "policies": {
        "Public log scans": {
          "name": "Public log scans",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "public"
          ],
          "withCheck": "true"
        },
        "Service role full access scans": {
          "name": "Service role full access scans",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "service_role"
          ]
        }
      },
      "isRLSEnabled": true
    },
    "public.staff_profiles": {
      "name": "staff_profiles",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "profile_id": {
          "name": "profile_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "tenant_id": {
          "name": "tenant_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "license_number": {
          "name": "license_number",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "license_expiry": {
          "name": "license_expiry",
          "type": "date",
          "primaryKey": false,
          "notNull": false
        },
        "specializations": {
          "name": "specializations",
          "type": "text[]",
          "primaryKey": false,
          "notNull": false
        },
        "education": {
          "name": "education",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "bio": {
          "name": "bio",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "hire_date": {
          "name": "hire_date",
          "type": "date",
          "primaryKey": false,
          "notNull": false
        },
        "employment_type": {
          "name": "employment_type",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "default": "'full_time'"
        },
        "department": {
          "name": "department",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "title": {
          "name": "title",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "hourly_rate": {
          "name": "hourly_rate",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "daily_rate": {
          "name": "daily_rate",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "emergency_contact_name": {
          "name": "emergency_contact_name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "emergency_contact_phone": {
          "name": "emergency_contact_phone",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "signature_url": {
          "name": "signature_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": true
        },
        "deleted_at": {
          "name": "deleted_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "deleted_by": {
          "name": "deleted_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_staff_profiles_active": {
          "name": "idx_staff_profiles_active",
          "columns": [
            {
              "expression": "is_active",
              "asc": true,
              "nulls": "last",
              "opclass": "bool_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "where": "((is_active = true) AND (deleted_at IS NULL))",
          "with": {}
        },
        "idx_staff_profiles_profile": {
          "name": "idx_staff_profiles_profile",
          "columns": [
            {
              "expression": "profile_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_staff_profiles_tenant": {
          "name": "idx_staff_profiles_tenant",
          "columns": [
            {
              "expression": "tenant_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "staff_profiles_deleted_by_fkey": {
          "name": "staff_profiles_deleted_by_fkey",
          "tableFrom": "staff_profiles",
          "tableTo": "profiles",
          "schemaTo": "public",
          "columnsFrom": [
            "deleted_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "staff_profiles_profile_id_fkey": {
          "name": "staff_profiles_profile_id_fkey",
          "tableFrom": "staff_profiles",
          "tableTo": "profiles",
          "schemaTo": "public",
          "columnsFrom": [
            "profile_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "staff_profiles_tenant_id_fkey": {
          "name": "staff_profiles_tenant_id_fkey",
          "tableFrom": "staff_profiles",
          "tableTo": "tenants",
          "schemaTo": "public",
          "columnsFrom": [
            "tenant_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "staff_profiles_profile_id_key": {
          "columns": [
            "profile_id"
          ],
          "nullsNotDistinct": false,
          "name": "staff_profiles_profile_id_key"
        }
      },
      "checkConstraints": {
        "staff_profiles_employment_type_check": {
          "name": "staff_profiles_employment_type_check",
          "value": "employment_type = ANY (ARRAY['full_time'::text, 'part_time'::text, 'contractor'::text, 'intern'::text])"
        }
      },
      "policies": {
        "Admin manage all profiles": {
          "name": "Admin manage all profiles",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "authenticated"
          ],
          "using": "(EXISTS ( SELECT 1\n   FROM profiles p\n  WHERE ((p.id = auth.uid()) AND (p.tenant_id = staff_profiles.tenant_id) AND (p.role = 'admin'::text) AND (p.deleted_at IS NULL))))"
        },
        "Service role full access staff profiles": {
          "name": "Service role full access staff profiles",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "service_role"
          ]
        },
        "Staff manage own profile": {
          "name": "Staff manage own profile",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ]
        },
        "Staff view all profiles": {
          "name": "Staff view all profiles",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ]
        }
      },
      "isRLSEnabled": true
    },
    "public.staff_schedules": {
      "name": "staff_schedules",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "staff_id": {
          "name": "staff_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "tenant_id": {
          "name": "tenant_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "default": "'Default'"
        },
        "is_default": {
          "name": "is_default",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": true
        },
        "effective_from": {
          "name": "effective_from",
          "type": "date",
          "primaryKey": false,
          "notNull": true,
          "default": "CURRENT_DATE"
        },
        "effective_until": {
          "name": "effective_until",
          "type": "date",
          "primaryKey": false,
          "notNull": false
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_staff_schedules_active": {
          "name": "idx_staff_schedules_active",
          "columns": [
            {
              "expression": "is_active",
              "asc": true,
              "nulls": "last",
              "opclass": "bool_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "where": "(is_active = true)",
          "with": {}
        },
        "idx_staff_schedules_staff": {
          "name": "idx_staff_schedules_staff",
          "columns": [
            {
              "expression": "staff_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_staff_schedules_tenant": {
          "name": "idx_staff_schedules_tenant",
          "columns": [
            {
              "expression": "tenant_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "staff_schedules_staff_id_fkey": {
          "name": "staff_schedules_staff_id_fkey",
          "tableFrom": "staff_schedules",
          "tableTo": "staff_profiles",
          "schemaTo": "public",
          "columnsFrom": [
            "staff_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "staff_schedules_tenant_id_fkey": {
          "name": "staff_schedules_tenant_id_fkey",
          "tableFrom": "staff_schedules",
          "tableTo": "tenants",
          "schemaTo": "public",
          "columnsFrom": [
            "tenant_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {},
      "policies": {
        "Admin manage schedules": {
          "name": "Admin manage schedules",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "authenticated"
          ],
          "using": "(EXISTS ( SELECT 1\n   FROM profiles p\n  WHERE ((p.id = auth.uid()) AND (p.tenant_id = staff_schedules.tenant_id) AND (p.role = 'admin'::text))))"
        },
        "Service role full access schedules": {
          "name": "Service role full access schedules",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "service_role"
          ]
        },
        "Staff view schedules": {
          "name": "Staff view schedules",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ]
        }
      },
      "isRLSEnabled": true
    },
    "public.staff_schedule_entries": {
      "name": "staff_schedule_entries",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "schedule_id": {
          "name": "schedule_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "tenant_id": {
          "name": "tenant_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "day_of_week": {
          "name": "day_of_week",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "start_time": {
          "name": "start_time",
          "type": "time",
          "primaryKey": false,
          "notNull": true
        },
        "end_time": {
          "name": "end_time",
          "type": "time",
          "primaryKey": false,
          "notNull": true
        },
        "break_start": {
          "name": "break_start",
          "type": "time",
          "primaryKey": false,
          "notNull": false
        },
        "break_end": {
          "name": "break_end",
          "type": "time",
          "primaryKey": false,
          "notNull": false
        },
        "location": {
          "name": "location",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_staff_schedule_entries_day": {
          "name": "idx_staff_schedule_entries_day",
          "columns": [
            {
              "expression": "day_of_week",
              "asc": true,
              "nulls": "last",
              "opclass": "int4_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_staff_schedule_entries_schedule": {
          "name": "idx_staff_schedule_entries_schedule",
          "columns": [
            {
              "expression": "schedule_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_staff_schedule_entries_tenant": {
          "name": "idx_staff_schedule_entries_tenant",
          "columns": [
            {
              "expression": "tenant_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "staff_schedule_entries_schedule_id_fkey": {
          "name": "staff_schedule_entries_schedule_id_fkey",
          "tableFrom": "staff_schedule_entries",
          "tableTo": "staff_schedules",
          "schemaTo": "public",
          "columnsFrom": [
            "schedule_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "staff_schedule_entries_tenant_id_fkey": {
          "name": "staff_schedule_entries_tenant_id_fkey",
          "tableFrom": "staff_schedule_entries",
          "tableTo": "tenants",
          "schemaTo": "public",
          "columnsFrom": [
            "tenant_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {
        "staff_schedule_entries_break": {
          "name": "staff_schedule_entries_break",
          "value": "((break_start IS NULL) AND (break_end IS NULL)) OR ((break_start IS NOT NULL) AND (break_end IS NOT NULL) AND (break_end > break_start))"
        },
        "staff_schedule_entries_day_of_week_check": {
          "name": "staff_schedule_entries_day_of_week_check",
          "value": "(day_of_week >= 1) AND (day_of_week <= 7)"
        },
        "staff_schedule_entries_times": {
          "name": "staff_schedule_entries_times",
          "value": "end_time > start_time"
        }
      },
      "policies": {
        "Access schedule entries": {
          "name": "Access schedule entries",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "authenticated"
          ],
          "using": "is_staff_of(tenant_id)"
        },
        "Service role full access entries": {
          "name": "Service role full access entries",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "service_role"
          ]
        }
      },
      "isRLSEnabled": true
    },
    "public.time_off_types": {
      "name": "time_off_types",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "tenant_id": {
          "name": "tenant_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "code": {
          "name": "code",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "is_paid": {
          "name": "is_paid",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": true
        },
        "max_days_per_year": {
          "name": "max_days_per_year",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "requires_approval": {
          "name": "requires_approval",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": true
        },
        "requires_documentation": {
          "name": "requires_documentation",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "color": {
          "name": "color",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "default": "'#6366f1'"
        },
        "icon": {
          "name": "icon",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_time_off_types_tenant": {
          "name": "idx_time_off_types_tenant",
          "columns": [
            {
              "expression": "tenant_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "time_off_types_tenant_id_fkey": {
          "name": "time_off_types_tenant_id_fkey",
          "tableFrom": "time_off_types",
          "tableTo": "tenants",
          "schemaTo": "public",
          "columnsFrom": [
            "tenant_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "time_off_types_tenant_id_code_key": {
          "columns": [
            "tenant_id",
            "code"
          ],
          "nullsNotDistinct": false,
          "name": "time_off_types_tenant_id_code_key"
        }
      },
      "checkConstraints": {},
      "policies": {
        "Admin manage time off types": {
          "name": "Admin manage time off types",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "authenticated"
          ],
          "using": "(EXISTS ( SELECT 1\n   FROM profiles p\n  WHERE ((p.id = auth.uid()) AND (p.tenant_id = time_off_types.tenant_id) AND (p.role = 'admin'::text))))"
        },
        "Service role full access time off types": {
          "name": "Service role full access time off types",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "service_role"
          ]
        },
        "Staff view time off types": {
          "name": "Staff view time off types",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ]
        }
      },
      "isRLSEnabled": true
    },
    "public.staff_time_off": {
      "name": "staff_time_off",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "staff_id": {
          "name": "staff_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "tenant_id": {
          "name": "tenant_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "type_id": {
          "name": "type_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "start_date": {
          "name": "start_date",
          "type": "date",
          "primaryKey": false,
          "notNull": true
        },
        "end_date": {
          "name": "end_date",
          "type": "date",
          "primaryKey": false,
          "notNull": true
        },
        "start_half_day": {
          "name": "start_half_day",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "end_half_day": {
          "name": "end_half_day",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "reason": {
          "name": "reason",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "notes": {
          "name": "notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'pending'"
        },
        "approved_by": {
          "name": "approved_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "approved_at": {
          "name": "approved_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "rejection_reason": {
          "name": "rejection_reason",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_staff_time_off_dates": {
          "name": "idx_staff_time_off_dates",
          "columns": [
            {
              "expression": "start_date",
              "asc": true,
              "nulls": "last",
              "opclass": "date_ops",
              "isExpression": false
            },
            {
              "expression": "end_date",
              "asc": true,
              "nulls": "last",
              "opclass": "date_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_staff_time_off_staff": {
          "name": "idx_staff_time_off_staff",
          "columns": [
            {
              "expression": "staff_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_staff_time_off_status": {
          "name": "idx_staff_time_off_status",
          "columns": [
            {
              "expression": "status",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "where": "(status = 'pending'::text)",
          "with": {}
        },
        "idx_staff_time_off_tenant": {
          "name": "idx_staff_time_off_tenant",
          "columns": [
            {
              "expression": "tenant_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "staff_time_off_approved_by_fkey": {
          "name": "staff_time_off_approved_by_fkey",
          "tableFrom": "staff_time_off",
          "tableTo": "profiles",
          "schemaTo": "public",
          "columnsFrom": [
            "approved_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "staff_time_off_staff_id_fkey": {
          "name": "staff_time_off_staff_id_fkey",
          "tableFrom": "staff_time_off",
          "tableTo": "staff_profiles",
          "schemaTo": "public",
          "columnsFrom": [
            "staff_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "staff_time_off_tenant_id_fkey": {
          "name": "staff_time_off_tenant_id_fkey",
          "tableFrom": "staff_time_off",
          "tableTo": "tenants",
          "schemaTo": "public",
          "columnsFrom": [
            "tenant_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "staff_time_off_type_id_fkey": {
          "name": "staff_time_off_type_id_fkey",
          "tableFrom": "staff_time_off",
          "tableTo": "time_off_types",
          "schemaTo": "public",
          "columnsFrom": [
            "type_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {
        "staff_time_off_dates": {
          "name": "staff_time_off_dates",
          "value": "end_date >= start_date"
        },
        "staff_time_off_status_check": {
          "name": "staff_time_off_status_check",
          "value": "status = ANY (ARRAY['pending'::text, 'approved'::text, 'rejected'::text, 'cancelled'::text])"
        }
      },
      "policies": {
        "Admin manage time off": {
          "name": "Admin manage time off",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "authenticated"
          ],
          "using": "(EXISTS ( SELECT 1\n   FROM profiles p\n  WHERE ((p.id = auth.uid()) AND (p.tenant_id = staff_time_off.tenant_id) AND (p.role = 'admin'::text))))"
        },
        "Service role full access time off": {
          "name": "Service role full access time off",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "service_role"
          ]
        },
        "Staff request time off": {
          "name": "Staff request time off",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ]
        },
        "Staff view own time off": {
          "name": "Staff view own time off",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ]
        }
      },
      "isRLSEnabled": true
    },
    "public.clinic_profiles": {
      "name": "clinic_profiles",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "profile_id": {
          "name": "profile_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "tenant_id": {
          "name": "tenant_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "role": {
          "name": "role",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'owner'"
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": true
        },
        "joined_at": {
          "name": "joined_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "permissions": {
          "name": "permissions",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "invited_by": {
          "name": "invited_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "invitation_accepted_at": {
          "name": "invitation_accepted_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "deleted_at": {
          "name": "deleted_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "deleted_by": {
          "name": "deleted_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_clinic_profiles_active": {
          "name": "idx_clinic_profiles_active",
          "columns": [
            {
              "expression": "tenant_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            },
            {
              "expression": "is_active",
              "asc": true,
              "nulls": "last",
              "opclass": "bool_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "where": "(deleted_at IS NULL)",
          "with": {}
        },
        "idx_clinic_profiles_profile": {
          "name": "idx_clinic_profiles_profile",
          "columns": [
            {
              "expression": "profile_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_clinic_profiles_tenant": {
          "name": "idx_clinic_profiles_tenant",
          "columns": [
            {
              "expression": "tenant_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "clinic_profiles_profile_id_tenant_id_key": {
          "columns": [
            "profile_id",
            "tenant_id"
          ],
          "nullsNotDistinct": false,
          "name": "clinic_profiles_profile_id_tenant_id_key"
        }
      },
      "checkConstraints": {
        "clinic_profiles_role_check": {
          "name": "clinic_profiles_role_check",
          "value": "role = ANY (ARRAY['owner'::text, 'vet'::text, 'admin'::text])"
        }
      },
      "policies": {
        "Clinic staff manage clinic memberships": {
          "name": "Clinic staff manage clinic memberships",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "authenticated"
          ],
          "withCheck": "(EXISTS ( SELECT 1\n   FROM clinic_profiles cp\n  WHERE ((cp.profile_id = auth.uid()) AND (cp.tenant_id = clinic_profiles.tenant_id) AND (cp.role = ANY (ARRAY['vet'::text, 'admin'::text])) AND (cp.is_active = true) AND (cp.deleted_at IS NULL))))",
          "using": "(EXISTS ( SELECT 1\n   FROM clinic_profiles cp\n  WHERE ((cp.profile_id = auth.uid()) AND (cp.tenant_id = clinic_profiles.tenant_id) AND (cp.role = ANY (ARRAY['vet'::text, 'admin'::text])) AND (cp.is_active = true) AND (cp.deleted_at IS NULL))))"
        },
        "Service role full access clinic_profiles": {
          "name": "Service role full access clinic_profiles",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "service_role"
          ]
        },
        "Users view own clinic memberships": {
          "name": "Users view own clinic memberships",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ]
        }
      },
      "isRLSEnabled": true
    },
    "public.notification_queue": {
      "name": "notification_queue",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "tenant_id": {
          "name": "tenant_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "reminder_id": {
          "name": "reminder_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "client_id": {
          "name": "client_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "channel_type": {
          "name": "channel_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "destination": {
          "name": "destination",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "subject": {
          "name": "subject",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "body": {
          "name": "body",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'queued'"
        },
        "sent_at": {
          "name": "sent_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "delivered_at": {
          "name": "delivered_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "opened_at": {
          "name": "opened_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "clicked_at": {
          "name": "clicked_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "error_code": {
          "name": "error_code",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "error_message": {
          "name": "error_message",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "external_id": {
          "name": "external_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_notification_queue_created_brin": {
          "name": "idx_notification_queue_created_brin",
          "columns": [
            {
              "expression": "created_at",
              "asc": true,
              "nulls": "last",
              "opclass": "timestamptz_minmax_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "brin",
          "with": {
            "pages_per_range": "32"
          }
        },
        "idx_notification_queue_status": {
          "name": "idx_notification_queue_status",
          "columns": [
            {
              "expression": "status",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "where": "(status = 'queued'::text)",
          "with": {}
        },
        "idx_notification_queue_tenant": {
          "name": "idx_notification_queue_tenant",
          "columns": [
            {
              "expression": "tenant_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {
        "notification_queue_channel_type_check": {
          "name": "notification_queue_channel_type_check",
          "value": "channel_type = ANY (ARRAY['email'::text, 'sms'::text, 'whatsapp'::text, 'push'::text, 'in_app'::text])"
        },
        "notification_queue_status_check": {
          "name": "notification_queue_status_check",
          "value": "status = ANY (ARRAY['queued'::text, 'sending'::text, 'sent'::text, 'delivered'::text, 'failed'::text, 'bounced'::text])"
        }
      },
      "policies": {
        "Service role full access queue": {
          "name": "Service role full access queue",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "service_role"
          ],
          "using": "true"
        },
        "Staff manage queue": {
          "name": "Staff manage queue",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "authenticated"
          ]
        }
      },
      "isRLSEnabled": true
    },
    "public.store_price_history": {
      "name": "store_price_history",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "tenant_id": {
          "name": "tenant_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "product_id": {
          "name": "product_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "old_price": {
          "name": "old_price",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "new_price": {
          "name": "new_price",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": true
        },
        "price_type": {
          "name": "price_type",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "default": "'base'"
        },
        "changed_by": {
          "name": "changed_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_store_price_history_date": {
          "name": "idx_store_price_history_date",
          "columns": [
            {
              "expression": "created_at",
              "asc": false,
              "nulls": "first",
              "opclass": "timestamptz_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_store_price_history_date_brin": {
          "name": "idx_store_price_history_date_brin",
          "columns": [
            {
              "expression": "created_at",
              "asc": true,
              "nulls": "last",
              "opclass": "timestamptz_minmax_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "brin",
          "with": {
            "pages_per_range": "32"
          }
        },
        "idx_store_price_history_product": {
          "name": "idx_store_price_history_product",
          "columns": [
            {
              "expression": "product_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_store_price_history_tenant": {
          "name": "idx_store_price_history_tenant",
          "columns": [
            {
              "expression": "tenant_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {
        "store_price_history_price_type_check": {
          "name": "store_price_history_price_type_check",
          "value": "price_type = ANY (ARRAY['base'::text, 'sale'::text, 'cost'::text])"
        }
      },
      "policies": {
        "Service role full access price history": {
          "name": "Service role full access price history",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "service_role"
          ],
          "using": "true"
        },
        "Service role full access price_history": {
          "name": "Service role full access price_history",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "service_role"
          ]
        }
      },
      "isRLSEnabled": true
    }
  },
  "enums": {
    "public.acuity_level": {
      "name": "acuity_level",
      "values": [
        "low",
        "normal",
        "high",
        "critical"
      ],
      "schema": "public"
    },
    "public.appointment_status": {
      "name": "appointment_status",
      "values": [
        "scheduled",
        "confirmed",
        "checked_in",
        "in_progress",
        "completed",
        "cancelled",
        "no_show"
      ],
      "schema": "public"
    },
    "public.claim_status": {
      "name": "claim_status",
      "values": [
        "draft",
        "submitted",
        "under_review",
        "approved",
        "partially_approved",
        "denied",
        "paid"
      ],
      "schema": "public"
    },
    "public.claim_type": {
      "name": "claim_type",
      "values": [
        "treatment",
        "surgery",
        "hospitalization",
        "medication",
        "diagnostic",
        "other"
      ],
      "schema": "public"
    },
    "public.contact_preference": {
      "name": "contact_preference",
      "values": [
        "phone",
        "email",
        "whatsapp",
        "sms"
      ],
      "schema": "public"
    },
    "public.conversation_status": {
      "name": "conversation_status",
      "values": [
        "open",
        "pending",
        "resolved",
        "closed"
      ],
      "schema": "public"
    },
    "public.coverage_type": {
      "name": "coverage_type",
      "values": [
        "basic",
        "standard",
        "premium",
        "comprehensive"
      ],
      "schema": "public"
    },
    "public.diagnosis_standard": {
      "name": "diagnosis_standard",
      "values": [
        "venom",
        "snomed",
        "custom"
      ],
      "schema": "public"
    },
    "public.discount_type": {
      "name": "discount_type",
      "values": [
        "percentage",
        "fixed_amount",
        "buy_x_get_y"
      ],
      "schema": "public"
    },
    "public.expense_category": {
      "name": "expense_category",
      "values": [
        "supplies",
        "utilities",
        "payroll",
        "rent",
        "equipment",
        "marketing",
        "insurance",
        "taxes",
        "travel",
        "maintenance",
        "professional_services",
        "training",
        "other"
      ],
      "schema": "public"
    },
    "public.growth_percentile": {
      "name": "growth_percentile",
      "values": [
        "P3",
        "P10",
        "P25",
        "P50",
        "P75",
        "P90",
        "P97"
      ],
      "schema": "public"
    },
    "public.hospitalization_status": {
      "name": "hospitalization_status",
      "values": [
        "admitted",
        "in_treatment",
        "stable",
        "critical",
        "discharged",
        "transferred",
        "deceased"
      ],
      "schema": "public"
    },
    "public.inventory_transaction_type": {
      "name": "inventory_transaction_type",
      "values": [
        "purchase",
        "sale",
        "adjustment",
        "return",
        "transfer",
        "waste",
        "reservation"
      ],
      "schema": "public"
    },
    "public.invite_status": {
      "name": "invite_status",
      "values": [
        "pending",
        "accepted",
        "expired",
        "cancelled"
      ],
      "schema": "public"
    },
    "public.invoice_status": {
      "name": "invoice_status",
      "values": [
        "draft",
        "sent",
        "partial",
        "paid",
        "overdue",
        "cancelled",
        "refunded"
      ],
      "schema": "public"
    },
    "public.lab_order_status": {
      "name": "lab_order_status",
      "values": [
        "pending",
        "collected",
        "processing",
        "completed",
        "cancelled"
      ],
      "schema": "public"
    },
    "public.loyalty_tier": {
      "name": "loyalty_tier",
      "values": [
        "bronze",
        "silver",
        "gold",
        "platinum"
      ],
      "schema": "public"
    },
    "public.loyalty_transaction_type": {
      "name": "loyalty_transaction_type",
      "values": [
        "earn",
        "redeem",
        "expire",
        "adjust",
        "bonus"
      ],
      "schema": "public"
    },
    "public.medical_record_type": {
      "name": "medical_record_type",
      "values": [
        "consultation",
        "surgery",
        "emergency",
        "vaccination",
        "checkup",
        "dental",
        "grooming",
        "lab_result",
        "imaging",
        "other"
      ],
      "schema": "public"
    },
    "public.message_channel": {
      "name": "message_channel",
      "values": [
        "internal",
        "whatsapp",
        "email",
        "sms"
      ],
      "schema": "public"
    },
    "public.message_status": {
      "name": "message_status",
      "values": [
        "pending",
        "sent",
        "delivered",
        "read",
        "failed"
      ],
      "schema": "public"
    },
    "public.order_status": {
      "name": "order_status",
      "values": [
        "pending",
        "confirmed",
        "processing",
        "ready",
        "shipped",
        "delivered",
        "cancelled",
        "returned"
      ],
      "schema": "public"
    },
    "public.payment_status": {
      "name": "payment_status",
      "values": [
        "pending",
        "completed",
        "failed",
        "refunded",
        "cancelled"
      ],
      "schema": "public"
    },
    "public.pet_sex": {
      "name": "pet_sex",
      "values": [
        "male",
        "female",
        "unknown"
      ],
      "schema": "public"
    },
    "public.pet_species": {
      "name": "pet_species",
      "values": [
        "dog",
        "cat",
        "bird",
        "rabbit",
        "hamster",
        "fish",
        "reptile",
        "other"
      ],
      "schema": "public"
    },
    "public.policy_status": {
      "name": "policy_status",
      "values": [
        "pending",
        "active",
        "expired",
        "cancelled",
        "suspended"
      ],
      "schema": "public"
    },
    "public.prescription_status": {
      "name": "prescription_status",
      "values": [
        "draft",
        "active",
        "dispensed",
        "expired",
        "cancelled"
      ],
      "schema": "public"
    },
    "public.service_category": {
      "name": "service_category",
      "values": [
        "consultation",
        "vaccination",
        "grooming",
        "surgery",
        "diagnostic",
        "dental",
        "emergency",
        "hospitalization",
        "treatment",
        "identification",
        "other"
      ],
      "schema": "public"
    },
    "public.severity_level": {
      "name": "severity_level",
      "values": [
        "low",
        "medium",
        "high",
        "critical"
      ],
      "schema": "public"
    },
    "public.time_off_status": {
      "name": "time_off_status",
      "values": [
        "pending",
        "approved",
        "denied",
        "cancelled"
      ],
      "schema": "public"
    },
    "public.time_off_type": {
      "name": "time_off_type",
      "values": [
        "vacation",
        "sick",
        "personal",
        "maternity",
        "paternity",
        "unpaid",
        "other"
      ],
      "schema": "public"
    },
    "public.user_role": {
      "name": "user_role",
      "values": [
        "owner",
        "vet",
        "admin"
      ],
      "schema": "public"
    },
    "public.vaccine_status": {
      "name": "vaccine_status",
      "values": [
        "scheduled",
        "completed",
        "missed",
        "cancelled"
      ],
      "schema": "public"
    },
    "public.workflow_status": {
      "name": "workflow_status",
      "values": [
        "draft",
        "pending",
        "active",
        "completed",
        "cancelled",
        "expired"
      ],
      "schema": "public"
    }
  },
  "schemas": {},
  "sequences": {},
  "roles": {},
  "policies": {},
  "views": {
    "public.tenant_public_info": {
      "name": "tenant_public_info",
      "schema": "public",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "logo_url": {
          "name": "logo_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "city": {
          "name": "city",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "country": {
          "name": "country",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false
        }
      },
      "isExisting": false,
      "definition": "SELECT id, name, logo_url, city, country, is_active FROM tenants WHERE is_active = true",
      "materialized": false
    },
    "public.recent_job_executions": {
      "name": "recent_job_executions",
      "schema": "public",
      "columns": {
        "job_name": {
          "name": "job_name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "started_at": {
          "name": "started_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "completed_at": {
          "name": "completed_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "duration_ms": {
          "name": "duration_ms",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "rows_affected": {
          "name": "rows_affected",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "error_message": {
          "name": "error_message",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        }
      },
      "isExisting": false,
      "definition": "SELECT job_name, started_at, completed_at, duration_ms, status, rows_affected, error_message FROM scheduled_job_log WHERE started_at > (now() - '24:00:00'::interval) ORDER BY started_at DESC",
      "materialized": false
    },
    "public.job_statistics": {
      "name": "job_statistics",
      "schema": "public",
      "columns": {
        "job_name": {
          "name": "job_name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "total_runs": {
          "name": "total_runs",
          "type": "bigint",
          "primaryKey": false,
          "notNull": false
        },
        "successful_runs": {
          "name": "successful_runs",
          "type": "bigint",
          "primaryKey": false,
          "notNull": false
        },
        "failed_runs": {
          "name": "failed_runs",
          "type": "bigint",
          "primaryKey": false,
          "notNull": false
        },
        "success_rate": {
          "name": "success_rate",
          "type": "numeric",
          "primaryKey": false,
          "notNull": false
        },
        "avg_duration_ms": {
          "name": "avg_duration_ms",
          "type": "numeric",
          "primaryKey": false,
          "notNull": false
        },
        "last_run": {
          "name": "last_run",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        }
      },
      "isExisting": false,
      "definition": "SELECT job_name, count(*) AS total_runs, count(*) FILTER (WHERE status = 'completed'::text) AS successful_runs, count(*) FILTER (WHERE status = 'failed'::text) AS failed_runs, round(100.0 * count(*) FILTER (WHERE status = 'completed'::text)::numeric / NULLIF(count(*), 0)::numeric, 2) AS success_rate, avg(duration_ms) FILTER (WHERE status = 'completed'::text) AS avg_duration_ms, max(started_at) AS last_run FROM scheduled_job_log WHERE started_at > (now() - '7 days'::interval) GROUP BY job_name ORDER BY job_name",
      "materialized": false
    }
  },
  "_meta": {
    "schemas": {},
    "tables": {},
    "columns": {}
  },
  "internal": {
    "tables": {
      "tenants": {
        "columns": {
          "features_enabled": {
            "isArray": true,
            "dimensions": 1,
            "rawType": "text"
          }
        }
      },
      "profiles": {
        "columns": {
          "specializations": {
            "isArray": true,
            "dimensions": 1,
            "rawType": "text"
          }
        }
      },
      "clinic_invites": {
        "columns": {
          "expires_at": {
            "isDefaultAnExpression": true
          }
        }
      },
      "pets": {
        "columns": {
          "photos": {
            "isArray": true,
            "dimensions": 1,
            "rawType": "text"
          },
          "allergies": {
            "isArray": true,
            "dimensions": 1,
            "rawType": "text"
          },
          "chronic_conditions": {
            "isArray": true,
            "dimensions": 1,
            "rawType": "text"
          }
        }
      },
      "vaccine_templates": {
        "columns": {
          "species": {
            "isArray": true,
            "dimensions": 1,
            "rawType": "text"
          }
        }
      },
      "vaccines": {
        "columns": {
          "photos": {
            "isArray": true,
            "dimensions": 1,
            "rawType": "text"
          }
        }
      },
      "vaccine_reactions": {
        "columns": {
          "symptoms": {
            "isArray": true,
            "dimensions": 1,
            "rawType": "text"
          }
        }
      },
      "vaccine_protocols": {
        "columns": {
          "diseases_prevented": {
            "isArray": true,
            "dimensions": 1,
            "rawType": "text"
          },
          "booster_intervals_months": {
            "isArray": true,
            "dimensions": 1,
            "rawType": "integer"
          }
        }
      },
      "diagnosis_codes": {
        "columns": {
          "species": {
            "isArray": true,
            "dimensions": 1,
            "rawType": "text"
          }
        }
      },
      "drug_dosages": {
        "columns": {
          "contraindications": {
            "isArray": true,
            "dimensions": 1,
            "rawType": "text"
          },
          "side_effects": {
            "isArray": true,
            "dimensions": 1,
            "rawType": "text"
          }
        }
      },
      "medical_records": {
        "columns": {
          "attachments": {
            "isArray": true,
            "dimensions": 1,
            "rawType": "text"
          }
        }
      },
      "notification_preferences": {
        "columns": {
          "preferred_channels": {
            "isArray": true,
            "dimensions": 1,
            "rawType": "text"
          }
        }
      },
      "reminder_rules": {
        "columns": {
          "channels": {
            "isArray": true,
            "dimensions": 1,
            "rawType": "text"
          }
        }
      },
      "services": {
        "columns": {
          "available_days": {
            "isArray": true,
            "dimensions": 1,
            "rawType": "integer"
          },
          "species_allowed": {
            "isArray": true,
            "dimensions": 1,
            "rawType": "text"
          }
        }
      },
      "store_products": {
        "columns": {
          "images": {
            "isArray": true,
            "dimensions": 1,
            "rawType": "text"
          },
          "target_species": {
            "isArray": true,
            "dimensions": 1,
            "rawType": "text"
          }
        }
      },
      "store_coupons": {
        "columns": {
          "applicable_categories": {
            "isArray": true,
            "dimensions": 1,
            "rawType": "uuid"
          },
          "applicable_products": {
            "isArray": true,
            "dimensions": 1,
            "rawType": "uuid"
          }
        }
      },
      "blanket_consents": {
        "columns": {
          "valid_procedures": {
            "isArray": true,
            "dimensions": 1,
            "rawType": "text"
          }
        }
      },
      "kennels": {
        "columns": {
          "features": {
            "isArray": true,
            "dimensions": 1,
            "rawType": "text"
          }
        }
      },
      "audit_log_enhanced": {
        "columns": {
          "changed_fields": {
            "isArray": true,
            "dimensions": 1,
            "rawType": "text"
          },
          "compliance_tags": {
            "isArray": true,
            "dimensions": 1,
            "rawType": "text"
          }
        }
      },
      "audit_configuration": {
        "columns": {
          "excluded_columns": {
            "isArray": true,
            "dimensions": 1,
            "rawType": "text"
          },
          "sensitive_columns": {
            "isArray": true,
            "dimensions": 1,
            "rawType": "text"
          }
        }
      },
      "data_access_log": {
        "columns": {
          "fields_accessed": {
            "isArray": true,
            "dimensions": 1,
            "rawType": "text"
          }
        }
      },
      "lab_panels": {
        "columns": {
          "test_ids": {
            "isArray": true,
            "dimensions": 1,
            "rawType": "uuid"
          }
        }
      },
      "insurance_providers": {
        "columns": {
          "coverage_types": {
            "isArray": true,
            "dimensions": 1,
            "rawType": "text"
          }
        }
      },
      "insurance_claims": {
        "columns": {
          "supporting_documents": {
            "isArray": true,
            "dimensions": 1,
            "rawType": "text"
          }
        }
      },
      "conversations": {
        "columns": {
          "tags": {
            "isArray": true,
            "dimensions": 1,
            "rawType": "text"
          }
        }
      },
      "message_templates": {
        "columns": {
          "variables": {
            "isArray": true,
            "dimensions": 1,
            "rawType": "text"
          },
          "channels": {
            "isArray": true,
            "dimensions": 1,
            "rawType": "text"
          }
        }
      },
      "staff_profiles": {
        "columns": {
          "specializations": {
            "isArray": true,
            "dimensions": 1,
            "rawType": "text"
          }
        }
      }
    }
  }
}